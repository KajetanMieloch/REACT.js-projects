/*! For license information please see main.0e88920e.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var M,F=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function q(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case x:return"Portal";case E:return"Profiler";case _:return"StrictMode";case C:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function j(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ie=null,_e=null;function Ee(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Se(e){Ie?_e?_e.push(e):_e=[e]:Ie=e}function Te(){if(Ie){var e=Ie,t=_e;if(_e=Ie=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ae(e,t){return e(t)}function Ce(){}var Ne=!1;function De(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ae(e,t,n)}finally{Ne=!1,(null!==Ie||null!==_e)&&(Ce(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ve=!1,Ue=null,Be={onError:function(e){Me=!0,Fe=e}};function qe(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,It,_t,Et,St=!1,Tt=[],At=null,Ct=null,Nt=null,Dt=new Map,Rt=new Map,Ot=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=je(n)))return e.blockedOn=t,void Et(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Vt(e)&&n.delete(t)}function Bt(){St=!1,null!==At&&Vt(At)&&(At=null),null!==Ct&&Vt(Ct)&&(Ct=null),null!==Nt&&Vt(Nt)&&(Nt=null),Dt.forEach(Ut),Rt.forEach(Ut)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return qt(t,e)}if(0<Tt.length){qt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&qt(At,e),null!==Ct&&qt(Ct,e),null!==Nt&&qt(Nt,e),Dt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var jt=b.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,n,r){var i=kt,a=jt.transition;jt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,jt.transition=a}}function Kt(e,t,n,r){var i=kt,a=jt.transition;jt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,jt.transition=a}}function Ht(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Mt(At,e,t,n,r,i),!0;case"dragenter":return Ct=Mt(Ct,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=je(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function En(){return _n}var Sn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),An=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Dn),On=[9,13,27,32],Pn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Pn||Ln&&8<Ln&&11>=Ln),Vn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function Gn(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Hn=null;function Qn(e){Vr(e,0)}function Yn(e){if(H(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Zn;if(l){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Hn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Gn(t,Hn,e,we(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Kr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Ir={},_r={};function Er(e){if(Ir[e])return Ir[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Ir[e]=n[t];return e}l&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Ar=Er("animationstart"),Cr=Er("transitionend"),Nr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),s(t,[e])}for(var Or=0;Or<Dr.length;Or++){var Pr=Dr[Or];Rr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Ar,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(qe.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ve||(Ve=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ve)throw e=Ue,Ve=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(jr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),jr(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Br("selectionchange",!1,t))}}function jr(e,t,n,r){switch(Xt(t)){case 1:var i=Gt;break;case 4:i=Kt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Cn;break;case Sr:case Tr:case Ar:s=mn;break;case Cr:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=An}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=An,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Xn;else if(Wn(u))if(Jn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Gn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(m=Kr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=qn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Un=!0,Vn);case"textInput":return(e=t.data)===Vn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Pn&&Bn(e,t)?(e=en(),$t=Zt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Vr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Re(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],Ii=-1;function _i(e){return{current:e}}function Ei(e){0>Ii||(e.current=xi[Ii],xi[Ii]=null,Ii--)}function Si(e,t){Ii++,xi[Ii]=e.current,e.current=t}var Ti={},Ai=_i(Ti),Ci=_i(!1),Ni=Ti;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ei(Ci),Ei(Ai)}function Pi(e,t,n){if(Ai.current!==Ti)throw Error(a(168));Si(Ai,t),Si(Ci,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,j(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ai.current,Si(Ai,e),Si(Ci,Ci.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ci),Ei(Ai),Si(Ai,e)):Ei(Ci),Si(Ci,n)}var Vi=null,Ui=!1,Bi=!1;function qi(e){null===Vi?Vi=[e]:Vi.push(e)}function zi(){if(!Bi&&null!==Vi){Bi=!0;var e=0,t=kt;try{var n=Vi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,Ui=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),He($e,zi),i}finally{kt=t,Bi=!1}}return null}var ji=[],Wi=0,Gi=null,Ki=0,Hi=[],Qi=0,Yi=null,Xi=1,Ji="";function Zi(e,t){ji[Wi++]=Ki,ji[Wi++]=Gi,Gi=e,Ki=t}function $i(e,t,n){Hi[Qi++]=Xi,Hi[Qi++]=Ji,Hi[Qi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Xi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function ta(e){for(;e===Gi;)Gi=ji[--Wi],ji[Wi]=null,Ki=ji[--Wi],ji[Wi]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,Xi=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=_i(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ma.current;Ei(ma),e._currentValue=t}function Ia(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _a(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Aa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ca(e,r)}function Ca(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&As)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ca(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ca(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Pa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function ja(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ri(t)?Ni:Ai.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ri(t)?Ni:Ai.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===I?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case x:return(t=Vc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Zi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Zi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Zi(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Zi(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Zi(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Zi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===I){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===I?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Pc(o.type,o.key,o.props,null,r.mode,s)).ref=Ka(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Xa=Ya(!0),Ja=Ya(!1),Za={},$a=_i(Za),eo=_i(Za),to=_i(Za);function no(e){if(e===Za)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si($a,Za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei($a),Si($a,t)}function io(){Ei($a),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no($a.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si($a,n))}function oo(e){eo.current===e&&(Ei($a),Ei(eo))}var uo=_i(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function _o(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Ao(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Ro(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Uo(9,Po.bind(null,n,r,i,t),void 0,null),null===Cs)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Ca(e,1);null!==t&&nc(t,e,1,-1)}function Vo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return To().memoizedState}function qo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&Io(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function jo(e,t){return qo(8390656,8,e,t)}function Wo(e,t){return zo(2048,8,e,t)}function Go(e,t){return zo(4,2,e,t)}function Ko(e,t){return zo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function $o(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Aa(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Aa(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:jo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Vo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=$o.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Cs)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,jo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Cs.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Xo,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ko,useMemo:Jo,useReducer:Co,useRef:Bo,useState:function(){return Co(Ao)},useDebugValue:Yo,useDeferredValue:function(e){return Zo(To(),yo.memoizedState,e)},useTransition:function(){return[Co(Ao)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Xo,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ko,useMemo:Jo,useReducer:No,useRef:Bo,useState:function(){return No(Ao)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Zo(t,yo.memoizedState,e)},useTransition:function(){return[No(Ao)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ks?Ks=new Set([this]):Ks.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Pa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Xa(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return _a(t,i),r=_o(e,t,n,r,a,i),n=Eo(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Iu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,_u(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function _u(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Os,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Os,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Os,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Os,Rs),Rs|=r;return wu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Ri(n)?Ni:Ai.current;return a=Di(t,a),_a(t,i),n=_o(e,t,n,r,a,i),r=Eo(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Au(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(_a(t,i),null===t.stateNode)ju(e,t),ja(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Di(t,c=Ri(n)?Ni:Ai.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ci.current||Na?("function"===typeof l&&(Ba(t,n,l,r),s=t.memoizedState),(u=Na||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Di(t,s=Ri(n)?Ni:Ai.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Wa(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ci.current||Na?("function"===typeof d&&(Ba(t,n,d,r),p=t.memoizedState),(c=Na||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cu(e,t,n,r,a,i)}function Cu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ro(e,t.containerInfo)}function Du(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ru,Ou,Pu,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Uu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Uu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Uu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Cs)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ca(e,i),nc(r,e,i,-1))}return vc(),Uu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=Xi,Hi[Qi++]=Ji,Hi[Qi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),(t=Vu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ia(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ju(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ku(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ku(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Ku(t),null;case 3:return r=t.stateNode,io(),Ei(Ci),Ei(Ai),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Ku(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ku(t),null}if(e=no($a.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":K(r),$(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":K(e),$(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ku(t),null;case 6:if(e&&null!=t.stateNode)Pu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no($a.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ku(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ku(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ps&&(Ps=3):vc())),null!==t.updateQueue&&(t.flags|=4),Ku(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Ku(t),null;case 10:return xa(t.type._context),Ku(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Ku(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Ps||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>zs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Ku(t),null}else 2*Je()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Ku(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Ku(t),6&t.subtreeFlags&&(t.flags|=8192)):Ku(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ci),Ei(Ai),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($a.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Pu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Xu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function $u(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){_c(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||$u(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Xu&&($u(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){_c(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,hs(e,t,n),Xu=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){_c(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ms(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(y){_c(e,e.return,y)}try{ns(5,e,e.return)}catch(y){_c(e,e.return,y)}}break;case 1:vs(t,e),ms(e),512&r&&null!==n&&$u(n,n.return);break;case 5:if(vs(t,e),ms(e),512&r&&null!==n&&$u(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){_c(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":Z(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){_c(e,e.return,y)}}break;case 6:if(vs(t,e),ms(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){_c(e,e.return,y)}}break;case 3:if(vs(t,e),ms(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(y){_c(e,e.return,y)}break;case 4:default:vs(t,e),ms(e);break;case 13:vs(t,e),ms(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qs=Je())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||f,vs(t,e),Xu=l):vs(t,e),ms(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:$u(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){_c(r,n,y)}}break;case 5:$u(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Zu=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){_c(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){_c(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ms(e),4&r&&ps(e);case 21:}}function ms(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){_c(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Zu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=Yu;var c=Xu;if(Yu=o,(Xu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,ks(a,t,n),a=a.sibling;Zu=i,Yu=u,Xu=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):bs(e)}}function bs(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Va(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&is(t)}catch(d){_c(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function ws(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){_c(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){_c(t,i,s)}}var a=t.return;try{is(t)}catch(s){_c(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){_c(t,o,s)}}}catch(s){_c(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Is,_s=Math.ceil,Es=b.ReactCurrentDispatcher,Ss=b.ReactCurrentOwner,Ts=b.ReactCurrentBatchConfig,As=0,Cs=null,Ns=null,Ds=0,Rs=0,Os=_i(0),Ps=0,Ls=null,Ms=0,Fs=0,Vs=0,Us=null,Bs=null,qs=0,zs=1/0,js=null,Ws=!1,Gs=null,Ks=null,Hs=!1,Qs=null,Ys=0,Xs=0,Js=null,Zs=-1,$s=0;function ec(){return 0!==(6&As)?Je():-1!==Zs?Zs:Zs=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&As)&&0!==Ds?Ds&-Ds:null!==va.transition?(0===$s&&($s=vt()),$s):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xs)throw Xs=0,Js=null,Error(a(185));mt(e,n,r),0!==(2&As)&&e===Cs||(e===Cs&&(0===(2&As)&&(Fs|=n),4===Ps&&uc(e,Ds)),rc(e,r),1===n&&0===As&&0===(1&t.mode)&&(zs=Je()+500,Ui&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Cs?Ds:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,qi(e)}(sc.bind(null,e)):qi(sc.bind(null,e)),oi((function(){0===(6&As)&&zi()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zs=-1,$s=0,0!==(6&As))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Cs?Ds:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=As;As|=2;var o=pc();for(Cs===e&&Ds===t||(js=null,zs=Je()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Es.current=o,As=i,null!==Ns?t=0:(Cs=null,Ds=0,t=Ps)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Bs,js);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=qs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Bs,js),t);break}wc(e,Bs,js);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_s(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Bs,js),r);break}wc(e,Bs,js);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Us;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bs,Bs=n,null!==t&&oc(t)),e}function oc(e){null===Bs?Bs=e:Bs.push.apply(Bs,e)}function uc(e,t){for(t&=~Vs,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&As))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bs,js),rc(e,Je()),null}function cc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(zs=Je()+500,Ui&&zi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&As)&&xc();var t=As;As|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(As=t))&&zi()}}function fc(){Rs=Os.current,Ei(Os)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ei(Ci),Ei(Ai),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:xa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Cs=e,Ns=e=Oc(e.current,null),Ds=Rs=t,Ps=0,Ls=null,Vs=Fs=Ms=0,Bs=Us=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function dc(e,t){for(;;){var n=Ns;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Ss.current=null,null===n||null===n.return){Ps=1,Ls=t,Ns=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ds,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ps&&(Ps=2),null===Us?Us=[o]:Us.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ks||!Ks.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function pc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function vc(){0!==Ps&&3!==Ps&&2!==Ps||(Ps=4),null===Cs||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Cs,Ds)}function yc(e,t){var n=As;As|=2;var r=pc();for(Cs===e&&Ds===t||(js=null,hc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(wa(),As=n,Es.current=r,null!==Ns)throw Error(a(261));return Cs=null,Ds=0,Ps}function mc(){for(;null!==Ns;)kc(Ns)}function gc(){for(;null!==Ns&&!Ye();)kc(Ns)}function kc(e){var t=Is(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?bc(e):Ns=t,Ss.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hu(n,t,Rs)))return void(Ns=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(Ns=n);if(null===e)return Ps=6,void(Ns=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Ps&&(Ps=5)}function wc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qs);if(0!==(6&As))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Cs&&(Ns=Cs=null,Ds=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hs||(Hs=!0,Cc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=As;As|=4,Ss.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){_c(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ts,ts=!1}(e,n),ys(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Xe(),As=s,kt=u,Ts.transition=o}else e.current=n;if(Hs&&(Hs=!1,Qs=e,Ys=i),0===(o=e.pendingLanes)&&(Ks=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Gs,Gs=null,e;0!==(1&Ys)&&0!==e.tag&&xc(),0!==(1&(o=e.pendingLanes))?e===Js?Xs++:(Xs=0,Js=e):Xs=0,zi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function xc(){if(null!==Qs){var e=bt(Ys),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Ys=0,0!==(6&As))throw Error(a(331));var i=As;for(As|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(as(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(x){_c(s,s.return,x)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(As=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function Ic(e,t,n){e=Pa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function _c(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ks||!Ks.has(r))){t=Pa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Cs===e&&(Ds&n)===n&&(4===Ps||3===Ps&&(130023424&Ds)===Ds&&500>Je()-qs?hc(e,0):Vs|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Ca(e,t))&&(mt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Cc(e,t){return He(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Nc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Lc(n.children,i,o,t);case _:u=8,i|=8;break;case E:return(e=Dc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case C:return(e=Dc(13,n,t,i)).elementType=C,e.lanes=o,e;case N:return(e=Dc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case A:u=11;break e;case D:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function qc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function jc(e,t,n,r,i,a,o,u,s){return(e=Bc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Oa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Pa(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Is=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Si(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Wu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&$i(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ju(e,t),e=t.pendingProps;var i=Di(t,Ai.current);_a(t,n),i=_o(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Cu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ju(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===D)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Au(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=Iu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Au(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Du(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ci.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ia(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Ia(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,_a(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),Iu(e,t,r,i=ya(r.type,i),n);case 15:return _u(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),ju(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,_a(t,n),ja(t,r,i),Ga(t,r,i,n),Cu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=jc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=Bc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Wc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Je()),0===(6&As)&&(zs=Je()+500,zi()))}break;case 13:lc((function(){var t=Ca(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},xt=function(e){if(13===e.tag){var t=Ca(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},It=function(e){if(13===e.tag){var t=tc(e),n=Ca(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},_t=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Ce=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Se,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return qc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=jc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,I={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!_.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:I.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+A(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),C(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+A(u=e[c],c);s+=C(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=C(u=u.value,t,i,l=a+A(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:I};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=I.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,O(x);else{var t=r(l);null!==t&&P(w,t.startTime-e)}}function x(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&P(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,_=!1,E=null,S=-1,T=5,A=-1;function C(){return!(t.unstable_now()-A<T)}function N(){if(null!==E){var e=t.unstable_now();A=e;var n=!0;try{n=E(!0,e)}finally{n?I():(_=!1,E=null)}}else _=!1}if("function"===typeof k)I=function(){k(N)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=N,I=function(){R.postMessage(null)}}else I=function(){m(N,0)};function O(e){E=e,_||(_=!0,I())}function P(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,P(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(x))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".f5295750.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="kurkaio:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkkurkaio=self.webpackChunkkurkaio||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return F},SDK_VERSION:function(){return Je},_DEFAULT_ENTRY_NAME:function(){return Ve},_addComponent:function(){return ze},_addOrOverwriteComponent:function(){return je},_apps:function(){return Be},_clearComponents:function(){return He},_components:function(){return qe},_getProvider:function(){return Ge},_registerComponent:function(){return We},_removeServiceInstance:function(){return Ke},deleteApp:function(){return tt},getApp:function(){return $e},getApps:function(){return et},initializeApp:function(){return Ze},onLog:function(){return it},registerVersion:function(){return rt},setLogLevel:function(){return at}});var t=n(791),r=n(250);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||u()}n.p;function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function b(e,t){if(t&&("object"===k(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function w(e){var t=g();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function x(e,t,n){return x=g()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&v(i,n.prototype),i},x.apply(null,arguments)}function I(e){var t="function"===typeof Map?new Map:void 0;return I=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return x(e,arguments,m(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,e)},I(e)}var _=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(_(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},S=function(e){return function(e){var t=_(e);return E.encodeByteArray(t,!0)}(e).replace(/\./g,"")},T=function(e){try{return E.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function A(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=A(e[n],t[n]));return e}var C=function(){function e(){var t=this;l(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return h(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function N(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[S(JSON.stringify({alg:"none",type:"JWT"})),S(JSON.stringify(a)),""].join(".")}function D(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function R(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function O(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function P(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function L(){var e=D();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function M(){return"object"===typeof indexedDB}var F=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(p(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(p(a),V.prototype.create),a}return h(n)}(I(Error)),V=function(){function e(t,n,r){l(this,e),this.service=t,this.serviceName=n,this.errors=r}return h(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?U(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new F(n,a,t);return o}}]),e}();function U(e,t){return e.replace(B,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var B=/\{\$([^}]+)}/g;function q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function z(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(j(u)&&j(s)){if(!z(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function j(e){return null!==e&&"object"===typeof e}function W(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function G(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function K(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function H(e,t){var n=new Q(e,t);return n.subscribe.bind(n)}var Q=function(){function e(t,n){var r=this;l(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return h(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=d(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Y),void 0===r.error&&(r.error=Y),void 0===r.complete&&(r.complete=Y);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Y(){}function X(e){return e&&e._delegate?e._delegate:e}function J(){J=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(T){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new _(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=w(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==k(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(b.prototype),u(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),u(m,o,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function Z(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function $(e){return function(e){if(Array.isArray(e))return a(e)}(e)||Z(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function te(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ee(a,r,i,o,u,"next",e)}function u(e){ee(a,r,i,o,u,"throw",e)}o(void 0)}))}}var ne=function(){function e(t,n,r){l(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return h(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),re="[DEFAULT]",ie=function(){function e(t,n){l(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return h(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new C;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:re})}catch(c){}var t,n=d(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat($(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),$(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=d(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(cI){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===re?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(cI){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;return this.component?this.component.multipleInstances?e:re:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ae,oe,ue=function(){function e(t){l(this,e),this.name=t,this.providers=new Map}return h(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ie(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),se=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(oe||(oe={}));var ce={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},le=oe.INFO,fe=(c(ae={},oe.DEBUG,"log"),c(ae,oe.VERBOSE,"log"),c(ae,oe.INFO,"info"),c(ae,oe.WARN,"warn"),c(ae,oe.ERROR,"error"),ae),he=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=fe[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},de=function(){function e(t){l(this,e),this.name=t,this._logLevel=le,this._logHandler=he,this._userLogHandler=null,se.push(this)}return h(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in oe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ce[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,oe.DEBUG].concat(t)),this._logHandler.apply(this,[this,oe.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,oe.VERBOSE].concat(t)),this._logHandler.apply(this,[this,oe.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,oe.INFO].concat(t)),this._logHandler.apply(this,[this,oe.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,oe.WARN].concat(t)),this._logHandler.apply(this,[this,oe.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,oe.ERROR].concat(t)),this._logHandler.apply(this,[this,oe.ERROR].concat(t))}}]),e}();function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye,me;var ge=new WeakMap,ke=new WeakMap,be=new WeakMap,we=new WeakMap,xe=new WeakMap;var Ie={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ke.get(e);if("objectStoreNames"===t)return e.objectStoreNames||be.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Se(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function _e(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Te(this),n),Se(ge.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Se(e.apply(Te(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Te(this),t].concat(r));return be.set(a,t.sort?t.sort():[t]),Se(a)}}function Ee(e){return"function"===typeof e?_e(e):(e instanceof IDBTransaction&&function(e){if(!ke.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ke.set(e,t)}}(e),t=e,(ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Ie):e);var t}function Se(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Se(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&ge.set(t,e)})).catch((function(){})),xe.set(t,e),t}(e);if(we.has(e))return we.get(e);var t=Ee(e);return t!==e&&(we.set(e,t),xe.set(t,e)),t}var Te=function(e){return xe.get(e)};var Ae,Ce,Ne=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],Re=new Map;function Oe(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Re.get(t))return Re.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=De.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ne.includes(n))){var a=function(){var e=te(J().mark((function e(t){var a,o,u,s,c,l,f=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Re.set(t,a),a}}}Ie=function(e){return ve(ve({},e),{},{get:function(t,n,r){return Oe(t,n)||e.get(t,n,r)},has:function(t,n){return!!Oe(t,n)||e.has(t,n)}})}(Ie);var Pe=function(){function e(t){l(this,e),this.container=t}return h(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Le="@firebase/app",Me="0.7.33",Fe=new de("@firebase/app"),Ve="[DEFAULT]",Ue=(c(Ae={},Le,"fire-core"),c(Ae,"@firebase/app-compat","fire-core-compat"),c(Ae,"@firebase/analytics","fire-analytics"),c(Ae,"@firebase/analytics-compat","fire-analytics-compat"),c(Ae,"@firebase/app-check","fire-app-check"),c(Ae,"@firebase/app-check-compat","fire-app-check-compat"),c(Ae,"@firebase/auth","fire-auth"),c(Ae,"@firebase/auth-compat","fire-auth-compat"),c(Ae,"@firebase/database","fire-rtdb"),c(Ae,"@firebase/database-compat","fire-rtdb-compat"),c(Ae,"@firebase/functions","fire-fn"),c(Ae,"@firebase/functions-compat","fire-fn-compat"),c(Ae,"@firebase/installations","fire-iid"),c(Ae,"@firebase/installations-compat","fire-iid-compat"),c(Ae,"@firebase/messaging","fire-fcm"),c(Ae,"@firebase/messaging-compat","fire-fcm-compat"),c(Ae,"@firebase/performance","fire-perf"),c(Ae,"@firebase/performance-compat","fire-perf-compat"),c(Ae,"@firebase/remote-config","fire-rc"),c(Ae,"@firebase/remote-config-compat","fire-rc-compat"),c(Ae,"@firebase/storage","fire-gcs"),c(Ae,"@firebase/storage-compat","fire-gcs-compat"),c(Ae,"@firebase/firestore","fire-fst"),c(Ae,"@firebase/firestore-compat","fire-fst-compat"),c(Ae,"fire-js","fire-js"),c(Ae,"firebase","fire-js-all"),Ae),Be=new Map,qe=new Map;function ze(e,t){try{e.container.addComponent(t)}catch(n){Fe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function je(e,t){e.container.addOrOverwriteComponent(t)}function We(e){var t=e.name;if(qe.has(t))return Fe.debug("There were multiple attempts to register component ".concat(t,".")),!1;qe.set(t,e);var n,r=d(Be.values());try{for(r.s();!(n=r.n()).done;){ze(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ge(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ke(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ve;Ge(e,t).clearInstance(n)}function He(){qe.clear()}var Qe=(c(Ce={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),c(Ce,"bad-app-name","Illegal App name: '{$appName}"),c(Ce,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),c(Ce,"app-deleted","Firebase App named '{$appName}' already deleted"),c(Ce,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),c(Ce,"invalid-log-argument","First argument to `onLog` must be null or a function."),c(Ce,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),c(Ce,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),c(Ce,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),c(Ce,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Ce),Ye=new V("app","Firebase",Qe),Xe=function(){function e(t,n,r){var i=this;l(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ne("app",(function(){return i}),"PUBLIC"))}return h(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ye.create("app-deleted",{appName:this._name})}}]),e}(),Je="9.10.0";function Ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Ve,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ye.create("bad-app-name",{appName:String(i)});var a=Be.get(i);if(a){if(z(e,a.options)&&z(r,a.config))return a;throw Ye.create("duplicate-app",{appName:i})}var o,u=new ue(i),s=d(qe.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Xe(e,r,u);return Be.set(i,l),l}function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=Be.get(e);if(!t)throw Ye.create("no-app",{appName:e});return t}function et(){return Array.from(Be.values())}function tt(e){return nt.apply(this,arguments)}function nt(){return(nt=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Be.has(n)){e.next=6;break}return Be.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e,t,n){var r,i=null!==(r=Ue[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Fe.warn(u.join(" "))}We(new ne("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function it(e,t){if(null!==e&&"function"!==typeof e)throw Ye.create("invalid-log-argument");!function(e,t){var n,r=d(se);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ce[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:oe[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function at(e){var t;t=e,se.forEach((function(e){e.setLogLevel(t)}))}var ot="firebase-heartbeat-store",ut=null;function st(){return ut||(ut=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Se(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Se(u.result),e.oldVersion,e.newVersion,Se(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(ot)}}).catch((function(e){throw Ye.create("idb-open",{originalErrorMessage:e.message})}))),ut}function ct(e){return lt.apply(this,arguments)}function lt(){return lt=te(J().mark((function e(t){var n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,st();case 3:return r=e.sent,e.abrupt("return",r.transaction(ot).objectStore(ot).get(dt(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof F?Fe.warn(e.t0.message):(i=Ye.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),Fe.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),lt.apply(this,arguments)}function ft(e,t){return ht.apply(this,arguments)}function ht(){return ht=te(J().mark((function e(t,n){var r,i,a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,st();case 3:return i=e.sent,a=i.transaction(ot,"readwrite"),o=a.objectStore(ot),e.next=8,o.put(n,dt(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof F?Fe.warn(e.t0.message):(u=Ye.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),Fe.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),ht.apply(this,arguments)}function dt(e){return"".concat(e.name,"!").concat(e.options.appId)}var pt=function(){function e(t){var n=this;l(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new kt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return h(e,[{key:"triggerHeartbeat",value:function(){var e=te(J().mark((function e(){var t,n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=vt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=te(J().mark((function e(){var t,n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=vt(),n=yt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=S(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function vt(){return(new Date).toISOString().substring(0,10)}function yt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=d(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),bt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),bt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var mt,gt,kt=function(){function e(t){l(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return h(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ct(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=te(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ft(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=te(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ft(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat($(r.heartbeats),$(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function bt(e){return S(JSON.stringify({version:2,heartbeats:e})).length}mt="",We(new ne("platform-logger",(function(e){return new Pe(e)}),"PRIVATE")),We(new ne("heartbeat",(function(e){return new pt(e)}),"PRIVATE")),rt(Le,Me,mt),rt(Le,Me,"esm2017"),rt("fire-js","");var wt=function(){function e(t,n){var r=this;l(this,e),this._delegate=t,this.firebase=n,ze(t,new ne("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return h(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),tt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ve;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ve;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){ze(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){je(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),xt=(c(gt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),c(gt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),gt),It=new V("app-compat","Firebase",xt);var _t=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ze(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(q(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:rt,setLogLevel:at,onLog:it,apps:null,SDK_VERSION:Je,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(We(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw It.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&A(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!q(n,e=e||Ve))throw It.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(wt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){A(n,e)},createSubscribe:H,ErrorFactory:V,deepExtend:A}),n}(),Et=new de("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Et.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var St=self.firebase.SDK_VERSION;St&&St.indexOf("LITE")>=0&&Et.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Tt=_t;!function(e){rt("@firebase/app-compat","0.1.34",e)}();function At(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function Ct(){return Ct="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=At(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ct.apply(this,arguments)}Tt.registerVersion("firebase","9.10.0","app-compat");function Nt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Dt;Object.create;var Rt="facebook.com",Ot="github.com",Pt="google.com",Lt="password",Mt="twitter.com",Ft="EMAIL_SIGNIN",Vt="PASSWORD_RESET",Ut="RECOVER_EMAIL",Bt="REVERT_SECOND_FACTOR_ADDITION",qt="VERIFY_AND_CHANGE_EMAIL",zt="VERIFY_EMAIL";function jt(){return c({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Wt=function(){var e;return c(e={},"admin-restricted-operation","This operation is restricted to administrators only."),c(e,"argument-error",""),c(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),c(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),c(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),c(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),c(e,"cordova-not-ready","Cordova framework is not ready."),c(e,"cors-unsupported","This browser is not supported."),c(e,"credential-already-in-use","This credential is already associated with a different user account."),c(e,"custom-token-mismatch","The custom token corresponds to a different audience."),c(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),c(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),c(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),c(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),c(e,"email-already-in-use","The email address is already in use by another account."),c(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),c(e,"expired-action-code","The action code has expired."),c(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),c(e,"internal-error","An internal AuthError has occurred."),c(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),c(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),c(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),c(e,"invalid-auth-event","An internal AuthError has occurred."),c(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),c(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),c(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),c(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),c(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),c(e,"invalid-email","The email address is badly formatted."),c(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),c(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),c(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),c(e,"invalid-credential","The supplied auth credential is malformed or has expired."),c(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),c(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),c(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),c(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),c(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),c(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),c(e,"wrong-password","The password is invalid or the user does not have a password."),c(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),c(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),c(e,"invalid-provider-id","The specified provider ID is invalid."),c(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),c(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),c(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),c(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),c(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),c(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),c(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),c(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),c(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),c(e,"missing-continue-uri","A continue URL must be provided in the request."),c(e,"missing-iframe-start","An internal AuthError has occurred."),c(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),c(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),c(e,"missing-multi-factor-info","No second factor identifier is provided."),c(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),c(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),c(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),c(e,"app-deleted","This instance of FirebaseApp has been deleted."),c(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),c(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),c(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),c(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),c(e,"no-auth-event","An internal AuthError has occurred."),c(e,"no-such-provider","User was not linked to an account with the given provider."),c(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),c(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),c(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),c(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),c(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),c(e,"provider-already-linked","User can only be linked to one identity for the given provider."),c(e,"quota-exceeded","The project's quota for this operation has been exceeded."),c(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),c(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),c(e,"rejected-credential","The request contains malformed or mismatching credentials."),c(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),c(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),c(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),c(e,"timeout","The operation has timed out."),c(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),c(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),c(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),c(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),c(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),c(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),c(e,"unverified-email","The operation requires a verified email."),c(e,"user-cancelled","The user did not grant your application the permissions it requested."),c(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),c(e,"user-disabled","The user account has been disabled by an administrator."),c(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),c(e,"user-signed-out",""),c(e,"weak-password","The password must be 6 characters long or more."),c(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),c(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Gt=jt,Kt=new V("auth","Firebase",jt()),Ht=new de("@firebase/auth");function Qt(e){if(Ht.logLevel<=oe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ht.error.apply(Ht,["Auth (".concat(Je,"): ").concat(e)].concat(n))}}function Yt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw $t.apply(void 0,[e].concat(n))}function Xt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $t.apply(void 0,[e].concat(n))}function Jt(e,t,n){var r=Object.assign(Object.assign({},Gt()),c({},t,n));return new V("auth","Firebase",r).create(t,{appName:e.name})}function Zt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Yt(e,"argument-error"),Jt(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function $t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=$(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat($(o)))}return Kt.create.apply(Kt,[e].concat(n))}function en(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw $t.apply(void 0,[t].concat(r))}}function tn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Qt(t),new Error(t)}function nn(e,t){e||tn(t)}var rn=new Map;function an(e){nn(e instanceof Function,"Expected a class definition");var t=rn.get(e);return t?(nn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,rn.set(e,t),t)}function on(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function un(){return"http:"===sn()||"https:"===sn()}function sn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var cn=function(){function e(t,n){l(this,e),this.shortDelay=t,this.longDelay=n,nn(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(D())||P()}return h(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(un()||O()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ln(e,t){nn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var fn=function(){function e(){l(this,e)}return h(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void tn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void tn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void tn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),hn=(c(Dt={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),c(Dt,"MISSING_CUSTOM_TOKEN","internal-error"),c(Dt,"INVALID_IDENTIFIER","invalid-email"),c(Dt,"MISSING_CONTINUE_URI","internal-error"),c(Dt,"INVALID_PASSWORD","wrong-password"),c(Dt,"MISSING_PASSWORD","internal-error"),c(Dt,"EMAIL_EXISTS","email-already-in-use"),c(Dt,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),c(Dt,"INVALID_IDP_RESPONSE","invalid-credential"),c(Dt,"INVALID_PENDING_TOKEN","invalid-credential"),c(Dt,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),c(Dt,"MISSING_REQ_TYPE","internal-error"),c(Dt,"EMAIL_NOT_FOUND","user-not-found"),c(Dt,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),c(Dt,"EXPIRED_OOB_CODE","expired-action-code"),c(Dt,"INVALID_OOB_CODE","invalid-action-code"),c(Dt,"MISSING_OOB_CODE","internal-error"),c(Dt,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),c(Dt,"INVALID_ID_TOKEN","invalid-user-token"),c(Dt,"TOKEN_EXPIRED","user-token-expired"),c(Dt,"USER_NOT_FOUND","user-token-expired"),c(Dt,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),c(Dt,"INVALID_CODE","invalid-verification-code"),c(Dt,"INVALID_SESSION_INFO","invalid-verification-id"),c(Dt,"INVALID_TEMPORARY_PROOF","invalid-credential"),c(Dt,"MISSING_SESSION_INFO","missing-verification-id"),c(Dt,"SESSION_EXPIRED","code-expired"),c(Dt,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),c(Dt,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),c(Dt,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),c(Dt,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),c(Dt,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),c(Dt,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),c(Dt,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),c(Dt,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),c(Dt,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),c(Dt,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),c(Dt,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Dt),dn=new cn(3e4,6e4);function pn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function vn(e,t,n,r){return yn.apply(this,arguments)}function yn(){return yn=te(J().mark((function e(t,n,r,i){var a,o=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",mn(t,a,te(J().mark((function e(){var a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=W(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",fn.fetch()(wn(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),yn.apply(this,arguments)}function mn(e,t,n){return gn.apply(this,arguments)}function gn(){return gn=te(J().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},hn),n),e.prev=2,a=new xn(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw In(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw In(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw In(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw In(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Jt(t,p,d);case 34:Yt(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof F)){e.next=41;break}throw e.t0;case 41:Yt(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),gn.apply(this,arguments)}function kn(e,t,n,r){return bn.apply(this,arguments)}function bn(){return bn=te(J().mark((function e(t,n,r,i){var a,o,u=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,vn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Yt(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),bn.apply(this,arguments)}function wn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ln(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var xn=function(){function e(t){var n=this;l(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Xt(n.auth,"network-request-failed"))}),dn.get())}))}return h(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function In(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Xt(e,t,r);return i.customData._tokenResponse=n,i}function _n(e,t){return En.apply(this,arguments)}function En(){return En=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),En.apply(this,arguments)}function Sn(e,t){return Tn.apply(this,arguments)}function Tn(){return Tn=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Tn.apply(this,arguments)}function An(e,t){return Cn.apply(this,arguments)}function Cn(){return Cn=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Cn.apply(this,arguments)}function Nn(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Dn(){return Dn=te(J().mark((function e(t){var n,r,i,a,o,u,s=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=X(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,en((a=On(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Nn(Rn(a.auth_time)),issuedAtTime:Nn(Rn(a.iat)),expirationTime:Nn(Rn(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Dn.apply(this,arguments)}function Rn(e){return 1e3*Number(e)}function On(e){var t,n=s(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return Qt("JWT malformed, contained fewer than 3 sections"),null;try{var o=T(i);return o?JSON.parse(o):(Qt("Failed to decode base64 JWT payload"),null)}catch(u){return Qt("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function Pn(e,t){return Ln.apply(this,arguments)}function Ln(){return Ln=te(J().mark((function e(t,n){var r=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof F&&Mn(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ln.apply(this,arguments)}function Mn(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Fn=function(){function e(t){l(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return h(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(te(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Vn=function(){function e(t,n){l(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return h(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Nn(this.lastLoginAt),this.creationTime=Nn(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Un(e){return Bn.apply(this,arguments)}function Bn(){return Bn=te(J().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Pn(t,An(r,{idToken:i}));case 6:en(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?jn(o.providerUserInfo):[],s=zn(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Vn(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Bn.apply(this,arguments)}function qn(){return(qn=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=X(t),e.next=3,Un(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zn(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat($(n),$(t))}function jn(e){return e.map((function(e){var t=e.providerId,n=Nt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Wn(e,t){return Gn.apply(this,arguments)}function Gn(){return Gn=te(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mn(t,{},te(J().mark((function e(){var r,i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=W({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=wn(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",fn.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Gn.apply(this,arguments)}var Kn=function(){function e(){l(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return h(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){en(e.idToken,"internal-error"),en("undefined"!==typeof e.idToken,"internal-error"),en("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=On(e);return en(t,"internal-error"),en("undefined"!==typeof t.exp,"internal-error"),en("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=te(J().mark((function e(t){var n,r=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],en(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=te(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return tn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(en("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(en("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(en("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Hn(e,t){en("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Qn=function(){function e(t){l(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Nt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?$(a.providerData):[],this.metadata=new Vn(a.createdAt||void 0,a.lastLoginAt||void 0)}return h(e,[{key:"getIdToken",value:function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pn(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(en(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Dn.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return qn.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(en(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){en(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=te(J().mark((function e(t){var n,r,i=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Un(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Pn(this,_n(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,I=n.stsTokenManager;en(k&&I,t,"internal-error");var _=Kn.fromJSON(this.name,I);en("string"===typeof k,t,"internal-error"),Hn(f,t.name),Hn(h,t.name),en("boolean"===typeof b,t,"internal-error"),en("boolean"===typeof w,t,"internal-error"),Hn(d,t.name),Hn(p,t.name),Hn(v,t.name),Hn(y,t.name),Hn(m,t.name),Hn(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:_,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=te(J().mark((function t(n,r){var i,a,o,u=arguments;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Kn).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Un(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Yn=function(){function e(){l(this,e),this.type="NONE",this.storage={}}return h(e,[{key:"_isAvailable",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Yn.type="NONE";var Xn=Yn;function Jn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Zn=function(){function e(t,n,r){l(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Jn(this.userKey,a.apiKey,o),this.fullPersistenceKey=Jn("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return h(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Qn._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=te(J().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,p,v,y=arguments;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>2&&void 0!==y[2]?y[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(an(Xn),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||an(Xn),u=Jn(i,n.config.apiKey,n.name),s=null,c=d(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return p=Qn._fromJSON(n,h),f!==o&&(s=p),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(v=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&v.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=v[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function $n(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(rr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(er(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ar(t))return"Blackberry";if(or(t))return"Webos";if(tr(t))return"Safari";if((t.includes("chrome/")||nr(t))&&!t.includes("edge/"))return"Chrome";if(ir(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return/firefox\//i.test(e)}function tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return/crios\//i.test(e)}function rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return/iemobile/i.test(e)}function ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return/android/i.test(e)}function ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return/blackberry/i.test(e)}function or(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return/webos/i.test(e)}function ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function sr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return ur(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function cr(){return L()&&10===document.documentMode}function lr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return ur(e)||ir(e)||or(e)||ar(e)||/windows phone/i.test(e)||rr(e)}function fr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=$n(D());break;case"Worker":t="".concat($n(D()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Je,"/").concat(r)}var hr=function(){function e(t){l(this,e),this.auth=t,this.queue=[]}return h(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=te(J().mark((function e(t){var n,r,i,a,o,u,s,c;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=d(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=d(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(l){}}}catch(f){u.e(f)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),dr=function(){function e(t,n,r){l(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vr(this),this.idTokenSubscription=new vr(this),this.beforeStateQueue=new hr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return h(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=an(t)),this._initializationPromise=this.queue(te(J().mark((function r(){var i,a;return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Zn.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=te(J().mark((function e(t){var n,r,i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return en(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Un(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?X(t):null)&&en(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=te(J().mark((function e(t){var n,r=this,i=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&en(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(te(J().mark((function n(){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(an(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new V("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=te(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return en(n=t&&an(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Zn.create(this,[an(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=te(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=te(J().mark((function e(t){var n=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return en(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return en(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=te(J().mark((function e(){var t,n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function pr(e){return X(e)}var vr=function(){function e(t){var n=this;l(this,e),this.auth=t,this.observer=null,this.addObserver=H((function(e){return n.observer=e}))}return h(e,[{key:"next",get:function(){return en(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function yr(e,t,n){var r=pr(e);en(r._canInitEmulator,r,"emulator-config-failed"),en(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=mr(t),o=function(e){var t=mr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:gr(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:gr(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function mr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function gr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var kr=function(){function e(t,n){l(this,e),this.providerId=t,this.signInMethod=n}return h(e,[{key:"toJSON",value:function(){return tn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return tn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return tn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return tn("not implemented")}}]),e}();function br(e,t){return wr.apply(this,arguments)}function wr(){return wr=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn(t,"POST","/v1/accounts:resetPassword",pn(t,n)));case 1:case"end":return e.stop()}}),e)}))),wr.apply(this,arguments)}function xr(e,t){return Ir.apply(this,arguments)}function Ir(){return Ir=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ir.apply(this,arguments)}function _r(e,t){return Er.apply(this,arguments)}function Er(){return Er=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn(t,"POST","/v1/accounts:update",pn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Er.apply(this,arguments)}function Sr(e,t){return Tr.apply(this,arguments)}function Tr(){return Tr=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:signInWithPassword",pn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Tr.apply(this,arguments)}function Ar(e,t){return Cr.apply(this,arguments)}function Cr(){return Cr=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn(t,"POST","/v1/accounts:sendOobCode",pn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Cr.apply(this,arguments)}function Nr(e,t){return Dr.apply(this,arguments)}function Dr(){return Dr=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ar(t,n));case 1:case"end":return e.stop()}}),e)}))),Dr.apply(this,arguments)}function Rr(e,t){return Or.apply(this,arguments)}function Or(){return Or=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ar(t,n));case 1:case"end":return e.stop()}}),e)}))),Or.apply(this,arguments)}function Pr(e,t){return Lr.apply(this,arguments)}function Lr(){return Lr=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ar(t,n));case 1:case"end":return e.stop()}}),e)}))),Lr.apply(this,arguments)}function Mr(e,t){return Fr.apply(this,arguments)}function Fr(){return Fr=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ar(t,n));case 1:case"end":return e.stop()}}),e)}))),Fr.apply(this,arguments)}function Vr(e,t){return Ur.apply(this,arguments)}function Ur(){return Ur=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:signInWithEmailLink",pn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ur.apply(this,arguments)}function Br(e,t){return qr.apply(this,arguments)}function qr(){return qr=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:signInWithEmailLink",pn(t,n)));case 1:case"end":return e.stop()}}),e)}))),qr.apply(this,arguments)}var zr=function(e){y(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return l(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return h(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Sr(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Vr(t,{email:this._email,oobCode:this._password}));case 5:Yt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",xr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Br(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Yt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(kr);function jr(e,t){return Wr.apply(this,arguments)}function Wr(){return Wr=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:signInWithIdp",pn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wr.apply(this,arguments)}var Gr=function(e){y(n,e);var t=w(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return h(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return jr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,jr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,jr(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=W(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yt("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Nt(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(kr);function Kr(e,t){return Hr.apply(this,arguments)}function Hr(){return Hr=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn(t,"POST","/v1/accounts:sendVerificationCode",pn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Hr.apply(this,arguments)}function Qr(){return Qr=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:signInWithPhoneNumber",pn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qr.apply(this,arguments)}function Yr(){return Yr=te(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn(t,"POST","/v1/accounts:signInWithPhoneNumber",pn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw In(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Yr.apply(this,arguments)}var Xr=c({},"USER_NOT_FOUND","user-not-found");function Jr(){return Jr=te(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",kn(t,"POST","/v1/accounts:signInWithPhoneNumber",pn(t,r),Xr));case 2:case"end":return e.stop()}}),e)}))),Jr.apply(this,arguments)}var Zr=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,"phone","phone")).params=e,r}return h(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Qr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Yr.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Jr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(kr);var $r=function(){function e(t){var n,r,i,a,o,u;l(this,e);var s=G(K(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,f=null!==(r=s.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);en(c&&f&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=f,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return h(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=G(K(e)).link,n=t?G(K(t)).deep_link_id:null,r=G(K(e)).deep_link_id;return(r?G(K(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(cI){return null}}}]),e}();var ei=function(){function e(){l(this,e),this.providerId=e.PROVIDER_ID}return h(e,null,[{key:"credential",value:function(e,t){return zr._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=$r.parseLink(t);return en(n,"argument-error"),zr._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ei.PROVIDER_ID="password",ei.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ei.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ti=function(){function e(t){l(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return h(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ni=function(e){y(n,e);var t=w(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).scopes=[],e}return h(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return $(this.scopes)}}]),n}(ti),ri=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return en(e.idToken||e.accessToken,"argument-error"),Gr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return en("providerId"in t&&"signInMethod"in t,"argument-error"),Gr._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(ni),ii=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.call(this,"facebook.com")}return h(n,null,[{key:"credential",value:function(e){return Gr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(cI){return null}}}]),n}(ni);ii.FACEBOOK_SIGN_IN_METHOD="facebook.com",ii.PROVIDER_ID="facebook.com";var ai=function(e){y(n,e);var t=w(n);function n(){var e;return l(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return h(n,null,[{key:"credential",value:function(e,t){return Gr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(cI){return null}}}]),n}(ni);ai.GOOGLE_SIGN_IN_METHOD="google.com",ai.PROVIDER_ID="google.com";var oi=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.call(this,"github.com")}return h(n,null,[{key:"credential",value:function(e){return Gr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(cI){return null}}}]),n}(ni);oi.GITHUB_SIGN_IN_METHOD="github.com",oi.PROVIDER_ID="github.com";var ui=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return h(n,[{key:"_getIdTokenResponse",value:function(e){return jr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,jr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,jr(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(kr),si=function(e){y(n,e);var t=w(n);function n(e){return l(this,n),en(e.startsWith("saml."),"argument-error"),t.call(this,e)}return h(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=ui.fromJSON(e);return en(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return ui._create(r,n)}catch(i){return null}}}]),n}(ti),ci=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.call(this,"twitter.com")}return h(n,null,[{key:"credential",value:function(e,t){return Gr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(cI){return null}}}]),n}(ni);function li(e,t){return fi.apply(this,arguments)}function fi(){return fi=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:signUp",pn(t,n)));case 1:case"end":return e.stop()}}),e)}))),fi.apply(this,arguments)}ci.TWITTER_SIGN_IN_METHOD="twitter.com",ci.PROVIDER_ID="twitter.com";var hi=function(){function e(t){l(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return h(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=te(J().mark((function t(n,r,i){var a,o,u,s,c=arguments;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Qn._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=di(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=te(J().mark((function t(n,r,i){var a;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=di(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function di(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function pi(){return pi=te(J().mark((function e(t){var n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pr(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new hi({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,li(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,hi._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),pi.apply(this,arguments)}var vi=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o,u;return l(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(p(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return h(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(F);function yi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw vi._fromErrorAndOperation(e,n,t,r);throw n}))}function mi(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function gi(e,t){return ki.apply(this,arguments)}function ki(){return ki=te(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X(t),e.next=3,xi(!0,r,n);case 3:return e.t0=Sn,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=mi(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),ki.apply(this,arguments)}function bi(e,t){return wi.apply(this,arguments)}function wi(){return wi=te(J().mark((function e(t,n){var r,i,a=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Pn,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",hi._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),wi.apply(this,arguments)}function xi(e,t,n){return Ii.apply(this,arguments)}function Ii(){return(Ii=te(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un(n);case 2:i=mi(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",en(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _i(e,t){return Ei.apply(this,arguments)}function Ei(){return Ei=te(J().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,Pn(t,yi(a,o,n,t),r);case 6:return en((u=e.sent).idToken,a,"internal-error"),en(s=On(u.idToken),a,"internal-error"),c=s.sub,en(t.uid===c,a,"user-mismatch"),e.abrupt("return",hi._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&Yt(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ei.apply(this,arguments)}function Si(e,t){return Ti.apply(this,arguments)}function Ti(){return Ti=te(J().mark((function e(t,n){var r,i,a,o,u=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,yi(t,i,n);case 4:return a=e.sent,e.next=7,hi._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ti.apply(this,arguments)}function Ai(e,t){return Ci.apply(this,arguments)}function Ci(){return Ci=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Si(pr(t),n));case 1:case"end":return e.stop()}}),e)}))),Ci.apply(this,arguments)}function Ni(e,t){return Di.apply(this,arguments)}function Di(){return(Di=te(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X(t),e.next=3,xi(!1,r,n.providerId);case 3:return e.abrupt("return",bi(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ri(e,t){return Oi.apply(this,arguments)}function Oi(){return(Oi=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_i(X(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pi(e,t){return Li.apply(this,arguments)}function Li(){return Li=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:signInWithCustomToken",pn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Li.apply(this,arguments)}function Mi(){return Mi=te(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pr(t),e.next=3,Pi(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,hi._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Mi.apply(this,arguments)}var Fi=function(){function e(t,n){l(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return h(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Vi._fromServerResponse(e,t):Yt(e,"internal-error")}}]),e}(),Vi=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return h(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Fi);function Ui(e,t,n){var r;en((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),en("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(en(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(en(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Bi(){return Bi=te(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=X(t),a={requestType:"PASSWORD_RESET",email:n},r&&Ui(i,a,r),e.next=5,Rr(i,a);case 5:case"end":return e.stop()}}),e)}))),Bi.apply(this,arguments)}function qi(){return qi=te(J().mark((function e(t,n,r){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,br(X(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),qi.apply(this,arguments)}function zi(){return zi=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_r(X(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),zi.apply(this,arguments)}function ji(e,t){return Wi.apply(this,arguments)}function Wi(){return Wi=te(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X(t),e.next=3,br(r,{oobCode:n});case 3:i=e.sent,en(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return en(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:en(i.mfaInfo,r,"internal-error");case 13:en(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Fi._fromServerResponse(pr(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Wi.apply(this,arguments)}function Gi(){return Gi=te(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ji(X(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Gi.apply(this,arguments)}function Ki(e,t,n){return Hi.apply(this,arguments)}function Hi(){return Hi=te(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pr(t),e.next=3,li(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,hi._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Hi.apply(this,arguments)}function Qi(){return Qi=te(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=X(t),a={requestType:"EMAIL_SIGNIN",email:n},en(r.handleCodeInApp,i,"argument-error"),r&&Ui(i,a,r),e.next=6,Pr(i,a);case 6:case"end":return e.stop()}}),e)}))),Qi.apply(this,arguments)}function Yi(){return Yi=te(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=X(t),en((a=ei.credentialWithLink(n,r||on()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ai(i,a));case 4:case"end":return e.stop()}}),e)}))),Yi.apply(this,arguments)}function Xi(e,t){return Ji.apply(this,arguments)}function Ji(){return Ji=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn(t,"POST","/v1/accounts:createAuthUri",pn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ji.apply(this,arguments)}function Zi(){return Zi=te(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=un()?on():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Xi(X(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Zi.apply(this,arguments)}function $i(){return($i=te(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Ui(r.auth,a,n),e.next=8,Nr(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ea(){return(ea=te(J().mark((function e(t,n,r){var i,a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=X(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Ui(i.auth,o,r),e.next=8,Mr(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ta(e,t){return na.apply(this,arguments)}function na(){return na=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),na.apply(this,arguments)}function ra(){return(ra=te(J().mark((function e(t,n){var r,i,a,o,u,s,c;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=X(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Pn(a,ta(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ia(e,t,n){return aa.apply(this,arguments)}function aa(){return aa=te(J().mark((function e(t,n,r){var i,a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Pn(t,xr(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),aa.apply(this,arguments)}var oa=h((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};l(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ua=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this,e,r,i)).username=a,o}return h(n)}(oa),sa=function(e){y(n,e);var t=w(n);function n(e,r){return l(this,n),t.call(this,e,"facebook.com",r)}return h(n)}(oa),ca=function(e){y(n,e);var t=w(n);function n(e,r){return l(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return h(n)}(ua),la=function(e){y(n,e);var t=w(n);function n(e,r){return l(this,n),t.call(this,e,"google.com",r)}return h(n)}(oa),fa=function(e){y(n,e);var t=w(n);function n(e,r,i){return l(this,n),t.call(this,e,"twitter.com",r,i)}return h(n)}(ua);function ha(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=On(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new oa(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new sa(a,i);case"github.com":return new ca(a,i);case"google.com":return new la(a,i);case"twitter.com":return new fa(a,i,e.screenName||null);case"custom":case"anonymous":return new oa(a,null);default:return new oa(a,r,i)}}(n)}var da=function(){function e(t,n,r){l(this,e),this.type=t,this.credential=n,this.auth=r}return h(e,[{key:"toJSON",value:function(){return{multiFactorSession:c({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),pa=function(){function e(t,n,r){l(this,e),this.session=t,this.hints=n,this.signInResolver=r}return h(e,[{key:"resolveSignIn",value:function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=pr(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Fi._fromServerResponse(r,e)}));en(i.mfaPendingCredential,r,"internal-error");var o=da._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=te(J().mark((function e(t){var a,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,hi._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return en(n.user,r,"internal-error"),e.abrupt("return",hi._forOperation(n.user,n.operationType,u));case 17:Yt(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function va(e,t){return vn(e,"POST","/v2/accounts/mfaEnrollment:start",pn(e,t))}function ya(e,t){return vn(e,"POST","/v2/accounts/mfaEnrollment:withdraw",pn(e,t))}var ma=function(){function e(t){var n=this;l(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Fi._fromServerResponse(t.auth,e)})))}))}return h(e,[{key:"getSession",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=da,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=te(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Pn(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=te(J().mark((function e(t){var n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,Pn(this.user,ya(this.user.auth,{idToken:i,mfaEnrollmentId:r}));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ga=new WeakMap;var ka="__sak",ba=function(){function e(t,n){l(this,e),this.storageRetriever=t,this.type=n}return h(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ka,"1"),this.storage.removeItem(ka),Promise.resolve(!0)):Promise.resolve(!1)}catch(cI){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var wa=function(e){y(n,e);var t=w(n);function n(){var e;return l(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=D();return tr(e)||ur(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=lr(),e._shouldAllowMigration=!0,e}return h(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);cr()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=te(J().mark((function e(t,r){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct(m(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=te(J().mark((function e(t){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct(m(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct(m(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ba);wa.type="LOCAL";var xa=wa,Ia=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return h(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ba);Ia.type="SESSION";var _a=Ia;function Ea(e){return Promise.all(e.map(function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Sa=function(){function e(t){l(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return h(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=te(J().mark((function e(t){var n,r,i,a,o,u,s,c;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ea(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ta(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Sa.receivers=[];var Aa=function(){function e(t){l(this,e),this.target=t,this.handlers=new Set}return h(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=te(J().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Ta("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ca(){return window}function Na(){return"undefined"!==typeof Ca().WorkerGlobalScope&&"function"===typeof Ca().importScripts}function Da(){return Ra.apply(this,arguments)}function Ra(){return(Ra=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Oa(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Pa="firebaseLocalStorageDb",La="firebaseLocalStorage",Ma="fbase_key",Fa=function(){function e(t){l(this,e),this.request=t}return h(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Va(e,t){return e.transaction([La],t?"readwrite":"readonly").objectStore(La)}function Ua(){var e=indexedDB.deleteDatabase(Pa);return new Fa(e).toPromise()}function Ba(){var e=indexedDB.open(Pa,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(La,{keyPath:Ma})}catch(r){n(r)}})),e.addEventListener("success",te(J().mark((function n(){var r;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(La)){n.next=12;break}return r.close(),n.next=5,Ua();case 5:return n.t0=t,n.next=8,Ba();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function qa(e,t,n){return za.apply(this,arguments)}function za(){return za=te(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Va(t,!0).put((c(i={},Ma,n),c(i,"value",r),i)),e.abrupt("return",new Fa(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),za.apply(this,arguments)}function ja(e,t){return Wa.apply(this,arguments)}function Wa(){return Wa=te(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Va(t,!1).get(n),e.next=3,new Fa(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}function Ga(e,t){var n=Va(e,!0).delete(t);return new Fa(n).toPromise()}var Ka=function(){function e(){l(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return h(e,[{key:"_openDb",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ba();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=te(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Na()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=te(J().mark((function e(){var t=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Sa._getInstance(Na()?self:null),this.receiver._subscribe("keyChanged",function(){var e=te(J().mark((function e(n,r){var i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=te(J().mark((function e(){var t,n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Da();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Aa(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Oa()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ba();case 5:return t=e.sent,e.next=8,qa(t,ka,"1");case 8:return e.next=10,Ga(t,ka);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=te(J().mark((function e(t,n){var r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return qa(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return ja(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=te(J().mark((function e(t){var n=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ga(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=te(J().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Va(e,!1).getAll();return new Fa(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=d(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(te(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ka.type="LOCAL";var Ha=Ka;function Qa(e,t){return vn(e,"POST","/v2/accounts/mfaSignIn:start",pn(e,t))}function Ya(e){return Xa.apply(this,arguments)}function Xa(){return Xa=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Xa.apply(this,arguments)}function Ja(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Xt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Za(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var $a=1e12,eo=function(){function e(t){l(this,e),this.auth=t,this.counter=$a,this._widgets=new Map}return h(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new to(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||$a;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||$a;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=te(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||$a,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),to=function(){function e(t,n,r){var i=this;l(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;en(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return h(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var no=Za("rcb"),ro=new cn(3e4,6e4),io="https://www.google.com/recaptcha/api.js?",ao=function(){function e(){var t;l(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Ca().grecaptcha)||void 0===t?void 0:t.render)}return h(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return en(oo(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ca().grecaptcha):new Promise((function(r,i){var a=Ca().setTimeout((function(){i(Xt(e,"network-request-failed"))}),ro.get());Ca()[no]=function(){Ca().clearTimeout(a),delete Ca()[no];var o=Ca().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Xt(e,"internal-error"))},Ja("".concat(io,"?").concat(W({onload:no,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Xt(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Ca().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function oo(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var uo=function(){function e(){l(this,e)}return h(e,[{key:"load",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new eo(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),so="recaptcha",co={theme:"light",type:"image"},lo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},co),r=arguments.length>2?arguments[2]:void 0;l(this,e),this.parameters=n,this.type=so,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pr(r),this.isInvisible="invisible"===this.parameters.size,en("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;en(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new uo:new ao,this.validateStartingState()}return h(e,[{key:"verify",value:function(){var e=te(J().mark((function e(){var t,n,r,i=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){en(!this.parameters.sitekey,this.auth,"argument-error"),en(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),en("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Ca()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){en(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=te(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return en(un()&&!Na(),this.auth,"internal-error"),e.next=3,fo();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ya(this.auth);case 8:en(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return en(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function fo(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var ho=function(){function e(t,n){l(this,e),this.verificationId=t,this.onConfirmation=n}return h(e,[{key:"confirm",value:function(e){var t=Zr._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function po(){return po=te(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pr(t),e.next=3,go(i,n,X(r));case 3:return a=e.sent,e.abrupt("return",new ho(a,(function(e){return Ai(i,e)})));case 5:case"end":return e.stop()}}),e)}))),po.apply(this,arguments)}function vo(e,t,n){return yo.apply(this,arguments)}function yo(){return(yo=te(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=X(t),e.next=3,xi(!1,i,"phone");case 3:return e.next=5,go(i.auth,n,X(r));case 5:return a=e.sent,e.abrupt("return",new ho(a,(function(e){return Ni(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mo(){return(mo=te(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=X(t),e.next=3,go(i.auth,n,X(r));case 3:return a=e.sent,e.abrupt("return",new ho(a,(function(e){return Ri(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function go(e,t,n){return ko.apply(this,arguments)}function ko(){return ko=te(J().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,en("string"===typeof a,t,"argument-error"),en(r.type===so,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return en("enroll"===u.type,t,"internal-error"),e.next=13,va(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return en("signin"===u.type,t,"internal-error"),en(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Qa(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Kr(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),ko.apply(this,arguments)}function bo(){return(bo=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi(X(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wo=function(){function e(t){l(this,e),this.providerId=e.PROVIDER_ID,this.auth=pr(t)}return h(e,[{key:"verifyPhoneNumber",value:function(e,t){return go(this.auth,e,X(t))}}],[{key:"credential",value:function(e,t){return Zr._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Zr._fromTokenResponse(n,r):null}}]),e}();function xo(e,t){return t?an(t):(en(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}wo.PROVIDER_ID="phone",wo.PHONE_SIGN_IN_METHOD="phone";var Io=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,"custom","custom")).params=e,r}return h(n,[{key:"_getIdTokenResponse",value:function(e){return jr(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return jr(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return jr(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(kr);function _o(e){return Si(e.auth,new Io(e),e.bypassAuthState)}function Eo(e){var t=e.auth,n=e.user;return en(n,t,"internal-error"),_i(n,new Io(e),e.bypassAuthState)}function So(e){return To.apply(this,arguments)}function To(){return To=te(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,en(r=t.user,n,"internal-error"),e.abrupt("return",bi(r,new Io(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),To.apply(this,arguments)}var Ao=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];l(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return h(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=te(J().mark((function t(n,r){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=te(J().mark((function e(t){var n,r,i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _o;case"linkViaPopup":case"linkViaRedirect":return So;case"reauthViaPopup":case"reauthViaRedirect":return Eo;default:Yt(this.auth,"internal-error")}}},{key:"resolve",value:function(e){nn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){nn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Co=new cn(2e3,1e4);function No(e,t,n){return Do.apply(this,arguments)}function Do(){return Do=te(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pr(t),Zt(t,n,ti),a=xo(i,r),o=new Lo(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Do.apply(this,arguments)}function Ro(){return(Ro=te(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt((i=X(t)).auth,n,ti),a=xo(i.auth,r),o=new Lo(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oo(e,t,n){return Po.apply(this,arguments)}function Po(){return(Po=te(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt((i=X(t)).auth,n,ti),a=xo(i.auth,r),o=new Lo(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lo=function(e){y(n,e);var t=w(n);function n(e,r,i,a,o){var u;return l(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=p(u),u}return h(n,[{key:"executeNotNull",value:function(){var e=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return en(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=te(J().mark((function e(){var t,n=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nn(1===this.filter.length,"Popup operations only handle one event"),t=Ta(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Xt(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Xt(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Xt(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Co.get())}()}}]),n}(Ao);Lo.currentPopupAction=null;var Mo=new Map,Fo=function(e){y(n,e);var t=w(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return h(n,[{key:"execute",value:function(){var e=te(J().mark((function e(){var t,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Mo.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Vo(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ct(m(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Mo.set(this.auth._key(),t);case 21:return this.bypassAuthState||Mo.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=te(J().mark((function e(t){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ct(m(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ct(m(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ao);function Vo(e,t){return Uo.apply(this,arguments)}function Uo(){return Uo=te(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wo(n),i=jo(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Uo.apply(this,arguments)}function Bo(e,t){return qo.apply(this,arguments)}function qo(){return qo=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jo(t)._set(Wo(n),"true"));case 1:case"end":return e.stop()}}),e)}))),qo.apply(this,arguments)}function zo(e,t){Mo.set(e._key(),t)}function jo(e){return an(e._redirectPersistence)}function Wo(e){return Jn("pendingRedirect",e.config.apiKey,e.name)}function Go(e,t,n){return function(e,t,n){return Ko.apply(this,arguments)}(e,t,n)}function Ko(){return Ko=te(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pr(t),Zt(t,n,ti),a=xo(i,r),e.next=5,Bo(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Ko.apply(this,arguments)}function Ho(e,t,n){return function(e,t,n){return Qo.apply(this,arguments)}(e,t,n)}function Qo(){return(Qo=te(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt((i=X(t)).auth,n,ti),a=xo(i.auth,r),e.next=5,Bo(a,i.auth);case 5:return e.next=7,tu(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yo(e,t,n){return function(e,t,n){return Xo.apply(this,arguments)}(e,t,n)}function Xo(){return(Xo=te(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt((i=X(t)).auth,n,ti),a=xo(i.auth,r),e.next=5,xi(!1,i,n.providerId);case 5:return e.next=7,Bo(a,i.auth);case 7:return e.next=9,tu(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jo(e,t){return Zo.apply(this,arguments)}function Zo(){return Zo=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(t)._initializationPromise;case 2:return e.abrupt("return",$o(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Zo.apply(this,arguments)}function $o(e,t){return eu.apply(this,arguments)}function eu(){return eu=te(J().mark((function e(t,n){var r,i,a,o,u,s=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=pr(t),a=xo(i,n),o=new Fo(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),eu.apply(this,arguments)}function tu(e){return nu.apply(this,arguments)}function nu(){return(nu=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ta("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ru=function(){function e(t){l(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return h(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return au(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!au(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Xt(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(iu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(iu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function iu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function au(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function ou(e){return uu.apply(this,arguments)}function uu(){return uu=te(J().mark((function e(t){var n,r=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",vn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),uu.apply(this,arguments)}var su=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cu=/^https?/;function lu(){return lu=te(J().mark((function e(t){var n,r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ou(t);case 4:n=e.sent,r=n.authorizedDomains,i=d(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!fu(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Yt(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),lu.apply(this,arguments)}function fu(e){var t=on(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!cu.test(r))return!1;if(su.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var hu=new cn(3e4,6e4);function du(){var e=Ca().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=$(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var pu=null;function vu(e){return pu=pu||function(e){return new Promise((function(t,n){var r,i,a;function o(){du(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){du(),n(Xt(e,"network-request-failed"))},timeout:hu.get()})}if(null===(i=null===(r=Ca().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ca().gapi)||void 0===a?void 0:a.load)){var u=Za("iframefcb");return Ca()[u]=function(){gapi.load?o():n(Xt(e,"network-request-failed"))},Ja("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw pu=null,e}))}(e),pu}var yu=new cn(5e3,15e3),mu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ku(e){var t=e.config;en(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ln(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Je},i=gu.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(W(r).slice(1))}function bu(e){return wu.apply(this,arguments)}function wu(){return wu=te(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vu(t);case 2:return n=e.sent,en(r=Ca().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ku(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mu,dontclear:!0},(function(e){return new Promise(function(){var n=te(J().mark((function n(r,i){var a,o,u;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Ca().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Xt(t,"network-request-failed"),o=Ca().setTimeout((function(){i(a)}),yu.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),wu.apply(this,arguments)}var xu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Iu="_blank",_u="http://localhost",Eu=function(){function e(t){l(this,e),this.window=t,this.associatedEvent=null}return h(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Su(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},xu),{width:r.toString(),height:i.toString(),top:a,left:o}),l=D().toLowerCase();n&&(u=nr(l)?Iu:n),er(l)&&(t=t||_u,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(sr(l)&&"_self"!==u)return Tu(t||"",u),new Eu(null);var h=window.open(t||"",u,f);en(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Eu(h)}function Tu(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Au="__/auth/handler",Cu="emulator/auth/handler";function Nu(e,t,n,r,i,a){en(e.config.authDomain,e,"auth-domain-config-required"),en(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Je,eventId:i};if(t instanceof ti){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof ni){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Au);return ln(t,Cu)}(e),"?").concat(W(p).slice(1))}var Du="webStorageSupport",Ru=function(){function e(){l(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_a,this._completeRedirectFn=$o,this._overrideRedirectResult=zo}return h(e,[{key:"_openPopup",value:function(){var e=te(J().mark((function e(t,n,r,i){var a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Nu(t,n,r,on(),i),e.abrupt("return",Su(t,o,Ta()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=te(J().mark((function e(t,n,r,i){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Nu(t,n,r,on(),i),Ca().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(nn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=te(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bu(t);case 2:return n=e.sent,r=new ru(t),n.register("authEvent",(function(e){return en(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Du,{type:Du},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Yt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return lu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return lr()||tr()||ur()}}]),e}(),Ou=Ru,Pu=function(){function e(t){l(this,e),this.factorId=t}return h(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return tn("unexpected MultiFactorSessionType")}}}]),e}(),Lu=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,"phone")).credential=e,r}return h(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return vn(e,"POST","/v2/accounts/mfaEnrollment:finalize",pn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return vn(e,"POST","/v2/accounts/mfaSignIn:finalize",pn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Pu),Mu=function(){function e(){l(this,e)}return h(e,null,[{key:"assertion",value:function(e){return Lu._fromCredential(e)}}]),e}();Mu.FACTOR_ID="phone";var Fu,Vu="@firebase/auth",Uu="0.20.7",Bu=function(){function e(t){l(this,e),this.auth=t,this.internalListeners=new Map}return h(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){en(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function qu(){return window}Fu="Browser",We(new ne("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){en(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),en(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Fu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fr(Fu)},i=new dr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(an);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),We(new ne("auth-internal",(function(e){return function(e){return new Bu(e)}(pr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),rt(Vu,Uu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Fu)),rt(Vu,Uu,"esm2017");function zu(e,t,n){return ju.apply(this,arguments)}function ju(){return ju=te(J().mark((function e(t,n,r){var i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=qu(),o=a.BuildInfo,nn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Yu(n.sessionId);case 4:return u=e.sent,s={},ur()?s.ibi=o.packageName:ir()?s.apn=o.packageName:Yt(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Nu(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),ju.apply(this,arguments)}function Wu(){return Wu=te(J().mark((function e(t){var n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qu(),r=n.BuildInfo,i={},ur()?i.iosBundleId=r.packageName:ir()?i.androidPackageName=r.packageName:Yt(t,"operation-not-supported-in-this-environment"),e.next=5,ou(t,i);case 5:case"end":return e.stop()}}),e)}))),Wu.apply(this,arguments)}function Gu(e){var t=qu().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Ku(e,t,n){return Hu.apply(this,arguments)}function Hu(){return Hu=te(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qu(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Xt(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),ir()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Hu.apply(this,arguments)}function Qu(e){var t,n,r,i,a,o,u,s,c,l,f=qu();en("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),en("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),en("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),en("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),en("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Yu(e){return Xu.apply(this,arguments)}function Xu(){return(Xu=te(J().mark((function e(t){var n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ju(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ju(e){if(nn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Zu=function(e){y(n,e);var t=w(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return h(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Ct(m(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ru);function $u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:is(),postBody:null,tenantId:e.tenantId,error:Xt(e,"no-auth-event")}}function es(e,t){return as()._set(os(e),t)}function ts(e){return ns.apply(this,arguments)}function ns(){return ns=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,as()._get(os(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,as()._remove(os(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),ns.apply(this,arguments)}function rs(e,t){var n,r,i=function(e){var t=us(e),n=t.link?decodeURIComponent(t.link):void 0,r=us(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return us(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=us(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Xt(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function is(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function as(){return an(xa)}function os(e){return Jn("authEvent",e.config.apiKey,e.name)}function us(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||Z(t)||o(t)||u();r[0];return G(r.slice(1).join("?"))}var ss=function(){function e(){l(this,e),this._redirectPersistence=_a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=$o,this._overrideRedirectResult=zo}return h(e,[{key:"_initialize",value:function(){var e=te(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Zu(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Yt(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=te(J().mark((function e(t,n,r,i){var a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qu(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Mo.clear(),e.next=10,this._originValidation(t);case 10:return o=$u(t,r,i),e.next=13,es(t,o);case 13:return e.next=15,zu(t,o,n);case 15:return u=e.sent,e.next=18,Gu(u);case 18:return s=e.sent,e.abrupt("return",Ku(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Wu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=qu(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(te(J().mark((function n(){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ts(e);case 2:t.onEvent(ls());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=te(J().mark((function n(r){var i,a;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,ts(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=rs(i,r.url)),t.onEvent(a||ls());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");qu().handleOpenURL=function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),cs=ss;function ls(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Xt("no-auth-event")}}function fs(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function hs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return!("file:"!==fs()&&"ionic:"!==fs()&&"capacitor:"!==fs()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ds(){return L()&&11===(null===document||void 0===document?void 0:document.documentMode)}function ps(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return/Edge\/\d+/.test(e)}function vs(){try{var e=self.localStorage,t=Ta();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return ds()||ps(e)}()||M()}catch(n){return ys()&&M()}return!1}function ys(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function ms(){return("http:"===fs()||"https:"===fs()||O()||hs())&&!(P()||R())&&vs()&&!ys()}function gs(){return hs()&&"undefined"!==typeof document}function ks(){return bs.apply(this,arguments)}function bs(){return(bs=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gs()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ws={LOCAL:"local",NONE:"none",SESSION:"session"},xs=en,Is="persistence";function _s(e,t){xs(Object.values(ws).includes(t),e,"invalid-persistence-type"),P()?xs(t!==ws.SESSION,e,"unsupported-persistence-type"):R()?xs(t===ws.NONE,e,"unsupported-persistence-type"):ys()?xs(t===ws.NONE||t===ws.LOCAL&&M(),e,"unsupported-persistence-type"):xs(t===ws.NONE||vs(),e,"unsupported-persistence-type")}function Es(e){return Ss.apply(this,arguments)}function Ss(){return Ss=te(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Ts(),r=Jn(Is,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Ss.apply(this,arguments)}function Ts(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var As=en,Cs=function(){function e(){l(this,e),this.browserResolver=an(Ou),this.cordovaResolver=an(cs),this.underlyingResolver=null,this._redirectPersistence=_a,this._completeRedirectFn=$o,this._overrideRedirectResult=zo}return h(e,[{key:"_initialize",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=te(J().mark((function e(t,n,r,i){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=te(J().mark((function e(t,n,r,i){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return gs()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return As(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ks();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ns(e){return e.unwrap()}function Ds(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new Ms(e,function(e,t){var n,r=X(e),i=t;return en(t.customData.operationType,r,"argument-error"),en(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),pa._fromError(r,i)}(e,t));else if(i){var a=Rs(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function Rs(e){var t=(e instanceof F?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof F)&&"temporaryProof"in t&&"phoneNumber"in t)return wo.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Lt)return null;switch(r){case Pt:n=ai;break;case Rt:n=ii;break;case Ot:n=oi;break;case Mt:n=ci;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?ui._create(r,u):Gr._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new ri(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof F?n.credentialFromError(e):n.credentialFromResult(e)}function Os(e,t){return t.catch((function(t){throw t instanceof F&&Ds(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Rs(t)),additionalUserInfo:ha(e),user:Fs.getOrCreate(r)}}))}function Ps(e,t){return Ls.apply(this,arguments)}function Ls(){return Ls=te(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Os(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Ls.apply(this,arguments)}var Ms=function(){function e(t,n){l(this,e),this.resolver=n,this.auth=t.wrapped()}return h(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Os(Ns(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Fs=function(){function e(t){l(this,e),this._delegate=t,this.multiFactor=function(e){var t=X(e);return ga.has(t)||ga.set(t,ma._fromUser(t)),ga.get(t)}(t)}return h(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Os(this.auth,Ni(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ps(this.auth,vo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Os(this.auth,Oo(this._delegate,t,Cs)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Es(pr(this.auth));case 2:return e.abrupt("return",Yo(this._delegate,t,Cs));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Os(this.auth,Ri(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Ps(this.auth,function(e,t,n){return mo.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Os(this.auth,function(e,t,n){return Ro.apply(this,arguments)}(this._delegate,e,Cs))}},{key:"reauthenticateWithRedirect",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Es(pr(this.auth));case 2:return e.abrupt("return",Ho(this._delegate,t,Cs));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return $i.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gi(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return ia(X(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return ia(X(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return bo.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return ra.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return ea.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Fs.USER_MAP=new WeakMap;var Vs=en,Us=function(){function e(t,n){if(l(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Vs(r,"invalid-api-key",{appName:t.name}),Vs(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Cs:void 0;this._delegate=n.initialize({options:{persistence:qs(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Wt),this.linkUnderlyingAuth()}return h(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Fs.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){yr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return zi.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return ji(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return qi.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Os(this._delegate,Ki(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Zi.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=$r.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vs(ms(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Jo(this._delegate,Cs);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Os(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){pr(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Bs(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Bs(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Qi.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Bi.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=te(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_s(this._delegate,t),e.t0=t,e.next=e.t0===ws.SESSION?4:e.t0===ws.LOCAL?6:e.t0===ws.NONE?11:13;break;case 4:return n=_a,e.abrupt("break",14);case 6:return e.next=8,an(Ha)._isAvailable();case 8:return r=e.sent,n=r?Ha:xa,e.abrupt("break",14);case 11:return n=Xn,e.abrupt("break",14);case 13:return e.abrupt("return",Yt("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Os(this._delegate,function(e){return pi.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Os(this._delegate,Ai(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Os(this._delegate,function(e,t){return Mi.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Os(this._delegate,function(e,t,n){return Ai(X(e),ei.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Os(this._delegate,function(e,t,n){return Yi.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Ps(this._delegate,function(e,t,n){return po.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vs(ms(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Os(this._delegate,No(this._delegate,t,Cs)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vs(ms(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Es(this._delegate);case 3:return e.abrupt("return",Go(this._delegate,t,Cs));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Gi.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Bs(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Fs.getOrCreate(e))},error:t,complete:n}}function qs(e,t){var n=function(e,t){var n=Ts();if(!n)return[];var r=Jn(Is,e,t);switch(n.getItem(r)){case ws.NONE:return[Xn];case ws.LOCAL:return[Ha,_a];case ws.SESSION:return[_a];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Ha)||n.push(Ha),"undefined"!==typeof window)for(var r=0,i=[xa,_a];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Xn)||n.push(Xn),n}Us.Persistence=ws;var zs=function(){function e(){l(this,e),this.providerId="phone",this._delegate=new wo(Ns(Tt.auth()))}return h(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return wo.credential(e,t)}}]),e}();zs.PHONE_SIGN_IN_METHOD=wo.PHONE_SIGN_IN_METHOD,zs.PROVIDER_ID=wo.PROVIDER_ID;var js,Ws=en,Gs=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tt.app();l(this,e),Ws(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new lo(t,n,i.auth()),this.type=this._delegate.type}return h(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(js=Tt).INTERNAL.registerComponent(new ne("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Us(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ft,PASSWORD_RESET:Vt,RECOVER_EMAIL:Ut,REVERT_SECOND_FACTOR_ADDITION:Bt,VERIFY_AND_CHANGE_EMAIL:qt,VERIFY_EMAIL:zt}},EmailAuthProvider:ei,FacebookAuthProvider:ii,GithubAuthProvider:oi,GoogleAuthProvider:ai,OAuthProvider:ri,SAMLAuthProvider:si,PhoneAuthProvider:zs,PhoneMultiFactorGenerator:Mu,RecaptchaVerifier:Gs,TwitterAuthProvider:ci,Auth:Us,AuthCredential:kr,Error:F}).setInstantiationMode("LAZY").setMultipleInstances(!1)),js.registerVersion("@firebase/auth-compat","0.2.20");var Ks,Hs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Qs={},Ys=Ys||{},Xs=Hs||self;function Js(){}function Zs(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function $s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ec="closure_uid_"+(1e9*Math.random()>>>0),tc=0;function nc(e,t,n){return e.call.apply(e.bind,arguments)}function rc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ic(e,t,n){return(ic=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?nc:rc).apply(null,arguments)}function ac(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function oc(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function uc(){this.s=this.s,this.o=this.o}var sc={};uc.prototype.s=!1,uc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,ec)&&e[ec]||(e[ec]=++tc)}(this);delete sc[e]}},uc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var cc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function lc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function fc(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Zs(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function hc(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}hc.prototype.h=function(){this.defaultPrevented=!0};var dc=function(){if(!Xs.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Xs.addEventListener("test",Js,t),Xs.removeEventListener("test",Js,t)}catch(n){}return e}();function pc(e){return/^[\s\xa0]*$/.test(e)}var vc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function yc(e,t){return e<t?-1:e>t?1:0}function mc(){var e=Xs.navigator;return e&&(e=e.userAgent)?e:""}function gc(e){return-1!=mc().indexOf(e)}function kc(e){return kc[" "](e),e}kc[" "]=Js;var bc,wc=gc("Opera"),xc=gc("Trident")||gc("MSIE"),Ic=gc("Edge"),_c=Ic||xc,Ec=gc("Gecko")&&!(-1!=mc().toLowerCase().indexOf("webkit")&&!gc("Edge"))&&!(gc("Trident")||gc("MSIE"))&&!gc("Edge"),Sc=-1!=mc().toLowerCase().indexOf("webkit")&&!gc("Edge");function Tc(){var e=Xs.document;return e?e.documentMode:void 0}e:{var Ac="",Cc=function(){var e=mc();return Ec?/rv:([^\);]+)(\)|;)/.exec(e):Ic?/Edge\/([\d\.]+)/.exec(e):xc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Sc?/WebKit\/(\S+)/.exec(e):wc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Cc&&(Ac=Cc?Cc[1]:""),xc){var Nc=Tc();if(null!=Nc&&Nc>parseFloat(Ac)){bc=String(Nc);break e}}bc=Ac}var Dc,Rc={};function Oc(){return function(e){var t=Rc;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=vc(String(bc)).split("."),n=vc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=yc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||yc(0==a[2].length,0==o[2].length)||yc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Xs.document&&xc){var Pc=Tc();Dc=Pc||(parseInt(bc,10)||void 0)}else Dc=void 0;var Lc=Dc;function Mc(e,t){if(hc.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ec){e:{try{kc(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Fc[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Mc.X.h.call(this)}}oc(Mc,hc);var Fc={2:"touch",3:"pen",4:"mouse"};Mc.prototype.h=function(){Mc.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Vc="closure_listenable_"+(1e6*Math.random()|0),Uc=0;function Bc(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Uc,this.ba=this.ea=!1}function qc(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function zc(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function jc(e){var t={};for(var n in e)t[n]=e[n];return t}var Wc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gc(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Wc.length;a++)n=Wc[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Kc(e){this.src=e,this.g={},this.h=0}function Hc(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=cc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(qc(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Qc(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Kc.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Qc(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Bc(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Yc="closure_lm_"+(1e6*Math.random()|0),Xc={};function Jc(e,t,n,r,i){if(r&&r.once)return $c(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Jc(e,t[a],n,r,i);return null}return n=ol(n),e&&e[Vc]?e.N(t,n,$s(r)?!!r.capture:!!r,i):Zc(e,t,n,!1,r,i)}function Zc(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=$s(i)?!!i.capture:!!i,u=il(e);if(u||(e[Yc]=u=new Kc(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=rl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)dc||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(nl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function $c(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)$c(e,t[a],n,r,i);return null}return n=ol(n),e&&e[Vc]?e.O(t,n,$s(r)?!!r.capture:!!r,i):Zc(e,t,n,!0,r,i)}function el(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)el(e,t[a],n,r,i);else r=$s(r)?!!r.capture:!!r,n=ol(n),e&&e[Vc]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Qc(a=e.g[t],n,r,i))&&(qc(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=il(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Qc(t,n,r,i)),(n=-1<e?t[e]:null)&&tl(n))}function tl(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Vc])Hc(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(nl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=il(t))?(Hc(n,e),0==n.h&&(n.src=null,t[Yc]=null)):qc(e)}}}function nl(e){return e in Xc?Xc[e]:Xc[e]="on"+e}function rl(e,t){if(e.ba)e=!0;else{t=new Mc(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&tl(e),e=n.call(r,t)}return e}function il(e){return(e=e[Yc])instanceof Kc?e:null}var al="__closure_events_fn_"+(1e9*Math.random()>>>0);function ol(e){return"function"===typeof e?e:(e[al]||(e[al]=function(t){return e.handleEvent(t)}),e[al])}function ul(){uc.call(this),this.i=new Kc(this),this.P=this,this.I=null}function sl(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new hc(t,e);else if(t instanceof hc)t.target=t.target||e;else{var i=t;Gc(t=new hc(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=cl(o,r,!0,t)&&i}if(i=cl(o=t.g=e,r,!0,t)&&i,i=cl(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=cl(o=t.g=n[a],r,!1,t)&&i}function cl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Hc(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}oc(ul,uc),ul.prototype[Vc]=!0,ul.prototype.removeEventListener=function(e,t,n,r){el(this,e,t,n,r)},ul.prototype.M=function(){if(ul.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)qc(n[r]);delete t.g[e],t.h--}}this.I=null},ul.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ul.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ll=Xs.JSON.stringify;function fl(){var e=kl,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var hl,dl=function(){function e(){l(this,e),this.h=this.g=null}return h(e,[{key:"add",value:function(e,t){var n=pl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),pl=new(function(){function e(t,n){l(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return h(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new vl}),(function(e){return e.reset()})),vl=function(){function e(){l(this,e),this.next=this.g=this.h=null}return h(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function yl(e){Xs.setTimeout((function(){throw e}),0)}function ml(e,t){hl||function(){var e=Xs.Promise.resolve(void 0);hl=function(){e.then(bl)}}(),gl||(hl(),gl=!0),kl.add(e,t)}var gl=!1,kl=new dl;function bl(){for(var e;e=fl();){try{e.h.call(e.g)}catch(n){yl(n)}var t=pl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}gl=!1}function wl(e,t){ul.call(this),this.h=e||1,this.g=t||Xs,this.j=ic(this.kb,this),this.l=Date.now()}function xl(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Il(e,t,n){if("function"===typeof e)n&&(e=ic(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ic(e.handleEvent,e)}return 2147483647<Number(t)?-1:Xs.setTimeout(e,t||0)}function _l(e){e.g=Il((function(){e.g=null,e.i&&(e.i=!1,_l(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}oc(wl,ul),(Ks=wl.prototype).ca=!1,Ks.R=null,Ks.kb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),sl(this,"tick"),this.ca&&(xl(this),this.start()))}},Ks.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ks.M=function(){wl.X.M.call(this),xl(this),delete this.g};var El=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return h(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:_l(this)}},{key:"M",value:function(){Ct(m(n.prototype),"M",this).call(this),this.g&&(Xs.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(uc);function Sl(e){uc.call(this),this.h=e,this.g={}}oc(Sl,uc);var Tl=[];function Al(e,t,n,r){Array.isArray(n)||(n&&(Tl[0]=n.toString()),n=Tl);for(var i=0;i<n.length;i++){var a=Jc(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Cl(e){zc(e.g,(function(e,t){this.g.hasOwnProperty(t)&&tl(e)}),e),e.g={}}function Nl(){this.g=!0}function Dl(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return ll(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Sl.prototype.M=function(){Sl.X.M.call(this),Cl(this)},Sl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nl.prototype.Aa=function(){this.g=!1},Nl.prototype.info=function(){};var Rl={},Ol=null;function Pl(){return Ol=Ol||new ul}function Ll(e){hc.call(this,Rl.Oa,e)}function Ml(e){var t=Pl();sl(t,new Ll(t,e))}function Fl(e,t){hc.call(this,Rl.STAT_EVENT,e),this.stat=t}function Vl(e){var t=Pl();sl(t,new Fl(t,e))}function Ul(e,t){hc.call(this,Rl.Pa,e),this.size=t}function Bl(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Xs.setTimeout((function(){e()}),t)}Rl.Oa="serverreachability",oc(Ll,hc),Rl.STAT_EVENT="statevent",oc(Fl,hc),Rl.Pa="timingevent",oc(Ul,hc);var ql={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},zl={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function jl(){}function Wl(e){return e.h||(e.h=e.i())}function Gl(){}jl.prototype.h=null;var Kl,Hl={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function Ql(){hc.call(this,"d")}function Yl(){hc.call(this,"c")}function Xl(){}function Jl(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Sl(this),this.O=$l,e=_c?125:void 0,this.T=new wl(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Zl}function Zl(){this.i=null,this.g="",this.h=!1}oc(Ql,hc),oc(Yl,hc),oc(Xl,jl),Xl.prototype.g=function(){return new XMLHttpRequest},Xl.prototype.i=function(){return{}},Kl=new Xl;var $l=45e3,ef={},tf={};function nf(e,t,n){e.K=1,e.v=xf(mf(t)),e.s=n,e.P=!0,rf(e,null)}function rf(e,t){e.F=Date.now(),sf(e),e.A=mf(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Lf(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Zl,e.g=Mh(e.l,n?t:null,!e.s),0<e.N&&(e.L=new El(ic(e.Ka,e,e.g),e.N)),Al(e.S,e.g,"readystatechange",e.hb),t=e.H?jc(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Ml(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function af(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function of(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=uf(e,n))==tf){4==t&&(e.o=4,Vl(14),i=!1),Dl(e.j,e.m,null,"[Incomplete Response]");break}if(r==ef){e.o=4,Vl(15),Dl(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Dl(e.j,e.m,r,null),df(e,r)}af(e)&&r!=tf&&r!=ef&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Vl(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ah(t),t.K=!0,Vl(11))):(Dl(e.j,e.m,n,"[Invalid Chunked Response]"),hf(e),ff(e))}function uf(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?tf:(n=Number(t.substring(n,r)),isNaN(n)?ef:(r+=1)+n>t.length?tf:(t=t.substr(r,n),e.C=r+n,t))}function sf(e){e.V=Date.now()+e.O,cf(e,e.O)}function cf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Bl(ic(e.fb,e),t)}function lf(e){e.B&&(Xs.clearTimeout(e.B),e.B=null)}function ff(e){0==e.l.G||e.I||Dh(e.l,e)}function hf(e){lf(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,xl(e.T),Cl(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function df(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||jf(n.h,e)))if(!e.J&&jf(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Nh(n),bh(n)}Th(n),Vl(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Bl(ic(n.bb,n),6e3));if(1>=zf(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Oh(n,11)}else if((e.J||n.g==e)&&Nh(n),!pc(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Wf(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,wf(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Lh(r,r.H?r.ka:null,r.V),d.J){Gf(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(lf(p),sf(p)),r.g=d}else Sh(r);0<n.i.length&&xh(n)}else"stop"!=a[0]&&"close"!=a[0]||Oh(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Oh(n,7):kh(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Ml(4)}catch(a){}}function pf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Zs(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Zs(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Zs(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Ks=Jl.prototype).setTimeout=function(e){this.O=e},Ks.hb=function(e){e=e.target;var t=this.L;t&&3==dh(e)?t.l():this.Ka(e)},Ks.Ka=function(e){try{if(e==this.g)e:{var t=dh(this.g),n=this.g.Ea(),r=this.g.aa();if(!(3>t)&&(3!=t||_c||this.g&&(this.h.h||this.g.fa()||ph(this.g)))){this.I||4!=t||7==n||Ml(8==n||0>=r?3:2),lf(this);var i=this.g.aa();this.Y=i;t:if(af(this)){var a=ph(this.g);e="";var o=a.length,u=4==dh(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){hf(this),ff(this);var s="";break t}this.h.i=new Xs.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,i),this.i){if(this.Z&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pc(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Vl(12),hf(this),ff(this);break e}Dl(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,df(this,i)}this.P?(of(this,t,s),_c&&this.i&&3==t&&(Al(this.S,this.T,"tick",this.gb),this.T.start())):(Dl(this.j,this.m,s,null),df(this,s)),4==t&&hf(this),this.i&&!this.I&&(4==t?Dh(this.l,this):(this.i=!1,sf(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Vl(12)):(this.o=0,Vl(13)),hf(this),ff(this)}}}catch(t){}},Ks.gb=function(){if(this.g){var e=dh(this.g),t=this.g.fa();this.C<t.length&&(lf(this),of(this,e,t),this.i&&4!=e&&sf(this))}},Ks.cancel=function(){this.I=!0,hf(this)},Ks.fb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Ml(3),Vl(17)),hf(this),this.o=2,ff(this)):cf(this,this.V-e)};var vf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yf(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof yf){this.h=void 0!==t?t:e.h,gf(this,e.j),this.s=e.s,this.g=e.g,kf(this,e.m),this.l=e.l,t=e.i;var n=new Df;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),bf(this,n),this.o=e.o}else e&&(n=String(e).match(vf))?(this.h=!!t,gf(this,n[1]||"",!0),this.s=If(n[2]||""),this.g=If(n[3]||"",!0),kf(this,n[4]),this.l=If(n[5]||"",!0),bf(this,n[6]||"",!0),this.o=If(n[7]||"")):(this.h=!!t,this.i=new Df(null,this.h))}function mf(e){return new yf(e)}function gf(e,t,n){e.j=n?If(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function kf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function bf(e,t,n){t instanceof Df?(e.i=t,function(e,t){t&&!e.j&&(Rf(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Of(this,t),Lf(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=_f(t,Cf)),e.i=new Df(t,e.h))}function wf(e,t,n){e.i.set(t,n)}function xf(e){return wf(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function If(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function _f(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ef),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ef(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(_f(t,Sf,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(_f(t,Sf,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(_f(n,"/"==n.charAt(0)?Af:Tf,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",_f(n,Nf)),e.join("")};var Sf=/[#\/\?@]/g,Tf=/[#\?:]/g,Af=/[#\?]/g,Cf=/[#\?@]/g,Nf=/#/g;function Df(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Rf(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Of(e,t){Rf(e),t=Mf(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Pf(e,t){return Rf(e),t=Mf(e,t),e.g.has(t)}function Lf(e,t,n){Of(e,t),0<n.length&&(e.i=null,e.g.set(Mf(e,t),lc(n)),e.h+=n.length)}function Mf(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ks=Df.prototype).add=function(e,t){Rf(this),this.i=null,e=Mf(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ks.forEach=function(e,t){Rf(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Ks.oa=function(){Rf(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ks.W=function(e){Rf(this);var t=[];if("string"===typeof e)Pf(this,e)&&(t=t.concat(this.g.get(Mf(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ks.set=function(e,t){return Rf(this),this.i=null,Pf(this,e=Mf(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ks.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Ks.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Ff=h((function e(t,n){l(this,e),this.h=t,this.g=n}));function Vf(e){this.l=e||Bf,Xs.PerformanceNavigationTiming?e=0<(e=Xs.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Xs.g&&Xs.g.Ga&&Xs.g.Ga()&&Xs.g.Ga().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Uf,Bf=10;function qf(e){return!!e.h||!!e.g&&e.g.size>=e.j}function zf(e){return e.h?1:e.g?e.g.size:0}function jf(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Wf(e,t){e.g?e.g.add(t):e.h=t}function Gf(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Kf(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=d(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return lc(e.i)}function Hf(){}function Qf(){this.g=new Hf}function Yf(e,t,n){var r=n||"";try{pf(e,(function(e,n){var i=e;$s(e)&&(i=ll(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Xf(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Jf(e){this.l=e.$b||null,this.j=e.ib||!1}function Zf(e,t){ul.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=$f,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vf.prototype.cancel=function(){if(this.i=Kf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=d(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Hf.prototype.stringify=function(e){return Xs.JSON.stringify(e,void 0)},Hf.prototype.parse=function(e){return Xs.JSON.parse(e,void 0)},oc(Jf,jl),Jf.prototype.g=function(){return new Zf(this.l,this.j)},Jf.prototype.i=(Uf={},function(){return Uf}),oc(Zf,ul);var $f=0;function eh(e){e.j.read().then(e.Sa.bind(e)).catch(e.ga.bind(e))}function th(e){e.readyState=4,e.l=null,e.j=null,e.A=null,nh(e)}function nh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ks=Zf.prototype).open=function(e,t){if(this.readyState!=$f)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,nh(this)},Ks.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Xs).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ga.bind(this))},Ks.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,th(this)),this.readyState=$f},Ks.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,nh(this)),this.g&&(this.readyState=3,nh(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if("undefined"!==typeof Xs.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;eh(this)}else e.text().then(this.Ua.bind(this),this.ga.bind(this))},Ks.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?th(this):nh(this),3==this.readyState&&eh(this)}},Ks.Ua=function(e){this.g&&(this.response=this.responseText=e,th(this))},Ks.Ta=function(e){this.g&&(this.response=e,th(this))},Ks.ga=function(){this.g&&th(this)},Ks.setRequestHeader=function(e,t){this.v.append(e,t)},Ks.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ks.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Zf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var rh=Xs.JSON.parse;function ih(e){ul.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ah,this.K=this.L=!1}oc(ih,ul);var ah="",oh=/^https?$/i,uh=["POST","PUT"];function sh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ch(e),fh(e)}function ch(e){e.D||(e.D=!0,sl(e,"complete"),sl(e,"error"))}function lh(e){if(e.h&&"undefined"!=typeof Ys&&(!e.C[1]||4!=dh(e)||2!=e.aa()))if(e.v&&4==dh(e))Il(e.Ha,0,e);else if(sl(e,"readystatechange"),4==dh(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(vf)[1]||null;if(!a&&Xs.self&&Xs.self.location){var o=Xs.self.location.protocol;a=o.substr(0,o.length-1)}i=!oh.test(a?a.toLowerCase():"")}t=i}if(t)sl(e,"complete"),sl(e,"success");else{e.m=6;try{var u=2<dh(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",ch(e)}}finally{fh(e)}}}function fh(e,t){if(e.g){hh(e);var n=e.g,r=e.C[0]?Js:null;e.g=null,e.C=null,t||sl(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function hh(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Xs.clearTimeout(e.A),e.A=null)}function dh(e){return e.g?e.g.readyState:0}function ph(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ah:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch($h){return null}}function vh(e){var t="";return zc(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function yh(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=vh(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):wf(e,t,n))}function mh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function gh(e){this.Ca=0,this.i=[],this.j=new Nl,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=mh("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=mh("baseRetryDelayMs",5e3,e),this.ab=mh("retryDelaySeedMs",1e4,e),this.Za=mh("forwardChannelMaxRetries",2,e),this.ta=mh("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Yb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Vf(e&&e.concurrentRequestLimit),this.Fa=new Qf,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=e&&e.Wb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function kh(e){if(wh(e),3==e.G){var t=e.U++,n=mf(e.F);wf(n,"SID",e.I),wf(n,"RID",t),wf(n,"TYPE","terminate"),_h(e,n),(t=new Jl(e,e.j,t,void 0)).K=2,t.v=xf(mf(n)),n=!1,Xs.navigator&&Xs.navigator.sendBeacon&&(n=Xs.navigator.sendBeacon(t.v.toString(),"")),!n&&Xs.Image&&((new Image).src=t.v,n=!0),n||(t.g=Mh(t.l,null),t.g.da(t.v)),t.F=Date.now(),sf(t)}Ph(e)}function bh(e){e.g&&(Ah(e),e.g.cancel(),e.g=null)}function wh(e){bh(e),e.u&&(Xs.clearTimeout(e.u),e.u=null),Nh(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Xs.clearTimeout(e.m),e.m=null)}function xh(e){qf(e.h)||e.m||(e.m=!0,ml(e.Ja,e),e.C=0)}function Ih(e,t){var n;n=t?t.m:e.U++;var r=mf(e.F);wf(r,"SID",e.I),wf(r,"RID",n),wf(r,"AID",e.T),_h(e,r),e.o&&e.s&&yh(r,e.o,e.s),n=new Jl(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Eh(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Wf(e.h,n),nf(n,r,t)}function _h(e,t){e.ia&&zc(e.ia,(function(e,n){wf(t,n,e)})),e.l&&pf({},(function(e,n){wf(t,n,e)}))}function Eh(e,t,n){n=Math.min(e.i.length,n);var r=e.l?ic(e.l.Qa,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Yf(l,o,"req"+c+"_")}catch(cd){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function Sh(e){e.g||e.u||(e.Z=1,ml(e.Ia,e),e.A=0)}function Th(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Bl(ic(e.Ia,e),Rh(e,e.A)),e.A++,!0)}function Ah(e){null!=e.B&&(Xs.clearTimeout(e.B),e.B=null)}function Ch(e){e.g=new Jl(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=mf(e.sa);wf(t,"RID","rpc"),wf(t,"SID",e.I),wf(t,"CI",e.L?"0":"1"),wf(t,"AID",e.T),wf(t,"TYPE","xmlhttp"),_h(e,t),e.o&&e.s&&yh(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=xf(mf(t)),n.s=null,n.P=!0,rf(n,e)}function Nh(e){null!=e.v&&(Xs.clearTimeout(e.v),e.v=null)}function Dh(e,t){var n=null;if(e.g==t){Nh(e),Ah(e),e.g=null;var r=2}else{if(!jf(e.h,t))return;n=t.D,Gf(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;sl(r=Pl(),new Ul(r,n,t,i)),xh(e)}else Sh(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(zf(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Ya?0:e.Za))&&(e.m=Bl(ic(e.Ja,e,t),Rh(e,e.C)),e.C++,!0))}(e,t)||2==r&&Th(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Oh(e,5);break;case 4:Oh(e,10);break;case 3:Oh(e,6);break;default:Oh(e,2)}}function Rh(e,t){var n=e.Wa+Math.floor(Math.random()*e.ab);return e.l||(n*=2),n*t}function Oh(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=ic(e.jb,e);n||(n=new yf("//www.google.com/images/cleardot.gif"),Xs.location&&"http"==Xs.location.protocol||gf(n,"https"),xf(n)),function(e,t){var n=new Nl;if(Xs.Image){var r=new Image;r.onload=ac(Xf,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ac(Xf,n,r,"TestLoadImage: error",!1,t),r.onabort=ac(Xf,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ac(Xf,n,r,"TestLoadImage: timeout",!1,t),Xs.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Vl(2);e.G=0,e.l&&e.l.va(t),Ph(e),wh(e)}function Ph(e){if(e.G=0,e.la=[],e.l){var t=Kf(e.h);0==t.length&&0==e.i.length||(fc(e.la,t),fc(e.la,e.i),e.h.i.length=0,lc(e.i),e.i.length=0),e.l.ua()}}function Lh(e,t,n){var r=n instanceof yf?mf(n):new yf(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),kf(r,r.m);else{var i=Xs.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new yf(null,void 0);r&&gf(a,r),t&&(a.g=t),i&&kf(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&wf(r,n,t),wf(r,"VER",e.ma),_h(e,r),r}function Mh(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new ih(new Jf({ib:!0})):new ih(e.ra)).L=e.H,t}function Fh(){}function Vh(){if(xc&&!(10<=Number(Lc)))throw Error("Environmental error: no available transport.")}function Uh(e,t){ul.call(this),this.g=new gh(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Xb)&&!pc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!pc(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new zh(this)}function Bh(e){Ql.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function qh(){Yl.call(this),this.status=1}function zh(e){this.g=e}(Ks=ih.prototype).da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Kl.g(),this.C=this.u?Wl(this.u):Wl(Kl),this.g.onreadystatechange=ic(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void sh(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=d(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(v){o.e(v)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Xs.FormData&&e instanceof Xs.FormData,!(0<=cc(uh,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=d(n);try{for(l.s();!(c=l.n()).done;){var f=s(c.value,2),h=f[0],p=f[1];this.g.setRequestHeader(h,p)}}catch(v){l.e(v)}finally{l.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{hh(this),0<this.B&&((this.K=function(e){return xc&&Oc()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ic(this.qa,this)):this.A=Il(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){sh(this,u)}},Ks.qa=function(){"undefined"!=typeof Ys&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,sl(this,"timeout"),this.abort(8))},Ks.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,sl(this,"complete"),sl(this,"abort"),fh(this))},Ks.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fh(this,!0)),ih.X.M.call(this)},Ks.Ha=function(){this.s||(this.F||this.v||this.l?lh(this):this.eb())},Ks.eb=function(){lh(this)},Ks.aa=function(){try{return 2<dh(this)?this.g.status:-1}catch(Uf){return-1}},Ks.fa=function(){try{return this.g?this.g.responseText:""}catch(Uf){return""}},Ks.Ra=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),rh(t)}},Ks.Ea=function(){return this.m},Ks.Na=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ks=gh.prototype).ma=8,Ks.G=1,Ks.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Jl(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Gc(n=jc(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Eh(this,t,r),wf(i=mf(this.F),"RID",e),wf(i,"CVER",22),this.D&&wf(i,"X-HTTP-Session-Id",this.D),_h(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(vh(n)))+"&"+r:this.o&&yh(i,this.o,n)),Wf(this.h,t),this.Xa&&wf(i,"TYPE","init"),this.O?(wf(i,"$req",r),wf(i,"SID","null"),t.Z=!0,nf(t,i,null)):nf(t,i,r),this.G=2}}else 3==this.G&&(e?Ih(this,e):0==this.i.length||qf(this.h)||Ih(this))},Ks.Ia=function(){if(this.u=null,Ch(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Bl(ic(this.cb,this),e)}},Ks.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Vl(10),bh(this),Ch(this))},Ks.bb=function(){null!=this.v&&(this.v=null,bh(this),Th(this),Vl(19))},Ks.jb=function(e){e?(this.j.info("Successfully pinged google.com"),Vl(2)):(this.j.info("Failed to ping google.com"),Vl(1))},(Ks=Fh.prototype).xa=function(){},Ks.wa=function(){},Ks.va=function(){},Ks.ua=function(){},Ks.Qa=function(){},Vh.prototype.g=function(e,t){return new Uh(e,t)},oc(Uh,ul),Uh.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Vl(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Lh(e,null,e.V),xh(e)},Uh.prototype.close=function(){kh(this.g)},Uh.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ll(e),e=n);t.i.push(new Ff(t.$a++,e)),3==t.G&&xh(t)},Uh.prototype.M=function(){this.g.l=null,delete this.j,kh(this.g),delete this.g,Uh.X.M.call(this)},oc(Bh,Ql),oc(qh,Yl),oc(zh,Fh),zh.prototype.xa=function(){sl(this.g,"a")},zh.prototype.wa=function(e){sl(this.g,new Bh(e))},zh.prototype.va=function(e){sl(this.g,new qh(e))},zh.prototype.ua=function(){sl(this.g,"b")},Vh.prototype.createWebChannel=Vh.prototype.g,Uh.prototype.send=Uh.prototype.u,Uh.prototype.open=Uh.prototype.m,Uh.prototype.close=Uh.prototype.close,ql.NO_ERROR=0,ql.TIMEOUT=8,ql.HTTP_ERROR=6,zl.COMPLETE="complete",Gl.EventType=Hl,Hl.OPEN="a",Hl.CLOSE="b",Hl.ERROR="c",Hl.MESSAGE="d",ul.prototype.listen=ul.prototype.N,ih.prototype.listenOnce=ih.prototype.O,ih.prototype.getLastError=ih.prototype.Na,ih.prototype.getLastErrorCode=ih.prototype.Ea,ih.prototype.getStatus=ih.prototype.aa,ih.prototype.getResponseJson=ih.prototype.Ra,ih.prototype.getResponseText=ih.prototype.fa,ih.prototype.send=ih.prototype.da;var jh=Qs.createWebChannelTransport=function(){return new Vh},Wh=Qs.getStatEventTarget=function(){return Pl()},Gh=Qs.ErrorCode=ql,Kh=Qs.EventType=zl,Hh=Qs.Event=Rl,Qh=Qs.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Yh=Qs.FetchXmlHttpFactory=Jf,Xh=Qs.WebChannel=Gl,Jh=Qs.XhrIo=ih,Zh="@firebase/firestore",$h=function(){function e(t){l(this,e),this.uid=t}return h(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();$h.UNAUTHENTICATED=new $h(null),$h.GOOGLE_CREDENTIALS=new $h("google-credentials-uid"),$h.FIRST_PARTY=new $h("first-party-uid"),$h.MOCK_USER=new $h("mock-user");var ed="9.10.0",td=new de("@firebase/firestore");function nd(){return td.logLevel}function rd(e){if(td.logLevel<=oe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(od);td.debug.apply(td,["Firestore (".concat(ed,"): ").concat(e)].concat($(i)))}}function id(e){if(td.logLevel<=oe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(od);td.error.apply(td,["Firestore (".concat(ed,"): ").concat(e)].concat($(i)))}}function ad(e){if(td.logLevel<=oe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(od);td.warn.apply(td,["Firestore (".concat(ed,"): ").concat(e)].concat($(i)))}}function od(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ud(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ed,") INTERNAL ASSERTION FAILED: ")+e;throw id(t),new Error(t)}function sd(e,t){e||ud()}function cd(e,t){return e}var ld={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fd=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return h(n)}(F),hd=h((function e(){var t=this;l(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),dd=h((function e(t,n){l(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),pd=function(){function e(){l(this,e)}return h(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t($h.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),vd=function(){function e(t){l(this,e),this.token=t,this.changeListener=null}return h(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),yd=function(){function e(t){l(this,e),this.t=t,this.currentUser=$h.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return h(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new hd;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new hd,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){rd("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(rd("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new hd)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(rd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(sd("string"==typeof n.accessToken),new dd(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return sd(null===e||"string"==typeof e),new $h(e)}}]),e}(),md=function(){function e(t,n,r,i){l(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=$h.FIRST_PARTY,this.p=new Map}return h(e,[{key:"I",value:function(){return this.g?this.g():(sd(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),gd=function(){function e(t,n,r,i){l(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return h(e,[{key:"getToken",value:function(){return Promise.resolve(new md(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t($h.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),kd=h((function e(t){l(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),bd=function(){function e(t){l(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return h(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&rd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,rd("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){rd("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):rd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(sd("string"==typeof t.token),e.A=t.token,new kd(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function wd(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var xd=function(){function e(){l(this,e)}return h(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=wd(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Id(e,t){return e<t?-1:e>t?1:0}function _d(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ed(e){return e+"\0"}var Sd=function(){function e(t,n){if(l(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new fd(ld.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fd(ld.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new fd(ld.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fd(ld.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return h(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Id(this.nanoseconds,e.nanoseconds):Id(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Td=function(){function e(t){l(this,e),this.timestamp=t}return h(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Sd(0,0))}},{key:"max",value:function(){return new e(new Sd(253402300799,999999999))}}]),e}(),Ad=function(){function e(t,n,r){l(this,e),void 0===n?n=0:n>t.length&&ud(),void 0===r?r=t.length-n:r>t.length-n&&ud(),this.segments=t,this.offset=n,this.len=r}return h(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Cd=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new fd(ld.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,$(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ad),Nd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dd=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Nd.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new fd(ld.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new fd(ld.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new fd(ld.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new fd(ld.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ad),Rd=function(){function e(t){l(this,e),this.path=t}return h(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Cd.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Cd.fromString(t))}},{key:"fromName",value:function(t){return new e(Cd.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Cd.emptyPath())}},{key:"comparator",value:function(e,t){return Cd.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Cd(t.slice()))}}]),e}(),Od=h((function e(t,n,r,i){l(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Pd(e){return e.fields.find((function(e){return 2===e.kind}))}function Ld(e){return e.fields.filter((function(e){return 2!==e.kind}))}Od.UNKNOWN_ID=-1;var Md=h((function e(t,n){l(this,e),this.fieldPath=t,this.kind=n}));var Fd=function(){function e(t,n){l(this,e),this.sequenceNumber=t,this.offset=n}return h(e,null,[{key:"empty",value:function(){return new e(0,Bd.min())}}]),e}();function Vd(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Td.fromTimestamp(1e9===r?new Sd(n+1,0):new Sd(n,r));return new Bd(i,Rd.empty(),t)}function Ud(e){return new Bd(e.readTime,e.key,-1)}var Bd=function(){function e(t,n,r){l(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return h(e,null,[{key:"min",value:function(){return new e(Td.min(),Rd.empty(),-1)}},{key:"max",value:function(){return new e(Td.max(),Rd.empty(),-1)}}]),e}();function qd(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Rd.comparator(e.documentKey,t.documentKey))?n:Id(e.largestBatchId,t.largestBatchId)}var zd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jd=function(){function e(){l(this,e),this.onCommittedListeners=[]}return h(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Wd(e){return Gd.apply(this,arguments)}function Gd(){return Gd=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===ld.FAILED_PRECONDITION&&t.message===zd){e.next=2;break}throw t;case 2:rd("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Gd.apply(this,arguments)}var Kd=function(){function e(t){var n=this;l(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return h(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ud(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=d(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Hd=function(){function e(t,n){var r=this;l(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new hd,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new Xd(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=tp(e.target.error);r.P.reject(new Xd(t,n))}}return h(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(rd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Zd(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Xd(n,t)}}}]),e}(),Qd=function(){function e(t,n,r){l(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(D())&&id("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return h(e,[{key:"F",value:function(){var e=te(J().mark((function e(t){var n=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return rd("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Xd(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new fd(ld.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new fd(ld.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Xd(t,n))},i.onupgradeneeded=function(e){rd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){rd("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=te(J().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(J().mark((function e(){var n,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=Hd.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),Kd.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,rd("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return rd("SimpleDb","Removing database:",e),$d(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!M())return!1;if(e.N())return!0;var t=D(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Yd=function(){function e(t){l(this,e),this.U=t,this.q=!1,this.K=null}return h(e,[{key:"isDone",get:function(){return this.q}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.U=e}},{key:"done",value:function(){this.q=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return $d(this.U.delete())}}]),e}(),Xd=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,ld.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return h(n)}(fd);function Jd(e){return"IndexedDbTransactionError"===e.name}var Zd=function(){function e(t){l(this,e),this.store=t}return h(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(rd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(rd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),$d(n)}},{key:"add",value:function(e){return rd("SimpleDb","ADD",this.store.name,e,e),$d(this.store.add(e))}},{key:"get",value:function(e){var t=this;return $d(this.store.get(e)).next((function(n){return void 0===n&&(n=null),rd("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return rd("SimpleDb","DELETE",this.store.name,e),$d(this.store.delete(e))}},{key:"count",value:function(){return rd("SimpleDb","COUNT",this.store.name),$d(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Kd((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Kd((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){rd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new Kd((function(n,r){t.onerror=function(e){var t=tp(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new Kd((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Yd(i),o=t(i.primaryKey,i.value,a);if(o instanceof Kd){var u=o.catch((function(e){return a.done(),Kd.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return Kd.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function $d(e){return new Kd((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=tp(e.target.error);n(t)}}))}var ep=!1;function tp(e){var t=Qd.D(D());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new fd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return ep||(ep=!0,setTimeout((function(){throw r}),0)),r}}return e}var np=function(){function e(t,n){l(this,e),this.asyncQueue=t,this.et=n,this.task=null}return h(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;rd("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=rd,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Jd(e.t4)){e.next=17;break}rd("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Wd(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),rp=function(){function e(t,n){l(this,e),this.localStore=t,this.persistence=n}return h(e,[{key:"st",value:function(){var e=te(J().mark((function e(){var t,n=this,r=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Kd.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return rd("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return rd("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Ud(t);qd(r,n)>0&&(n=r)})),new Bd(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),ip=function(){function e(t,n){var r=this;l(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return h(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();function ap(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function op(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function up(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}ip.at=-1;var sp=function(){function e(t,n){l(this,e),this.comparator=t,this.root=n||lp.EMPTY}return h(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,lp.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,lp.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new cp(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new cp(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new cp(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new cp(this.root,e,this.comparator,!0)}}]),e}(),cp=function(){function e(t,n,r,i){l(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return h(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),lp=function(){function e(t,n,r,i,a){l(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return h(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ud();if(this.right.isRed())throw ud();var e=this.left.check();if(e!==this.right.check())throw ud();return e+(this.isRed()?0:1)}}]),e}();lp.EMPTY=null,lp.RED=!0,lp.BLACK=!1,lp.EMPTY=new(function(){function e(){l(this,e),this.size=0}return h(e,[{key:"key",get:function(){throw ud()}},{key:"value",get:function(){throw ud()}},{key:"color",get:function(){throw ud()}},{key:"left",get:function(){throw ud()}},{key:"right",get:function(){throw ud()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new lp(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var fp=function(){function e(t){l(this,e),this.comparator=t,this.data=new sp(this.comparator)}return h(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new hp(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new hp(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),hp=function(){function e(t){l(this,e),this.iter=t}return h(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function dp(e){return e.hasNext()?e.getNext():void 0}var pp=function(){function e(t){l(this,e),this.fields=t,t.sort(Dd.comparator)}return h(e,[{key:"unionWith",value:function(t){var n,r=new fp(Dd.comparator),i=d(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=d(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=d(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return _d(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var vp=function(e){function t(e){l(this,t),this.binaryString=e}return h(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Id(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();vp.EMPTY_BYTE_STRING=new vp("");var yp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mp(e){if(sd(!!e),"string"==typeof e){var t=0,n=yp.exec(e);if(sd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:gp(e.seconds),nanos:gp(e.nanos)}}function gp(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function kp(e){return"string"==typeof e?vp.fromBase64String(e):vp.fromUint8Array(e)}function bp(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wp(e){var t=e.mapValue.fields.__previous_value__;return bp(t)?wp(t):t}function xp(e){var t=mp(e.mapValue.fields.__local_write_time__.timestampValue);return new Sd(t.seconds,t.nanos)}var Ip=h((function e(t,n,r,i,a,o,u,s){l(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),_p=function(){function e(t,n){l(this,e),this.projectId=t,this.database=n||"(default)"}return h(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Ep(e){return null==e}function Sp(e){return 0===e&&1/e==-1/0}function Tp(e){return"number"==typeof e&&Number.isInteger(e)&&!Sp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Ap={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Cp={nullValue:"NULL_VALUE"};function Np(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bp(e)?4:Wp(e)?9007199254740991:10:ud()}function Dp(e,t){if(e===t)return!0;var n=Np(e);if(n!==Np(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xp(e).isEqual(xp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=mp(e.timestampValue),r=mp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return kp(e.bytesValue).isEqual(kp(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return gp(e.geoPointValue.latitude)===gp(t.geoPointValue.latitude)&&gp(e.geoPointValue.longitude)===gp(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return gp(e.integerValue)===gp(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=gp(e.doubleValue),r=gp(t.doubleValue);return n===r?Sp(n)===Sp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return _d(e.arrayValue.values||[],t.arrayValue.values||[],Dp);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ap(n)!==ap(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Dp(n[i],r[i])))return!1;return!0}(e,t);default:return ud()}}function Rp(e,t){return void 0!==(e.values||[]).find((function(e){return Dp(e,t)}))}function Op(e,t){if(e===t)return 0;var n=Np(e),r=Np(t);if(n!==r)return Id(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Id(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=gp(e.integerValue||e.doubleValue),r=gp(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Pp(e.timestampValue,t.timestampValue);case 4:return Pp(xp(e),xp(t));case 5:return Id(e.stringValue,t.stringValue);case 6:return function(e,t){var n=kp(e),r=kp(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Id(n[i],r[i]);if(0!==a)return a}return Id(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Id(gp(e.latitude),gp(t.latitude));return 0!==n?n:Id(gp(e.longitude),gp(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Op(n[i],r[i]);if(a)return a}return Id(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ap.mapValue&&t===Ap.mapValue)return 0;if(e===Ap.mapValue)return 1;if(t===Ap.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Id(r[o],a[o]);if(0!==u)return u;var s=Op(n[r[o]],i[a[o]]);if(0!==s)return s}return Id(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ud()}}function Pp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Id(e,t);var n=mp(e),r=mp(t),i=Id(n.seconds,r.seconds);return 0!==i?i:Id(n.nanos,r.nanos)}function Lp(e){return Mp(e)}function Mp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=mp(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?kp(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Rd.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=d(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Mp(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=d(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Mp(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):ud();var t,n}function Fp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Vp(e){return!!e&&"integerValue"in e}function Up(e){return!!e&&"arrayValue"in e}function Bp(e){return!!e&&"nullValue"in e}function qp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function zp(e){return!!e&&"mapValue"in e}function jp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return op(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=jp(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=jp(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Wp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Gp(e){return"nullValue"in e?Cp:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Fp(_p.empty(),Rd.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ud()}function Kp(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Fp(_p.empty(),Rd.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ap:ud()}function Hp(e,t){var n=Op(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Qp(e,t){var n=Op(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Yp=function(){function e(t){l(this,e),this.value=t}return h(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!zp(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jp(t)}},{key:"setAll",value:function(e){var t=this,n=Dd.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=jp(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());zp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Dp(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];zp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){op(t,(function(t,n){return e[t]=n}));var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(jp(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Xp(e){var t=[];return op(e.fields,(function(e,n){var r=new Dd([e]);if(zp(n)){var i=Xp(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=d(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new pp(t)}var Jp=function(){function e(t,n,r,i,a,o){l(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return h(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Yp.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Yp.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Td.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Td.min(),Td.min(),Yp.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Td.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Td.min(),Yp.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Td.min(),Yp.empty(),2)}}]),e}(),Zp=h((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;l(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ht=null}));function $p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Zp(e,t,n,r,i,a,o)}function ev(e){var t=cd(e);if(null===t.ht){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Lp(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Ep(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Lp(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Lp(e)})).join(",")),t.ht=n}return t.ht}function tv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!mv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Dp(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!kv(e.startAt,t.startAt)&&kv(e.endAt,t.endAt)}function nv(e){return Rd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function rv(e,t){return e.filters.filter((function(e){return e instanceof ov&&e.field.isEqual(t)}))}function iv(e,t,n){var r,i=Cp,a=!0,o=d(rv(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Cp,c=!0;switch(u.op){case"<":case"<=":s=Gp(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Cp}Hp({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Hp({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function av(e,t,n){var r,i=Ap,a=!0,o=d(rv(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Ap,c=!0;switch(u.op){case">=":case">":s=Kp(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Ap}Qp({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Qp({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var ov=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return h(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Op(t,this.value)):null!==t&&Np(this.value)===Np(t)&&this.ft(Op(t,this.value))}},{key:"ft",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ud()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new uv(e,t,r):"array-contains"===t?new fv(e,r):"in"===t?new hv(e,r):"not-in"===t?new dv(e,r):"array-contains-any"===t?new pv(e,r):new n(e,t,r)}},{key:"lt",value:function(e,t,n){return"in"===t?new sv(e,n):new cv(e,n)}}]),n}(function(){return h((function e(){l(this,e)}))}()),uv=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,e,r,i)).key=Rd.fromName(i.referenceValue),a}return h(n,[{key:"matches",value:function(e){var t=Rd.comparator(e.key,this.key);return this.ft(t)}}]),n}(ov),sv=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,"in",r)).keys=lv("in",r),i}return h(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ov),cv=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,"not-in",r)).keys=lv("not-in",r),i}return h(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ov);function lv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Rd.fromName(e.referenceValue)}))}var fv=function(e){y(n,e);var t=w(n);function n(e,r){return l(this,n),t.call(this,e,"array-contains",r)}return h(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Up(t)&&Rp(t.arrayValue,this.value)}}]),n}(ov),hv=function(e){y(n,e);var t=w(n);function n(e,r){return l(this,n),t.call(this,e,"in",r)}return h(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Rp(this.value.arrayValue,t)}}]),n}(ov),dv=function(e){y(n,e);var t=w(n);function n(e,r){return l(this,n),t.call(this,e,"not-in",r)}return h(n,[{key:"matches",value:function(e){if(Rp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Rp(this.value.arrayValue,t)}}]),n}(ov),pv=function(e){y(n,e);var t=w(n);function n(e,r){return l(this,n),t.call(this,e,"array-contains-any",r)}return h(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Up(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Rp(t.value.arrayValue,e)}))}}]),n}(ov),vv=h((function e(t,n){l(this,e),this.position=t,this.inclusive=n})),yv=h((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";l(this,e),this.field=t,this.dir=n}));function mv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function gv(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Rd.comparator(Rd.fromName(o.referenceValue),n.key):Op(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function kv(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Dp(e.position[n],t.position[n]))return!1;return!0}var bv=h((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;l(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this._t=null,this.wt=null,this.startAt,this.endAt}));function wv(e,t,n,r,i,a,o,u){return new bv(e,t,n,r,i,a,o,u)}function xv(e){return new bv(e)}function Iv(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function _v(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ev(e){var t,n=d(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Sv(e){return null!==e.collectionGroup}function Tv(e){var t=cd(e);if(null===t._t){t._t=[];var n=Ev(t),r=_v(t);if(null!==n&&null===r)n.isKeyField()||t._t.push(new yv(n)),t._t.push(new yv(Dd.keyField(),"asc"));else{var i,a=!1,o=d(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t._t.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new yv(Dd.keyField(),s))}}}return t._t}function Av(e){var t=cd(e);if(!t.wt)if("F"===t.limitType)t.wt=$p(t.path,t.collectionGroup,Tv(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=d(Tv(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new yv(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new vv(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new vv(t.startAt.position,t.startAt.inclusive):null;t.wt=$p(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function Cv(e,t,n){return new bv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Nv(e,t){return tv(Av(e),Av(t))&&e.limitType===t.limitType}function Dv(e){return"".concat(ev(Av(e)),"|lt:").concat(e.limitType)}function Rv(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Lp(t.value));var t})).join(", "),"]")),Ep(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Lp(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Lp(e)})).join(",")),"Target(".concat(t,")")}(Av(e)),"; limitType=").concat(e.limitType,")")}function Ov(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Rd.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=d(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=d(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=gv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Tv(e),t))&&!(e.endAt&&!function(e,t,n){var r=gv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Tv(e),t))}(e,t)}function Pv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Lv(e){return function(t,n){var r,i=!1,a=d(Tv(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Mv(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Mv(e,t,n){var r=e.field.isKeyField()?Rd.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Op(r,i):ud()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ud()}}function Fv(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sp(t)?"-0":t}}function Vv(e){return{integerValue:""+e}}function Uv(e,t){return Tp(t)?Vv(t):Fv(e,t)}var Bv=h((function e(){l(this,e),this._=void 0}));function qv(e,t,n){return e instanceof Wv?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Gv?Kv(e,t):e instanceof Hv?Qv(e,t):function(e,t){var n=jv(e,t),r=Xv(n)+Xv(e.yt);return Vp(n)&&Vp(e.yt)?Vv(r):Fv(e.It,r)}(e,t)}function zv(e,t,n){return e instanceof Gv?Kv(e,t):e instanceof Hv?Qv(e,t):n}function jv(e,t){return e instanceof Yv?Vp(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Wv=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n)}(Bv),Gv=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).elements=e,r}return h(n)}(Bv);function Kv(e,t){var n,r=Jv(t),i=d(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Dp(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Hv=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).elements=e,r}return h(n)}(Bv);function Qv(e,t){var n,r=Jv(t),i=d(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Dp(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Yv=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).It=e,i.yt=r,i}return h(n)}(Bv);function Xv(e){return gp(e.integerValue||e.doubleValue)}function Jv(e){return Up(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Zv=h((function e(t,n){l(this,e),this.field=t,this.transform=n}));var $v=h((function e(t,n){l(this,e),this.version=t,this.transformResults=n})),ey=function(){function e(t,n){l(this,e),this.updateTime=t,this.exists=n}return h(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function ty(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ny=h((function e(){l(this,e)}));function ry(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new vy(e.key,ey.none()):new sy(e.key,e.data,ey.none());var n,r=e.data,i=Yp.empty(),a=new fp(Dd.comparator),o=d(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new cy(e.key,i,new pp(a.toArray()),ey.none())}function iy(e,t,n){e instanceof sy?function(e,t,n){var r=e.value.clone(),i=fy(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof cy?function(e,t,n){if(ty(e.precondition,t)){var r=fy(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ly(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ay(e,t,n,r){return e instanceof sy?function(e,t,n,r){if(!ty(e.precondition,t))return n;var i=e.value.clone(),a=hy(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof cy?function(e,t,n,r){if(!ty(e.precondition,t))return n;var i=hy(e.fieldTransforms,r,t),a=t.data;return a.setAll(ly(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return ty(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function oy(e,t){var n,r=null,i=d(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=jv(a.transform,o||null);null!=u&&(null===r&&(r=Yp.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function uy(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&_d(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Gv&&t instanceof Gv||e instanceof Hv&&t instanceof Hv?_d(e.elements,t.elements,Dp):e instanceof Yv&&t instanceof Yv?Dp(e.yt,t.yt):e instanceof Wv&&t instanceof Wv}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var sy=function(e){y(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return l(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return h(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ny),cy=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return l(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return h(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(ny);function ly(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function fy(e,t,n){var r=new Map;sd(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,zv(o,u,n[i]))}return r}function hy(e,t,n){var r,i=new Map,a=d(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,qv(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var dy,py,vy=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return h(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ny),yy=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return h(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ny),my=h((function e(t){l(this,e),this.count=t}));function gy(e){switch(e){default:return ud();case ld.CANCELLED:case ld.UNKNOWN:case ld.DEADLINE_EXCEEDED:case ld.RESOURCE_EXHAUSTED:case ld.INTERNAL:case ld.UNAVAILABLE:case ld.UNAUTHENTICATED:return!1;case ld.INVALID_ARGUMENT:case ld.NOT_FOUND:case ld.ALREADY_EXISTS:case ld.PERMISSION_DENIED:case ld.FAILED_PRECONDITION:case ld.ABORTED:case ld.OUT_OF_RANGE:case ld.UNIMPLEMENTED:case ld.DATA_LOSS:return!0}}function ky(e){if(void 0===e)return id("GRPC error has no .code"),ld.UNKNOWN;switch(e){case dy.OK:return ld.OK;case dy.CANCELLED:return ld.CANCELLED;case dy.UNKNOWN:return ld.UNKNOWN;case dy.DEADLINE_EXCEEDED:return ld.DEADLINE_EXCEEDED;case dy.RESOURCE_EXHAUSTED:return ld.RESOURCE_EXHAUSTED;case dy.INTERNAL:return ld.INTERNAL;case dy.UNAVAILABLE:return ld.UNAVAILABLE;case dy.UNAUTHENTICATED:return ld.UNAUTHENTICATED;case dy.INVALID_ARGUMENT:return ld.INVALID_ARGUMENT;case dy.NOT_FOUND:return ld.NOT_FOUND;case dy.ALREADY_EXISTS:return ld.ALREADY_EXISTS;case dy.PERMISSION_DENIED:return ld.PERMISSION_DENIED;case dy.FAILED_PRECONDITION:return ld.FAILED_PRECONDITION;case dy.ABORTED:return ld.ABORTED;case dy.OUT_OF_RANGE:return ld.OUT_OF_RANGE;case dy.UNIMPLEMENTED:return ld.UNIMPLEMENTED;case dy.DATA_LOSS:return ld.DATA_LOSS;default:return ud()}}(py=dy||(dy={}))[py.OK=0]="OK",py[py.CANCELLED=1]="CANCELLED",py[py.UNKNOWN=2]="UNKNOWN",py[py.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",py[py.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",py[py.NOT_FOUND=5]="NOT_FOUND",py[py.ALREADY_EXISTS=6]="ALREADY_EXISTS",py[py.PERMISSION_DENIED=7]="PERMISSION_DENIED",py[py.UNAUTHENTICATED=16]="UNAUTHENTICATED",py[py.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",py[py.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",py[py.ABORTED=10]="ABORTED",py[py.OUT_OF_RANGE=11]="OUT_OF_RANGE",py[py.UNIMPLEMENTED=12]="UNIMPLEMENTED",py[py.INTERNAL=13]="INTERNAL",py[py.UNAVAILABLE=14]="UNAVAILABLE",py[py.DATA_LOSS=15]="DATA_LOSS";var by=function(){function e(t,n){l(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return h(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){op(this.inner,(function(t,n){var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return up(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),wy=new sp(Rd.comparator);function xy(){return wy}var Iy=new sp(Rd.comparator);function _y(){for(var e=Iy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Ey(e){var t=Iy;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Sy(){return Ay()}function Ty(){return Ay()}function Ay(){return new by((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Cy=new sp(Rd.comparator),Ny=new fp(Rd.comparator);function Dy(){for(var e=Ny,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Ry=new fp(Id);function Oy(){return Ry}var Py=function(){function e(t,n,r,i,a){l(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return h(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Ly.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Td.min(),r,Oy(),xy(),Dy())}}]),e}(),Ly=function(){function e(t,n,r,i,a){l(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return h(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(vp.EMPTY_BYTE_STRING,n,Dy(),Dy(),Dy())}}]),e}(),My=h((function e(t,n,r,i){l(this,e),this.Tt=t,this.removedTargetIds=n,this.key=r,this.Et=i})),Fy=h((function e(t,n){l(this,e),this.targetId=t,this.At=n})),Vy=h((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vp.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;l(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Uy=function(){function e(){l(this,e),this.Rt=0,this.bt=zy(),this.Pt=vp.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return h(e,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}},{key:"xt",value:function(){var e=Dy(),t=Dy(),n=Dy();return this.bt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ud()}})),new Ly(this.Pt,this.vt,e,t,n)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=zy()}},{key:"kt",value:function(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}},{key:"Mt",value:function(e){this.Vt=!0,this.bt=this.bt.remove(e)}},{key:"Ot",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),e}(),By=function(){function e(t){l(this,e),this.Bt=t,this.Lt=new Map,this.Ut=xy(),this.qt=qy(),this.Kt=new fp(Id)}return h(e,[{key:"Gt",value:function(e){var t,n=d(e.Tt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et)}}catch(u){n.e(u)}finally{n.f()}var i,a=d(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.jt(o,e.key,e.Et)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.zt(n);switch(e.state){case 0:t.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||t.removeTarget(n);break;case 3:t.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:t.Ht(n)&&(t.Jt(n),r.Ct(e.resumeToken));break;default:ud()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((function(e,r){n.Ht(r)&&t(r)}))}},{key:"Yt",value:function(e){var t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){var i=r.target;if(nv(i))if(0===n){var a=new Rd(i.path);this.jt(t,a,Jp.newNoDocument(a,Td.min()))}else sd(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}},{key:"te",value:function(e){var t=this,n=new Map;this.Lt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&nv(a.target)){var o=new Rd(a.target.path);null!==t.Ut.get(o)||t.ee(i,o)||t.jt(i,o,Jp.newNoDocument(o,e))}r.Dt&&(n.set(i,r.xt()),r.Nt())}}));var r=Dy();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new Py(e,n,this.Kt,this.Ut,r);return this.Ut=xy(),this.qt=qy(),this.Kt=new fp(Id),i}},{key:"Qt",value:function(e,t){if(this.Ht(e)){var n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}}},{key:"jt",value:function(e,t,n){if(this.Ht(e)){var r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Lt.delete(e)}},{key:"Zt",value:function(e){var t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.zt(e).Ot()}},{key:"zt",value:function(e){var t=this.Lt.get(e);return t||(t=new Uy,this.Lt.set(e,t)),t}},{key:"ne",value:function(e){var t=this.qt.get(e);return t||(t=new fp(Id),this.qt=this.qt.insert(e,t)),t}},{key:"Ht",value:function(e){var t=null!==this.Xt(e);return t||rd("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}},{key:"Jt",value:function(e){var t=this;this.Lt.set(e,new Uy),this.Bt.getRemoteKeysForTarget(e).forEach((function(n){t.jt(e,n,null)}))}},{key:"ee",value:function(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}]),e}();function qy(){return new sp(Rd.comparator)}function zy(){return new sp(Rd.comparator)}var jy={asc:"ASCENDING",desc:"DESCENDING"},Wy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gy=h((function e(t,n){l(this,e),this.databaseId=t,this.gt=n}));function Ky(e,t){return e.gt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Hy(e,t){return e.gt?t.toBase64():t.toUint8Array()}function Qy(e,t){return Ky(e,t.toTimestamp())}function Yy(e){return sd(!!e),Td.fromTimestamp(function(e){var t=mp(e);return new Sd(t.seconds,t.nanos)}(e))}function Xy(e,t){return function(e){return new Cd(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Jy(e){var t=Cd.fromString(e);return sd(bm(t)),t}function Zy(e,t){return Xy(e.databaseId,t.path)}function $y(e,t){var n=Jy(t);if(n.get(1)!==e.databaseId.projectId)throw new fd(ld.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new fd(ld.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Rd(rm(n))}function em(e,t){return Xy(e.databaseId,t)}function tm(e){var t=Jy(e);return 4===t.length?Cd.emptyPath():rm(t)}function nm(e){return new Cd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function rm(e){return sd(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function im(e,t,n){return{name:Zy(e,t),fields:n.value.mapValue.fields}}function am(e,t,n){var r=$y(e,t.name),i=Yy(t.updateTime),a=new Yp({mapValue:{fields:t.fields}}),o=Jp.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function om(e,t){return"found"in t?function(e,t){sd(!!t.found),t.found.name,t.found.updateTime;var n=$y(e,t.found.name),r=Yy(t.found.updateTime),i=new Yp({mapValue:{fields:t.found.fields}});return Jp.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){sd(!!t.missing),sd(!!t.readTime);var n=$y(e,t.missing),r=Yy(t.readTime);return Jp.newNoDocument(n,r)}(e,t):ud()}function um(e,t){var n;if(t instanceof sy)n={update:im(e,t.key,t.value)};else if(t instanceof vy)n={delete:Zy(e,t.key)};else if(t instanceof cy)n={update:im(e,t.key,t.data),updateMask:km(t.fieldMask)};else{if(!(t instanceof yy))return ud();n={verify:Zy(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Wv)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Gv)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Hv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Yv)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw ud()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Qy(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ud()}(e,t.precondition)),n}function sm(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ey.updateTime(Yy(e.updateTime)):void 0!==e.exists?ey.exists(e.exists):ey.none()}(t.currentDocument):ey.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)sd("REQUEST_TIME"===t.setToServerValue),n=new Wv;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Gv(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Hv(i)}else"increment"in t?n=new Yv(e,t.increment):ud();var a=Dd.fromServerFormat(t.fieldPath);return new Zv(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=$y(e,t.update.name),a=new Yp({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new pp(t.map((function(e){return Dd.fromServerFormat(e)})))}(t.updateMask);return new cy(i,a,o,n,r)}return new sy(i,a,n,r)}if(t.delete){var u=$y(e,t.delete);return new vy(u,n)}if(t.verify){var s=$y(e,t.verify);return new yy(s,n)}return ud()}function cm(e,t){return{documents:[em(e,t.path)]}}function lm(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=em(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=em(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(qp(e.value))return{unaryFilter:{field:vm(e.field),op:"IS_NAN"}};if(Bp(e.value))return{unaryFilter:{field:vm(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(qp(e.value))return{unaryFilter:{field:vm(e.field),op:"IS_NOT_NAN"}};if(Bp(e.value))return{unaryFilter:{field:vm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vm(e.field),op:pm(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:vm(e.field),direction:dm(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.gt||Ep(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function fm(e){var t=tm(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){sd(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=hm(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new yv(ym(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Ep(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new vv(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new vv(n,t)}(n.endAt)),wv(t,i,u,o,s,"F",c,l)}function hm(e){return e?void 0!==e.unaryFilter?[gm(e)]:void 0!==e.fieldFilter?[mm(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return hm(e)})).reduce((function(e,t){return e.concat(t)})):ud():[]}function dm(e){return jy[e]}function pm(e){return Wy[e]}function vm(e){return{fieldPath:e.canonicalString()}}function ym(e){return Dd.fromServerFormat(e.fieldPath)}function mm(e){return ov.create(ym(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ud()}}(e.fieldFilter.op),e.fieldFilter.value)}function gm(e){switch(e.unaryFilter.op){case"IS_NAN":var t=ym(e.unaryFilter.field);return ov.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=ym(e.unaryFilter.field);return ov.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ym(e.unaryFilter.field);return ov.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ym(e.unaryFilter.field);return ov.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ud()}}function km(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function bm(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function wm(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Im(t)),t=xm(e.get(n),t);return Im(t)}function xm(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Im(e){return e+"\x01\x01"}function _m(e){var t=e.length;if(sd(t>=2),2===t)return sd("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Cd.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&ud(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:ud()}a=o+2}return new Cd(r)}var Em=["userId","batchId"];function Sm(e,t){return[e,wm(t)]}function Tm(e,t,n){return[e,wm(t),n]}var Am={},Cm=["prefixPath","collectionGroup","readTime","documentId"],Nm=["prefixPath","collectionGroup","documentId"],Dm=["collectionGroup","readTime","prefixPath","documentId"],Rm=["canonicalId","targetId"],Om=["targetId","path"],Pm=["path","targetId"],Lm=["collectionId","parent"],Mm=["indexId","uid"],Fm=["uid","sequenceNumber"],Vm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Um=["indexId","uid","orderedDocumentKey"],Bm=["userId","collectionPath","documentId"],qm=["userId","collectionPath","largestBatchId"],zm=["userId","collectionGroup","largestBatchId"],jm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Wm=[].concat($(jm),["documentOverlays"]),Gm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Km=Gm,Hm=[].concat(Km,["indexConfiguration","indexState","indexEntries"]),Qm=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).ie=e,i.currentSequenceNumber=r,i}return h(n)}(jd);function Ym(e,t){var n=cd(e);return Qd.O(n.ie,t)}var Xm=function(){function e(t,n,r,i){l(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return h(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&iy(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=d(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=ay(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=d(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=ay(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Ty();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=ry(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Td.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Dy())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&_d(this.mutations,e.mutations,(function(e,t){return uy(e,t)}))&&_d(this.baseMutations,e.baseMutations,(function(e,t){return uy(e,t)}))}}]),e}(),Jm=function(){function e(t,n,r,i){l(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return h(e,null,[{key:"from",value:function(t,n,r){sd(t.mutations.length===r.length);for(var i=Cy,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Zm=function(){function e(t,n){l(this,e),this.largestBatchId=t,this.mutation=n}return h(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),$m=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Td.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Td.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vp.EMPTY_BYTE_STRING;l(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return h(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),eg=h((function e(t){l(this,e),this.re=t}));function tg(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ng(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Zy(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ky(e,t.version.toTimestamp())}}(e.re,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:rg(t.version)};else{if(!t.isUnknownDocument())return ud();r.unknownDocument={path:n.path.toArray(),version:rg(t.version)}}return r}function ng(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function rg(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ig(e){var t=new Sd(e.seconds,e.nanoseconds);return Td.fromTimestamp(t)}function ag(e,t){for(var n=(t.baseMutations||[]).map((function(t){return sm(e.re,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return sm(e.re,t)})),u=Sd.fromMillis(t.localWriteTimeMs);return new Xm(t.batchId,u,n,o)}function og(e){var t,n,r=ig(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?ig(e.lastLimboFreeSnapshotVersion):Td.min();return void 0!==e.query.documents?(sd(1===(n=e.query).documents.length),t=Av(xv(tm(n.documents[0])))):t=function(e){return Av(fm(e))}(e.query),new $m(t,e.targetId,0,e.lastListenSequenceNumber,r,i,vp.fromBase64String(e.resumeToken))}function ug(e,t){var n,r=rg(t.snapshotVersion),i=rg(t.lastLimboFreeSnapshotVersion);n=nv(t.target)?cm(e.re,t.target):lm(e.re,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ev(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function sg(e){var t=fm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Cv(t,t.limit,"L"):t}function cg(e,t){return new Zm(t.largestBatchId,sm(e.re,t.overlayMutation))}function lg(e,t){var n=t.path.lastSegment();return[e,wm(t.path.popLast()),n]}function fg(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:rg(r.readTime),documentKey:wm(r.documentKey.path),largestBatchId:r.largestBatchId}}var hg=function(){function e(){l(this,e)}return h(e,[{key:"getBundleMetadata",value:function(e,t){return dg(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:ig(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return dg(e).put({bundleId:(n=t).id,createTime:rg(Yy(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return pg(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:sg(t.bundledQuery),readTime:ig(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return pg(e).put(function(e){return{name:e.name,readTime:rg(Yy(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function dg(e){return Ym(e,"bundles")}function pg(e){return Ym(e,"namedQueries")}var vg=function(){function e(t,n){l(this,e),this.It=t,this.userId=n}return h(e,[{key:"getOverlay",value:function(e,t){var n=this;return yg(e).get(lg(this.userId,t)).next((function(e){return e?cg(n.It,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Sy();return Kd.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Zm(t,a);i.push(r.ue(e,o))})),Kd.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(wm(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(yg(e).Y("collectionPathOverlayIndex",i))})),Kd.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Sy(),a=wm(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return yg(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=cg(r.It,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Sy(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return yg(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=cg(a.It,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ue",value:function(e,t){return yg(e).put(function(e,t,n){var r=s(lg(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:um(e.re,n.mutation)}}(this.It,this.userId,t))}}],[{key:"oe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function yg(e){return Ym(e,"documentOverlays")}var mg=function(){function e(){l(this,e)}return h(e,[{key:"ce",value:function(e,t){this.ae(e,t),t.he()}},{key:"ae",value:function(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(gp(e.integerValue));else if("doubleValue"in e){var n=gp(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),Sp(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de("".concat(r.seconds||"")),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(kp(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?Wp(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ud()}},{key:"_e",value:function(e,t){this.le(t,25),this.Ie(e,t)}},{key:"Ie",value:function(e,t){t.de(e)}},{key:"ye",value:function(e,t){var n=e.fields||{};this.le(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this._e(a,t),this.ae(n[a],t)}}},{key:"pe",value:function(e,t){var n=e.values||[];this.le(t,50);var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ae(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ge",value:function(e,t){var n=this;this.le(t,37),Rd.fromName(e).path.forEach((function(e){n.le(t,60),n.Ie(e,t)}))}},{key:"le",value:function(e,t){e.fe(t)}},{key:"we",value:function(e){e.fe(2)}}]),e}();function gg(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function kg(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=gg(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}mg.Te=new mg;var bg=function(){function e(){l(this,e),this.buffer=new Uint8Array(1024),this.position=0}return h(e,[{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Pe(n.value),n=t.next();this.ve()}},{key:"Ve",value:function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"Se",value:function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{var a=r.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"De",value:function(e){var t=this.Ce(e),n=kg(t);this.xe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ne",value:function(e){var t=this.Ce(e),n=kg(t);this.xe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"ke",value:function(){this.Me(255),this.Me(255)}},{key:"Oe",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ce",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}},{key:"Pe",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Re",value:function(){this.Me(0),this.Me(1)}},{key:"ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Me",value:function(e){this.xe(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.xe(1),this.buffer[this.position++]=~e}},{key:"xe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),wg=function(){function e(t){l(this,e),this.Be=t}return h(e,[{key:"me",value:function(e){this.Be.Ee(e)}},{key:"de",value:function(e){this.Be.Ve(e)}},{key:"fe",value:function(e){this.Be.De(e)}},{key:"he",value:function(){this.Be.ke()}}]),e}(),xg=function(){function e(t){l(this,e),this.Be=t}return h(e,[{key:"me",value:function(e){this.Be.be(e)}},{key:"de",value:function(e){this.Be.Se(e)}},{key:"fe",value:function(e){this.Be.Ne(e)}},{key:"he",value:function(){this.Be.Oe()}}]),e}(),Ig=function(){function e(){l(this,e),this.Be=new bg,this.Le=new wg(this.Be),this.Ue=new xg(this.Be)}return h(e,[{key:"seed",value:function(e){this.Be.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Le:this.Ue}},{key:"$e",value:function(){return this.Be.$e()}},{key:"reset",value:function(){this.Be.reset()}}]),e}(),_g=function(){function e(t,n,r,i){l(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return h(e,[{key:"Ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Eg(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Sg(e.arrayValue,t.arrayValue))?n:0!==(n=Sg(e.directionalValue,t.directionalValue))?n:Rd.comparator(e.documentKey,t.documentKey)}function Sg(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Tg=function(){function e(t){l(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];var n,r=d(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.dt()?this.je=i:this.Qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return h(e,[{key:"We",value:function(e){var t=Pd(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=Ld(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.je){var a=n[r];if(!this.He(this.je,a)||!this.Je(this.Ge[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ge.length||!this.Je(this.Ge[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=d(this.Qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.He(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"He",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Je",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Ag=function(){function e(){l(this,e),this.Ye=new Cg}return h(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ye.add(t),Kd.resolve()}},{key:"getCollectionParents",value:function(e,t){return Kd.resolve(this.Ye.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Kd.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Kd.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Kd.resolve(null)}},{key:"getIndexType",value:function(e,t){return Kd.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Kd.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Kd.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Kd.resolve(Bd.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Kd.resolve(Bd.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Kd.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Kd.resolve()}}]),e}(),Cg=function(){function e(){l(this,e),this.index={}}return h(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new fp(Cd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new fp(Cd.comparator)).toArray()}}]),e}(),Ng=new Uint8Array(0),Dg=function(){function e(t,n){l(this,e),this.user=t,this.databaseId=n,this.Xe=new Cg,this.Ze=new by((function(e){return ev(e)}),(function(e,t){return tv(e,t)})),this.uid=t.uid||""}return h(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:wm(i)};return Rg(e).put(a)}return Kd.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ed(t),""],!1,!0);return Rg(e).W(r).next((function(e){var r,i=d(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(_m(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Pg(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Lg(e);return a.next((function(e){o.put(fg(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Pg(e),r=Lg(e),i=Og(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Og(e),i=!0,a=new Map;return Kd.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Dy(),o=[];return Kd.forEach(a,(function(i,a){var u;rd("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(ev(t)));var s=function(e,t){var n=Pd(t);if(void 0===n)return null;var r,i=d(rv(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=d(Ld(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=d(rv(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=d(Ld(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?iv(e,o.fieldPath,e.startAt):av(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new vv(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=d(Ld(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?av(e,o.fieldPath,e.endAt):iv(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new vv(r,i)}(a,i),h=n.nn(i,a,l),p=n.nn(i,a,f),v=n.sn(i,a,c),y=n.rn(i.indexId,s,h,l.inclusive,p,f.inclusive,v);return Kd.forEach(y,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=Rd.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Kd.resolve(null)}))}},{key:"tn",value:function(e){var t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}},{key:"rn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.on(t[s/c]):Ng,h=u.un(e,f,n[s%c],r),d=u.cn(e,f,i[s%c],a),p=o.map((function(t){return u.un(e,f,t,!0)}));l.push.apply(l,$(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"un",value:function(e,t,n,r){var i=new _g(e,Rd.empty(),t,n);return r?i:i.Ke()}},{key:"cn",value:function(e,t,n,r){var i=new _g(e,Rd.empty(),t,n);return r?i.Ke():i}},{key:"en",value:function(e,t){var n=new Tg(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Kd.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new fp(Dd.comparator),r=!1,i=d(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=d(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"an",value:function(e,t){var n,r=new Ig,i=d(Ld(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);mg.Te.ce(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"on",value:function(e){var t=new Ig;return mg.Te.ce(e,t.qe(0)),t.$e()}},{key:"hn",value:function(e,t){var n=new Ig;return mg.Te.ce(Fp(this.databaseId,t),n.qe(function(e){var t=Ld(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"sn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Ig);var i,a=0,o=d(Ld(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=d(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.ln(t,s.fieldPath)&&Up(c))r=this.fn(r,s,c);else{var h=f.qe(s.kind);mg.Te.ce(c,h)}}}catch(p){l.e(p)}finally{l.f()}}}catch(p){o.e(p)}finally{o.f()}return this.dn(r)}},{key:"nn",value:function(e,t,n){return this.sn(e,t,n.position)}},{key:"dn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"fn",value:function(e,t,n){var r,i=$(e),a=[],o=d(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=d(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Ig;f.seed(l.$e()),mg.Te.ce(s,f.qe(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"ln",value:function(e,t){return!!e.filters.find((function(e){return e instanceof ov&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Pg(e),i=Lg(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return Kd.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Fd(t.sequenceNumber,new Bd(ig(t.readTime),new Rd(_m(t.documentKey)),t.largestBatchId)):Fd.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new Md(Dd.fromServerFormat(n),r)}));return new Od(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Id(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Pg(e),a=Lg(e);return this._n(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Kd.forEach(t,(function(t){return a.put(fg(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Kd.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Kd.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Kd.forEach(a,(function(r){return n.wn(e,t,r).next((function(t){var a=n.mn(i,r);return t.isEqual(a)?Kd.resolve():n.gn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return Og(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"pn",value:function(e,t,n,r){return Og(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(n,t.key),t.key.path.toArray()])}},{key:"wn",value:function(e,t,n){var r=Og(e),i=new fp(Eg);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.hn(n,t)])},(function(e,r){i=i.add(new _g(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"mn",value:function(e,t){var n=new fp(Eg),r=this.an(t,e);if(null==r)return n;var i=Pd(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Up(a)){var o,u=d(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new _g(t.indexId,e.key,this.on(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new _g(t.indexId,e.key,Ng,r));return n}},{key:"gn",value:function(e,t,n,r,i){var a=this;rd("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=dp(a),s=dp(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=dp(o)):l?(i(u),u=dp(a)):(u=dp(a),s=dp(o))}}(r,i,Eg,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.pn(e,t,n,r))})),Kd.waitFor(o)}},{key:"_n",value:function(e){var t=1;return Lg(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Eg(e,t)})).filter((function(e,t,n){return!t||0!==Eg(e,n[t-1])}));var r=[];r.push(e);var i,a=d(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Eg(o,e),s=Eg(o,t);if(0===u)r[0]=e.Ke();else if(u>0&&s<0)r.push(o),r.push(o.Ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Ng,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Ng,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Mg)}},{key:"getMinOffset",value:function(e,t){var n=this;return Kd.mapArray(this.tn(t),(function(t){return n.en(e,t).next((function(e){return e||ud()}))})).next(Mg)}}]),e}();function Rg(e){return Ym(e,"collectionParents")}function Og(e){return Ym(e,"indexEntries")}function Pg(e){return Ym(e,"indexConfiguration")}function Lg(e){return Ym(e,"indexState")}function Mg(e){sd(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;qd(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Bd(t.readTime,t.documentKey,n)}var Fg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vg=function(){function e(t,n,r){l(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return h(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Ug(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){sd(1===u)})));var c,l=[],f=d(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,p=Tm(t,h.key.path,n.batchId);a.push(i.delete(p)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return Kd.waitFor(a).next((function(){return l}))}function Bg(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ud();t=e.noDocument}return JSON.stringify(t).length}Vg.DEFAULT_COLLECTION_PERCENTILE=10,Vg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vg.DEFAULT=new Vg(41943040,Vg.DEFAULT_COLLECTION_PERCENTILE,Vg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vg.DISABLED=new Vg(-1,0,0);var qg=function(){function e(t,n,r,i){l(this,e),this.userId=t,this.It=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return h(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jg(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Wg(e),o=jg(e);return o.add({}).next((function(u){sd("number"==typeof u);var s,c=new Xm(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return um(e.re,t)})),i=n.mutations.map((function(t){return um(e.re,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.It,i.userId,c),f=[],h=new fp((function(e,t){return Id(e.canonicalString(),t.canonicalString())})),p=d(r);try{for(p.s();!(s=p.n()).done;){var v=s.value,y=Tm(i.userId,v.key.path,u);h=h.add(v.key.path.popLast()),f.push(o.put(l)),f.push(a.put(y,Am))}}catch(m){p.e(m)}finally{p.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),Kd.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return jg(e).get(t).next((function(e){return e?(sd(e.userId===n.userId),ag(n.It,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?Kd.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return jg(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(sd(t.batchId>=r),a=ag(n.It,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return jg(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jg(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return ag(t.It,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Sm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Wg(e).Z({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=_m(l);if(c===n.userId&&t.path.isEqual(h))return jg(e).get(f).next((function(e){if(!e)throw ud();sd(e.userId===n.userId),a.push(ag(n.It,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new fp(Id),i=[];return t.forEach((function(t){var a=Sm(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Wg(e).Z({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=_m(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Kd.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Sm(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new fp(Id);return Wg(e).Z({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=_m(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(jg(e).get(t).next((function(e){if(null===e)throw ud();sd(e.userId===n.userId),r.push(ag(n.It,e))})))})),Kd.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Ug(e.ie,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),Kd.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Kd.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Wg(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=_m(e[1]);i.push(a)}else r.done()})).next((function(){sd(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return zg(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return Gg(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"oe",value:function(t,n,r,i){return sd(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function zg(e,t,n){var r=Sm(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Wg(e).Z({range:a,X:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function jg(e){return Ym(e,"mutations")}function Wg(e){return Ym(e,"documentMutations")}function Gg(e){return Ym(e,"mutationQueues")}var Kg=function(){function e(t){l(this,e),this.bn=t}return h(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),Hg=function(){function e(t,n){l(this,e),this.referenceDelegate=t,this.It=n}return h(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new Kg(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return Td.fromTimestamp(new Sd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Qg(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return sd(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Qg(e).Z((function(o,u){var s=og(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Kd.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Qg(e).Z((function(e,n){var r=og(n);t(r)}))}},{key:"Vn",value:function(e){return Yg(e).get("targetGlobalKey").next((function(e){return sd(null!==e),e}))}},{key:"Sn",value:function(e,t){return Yg(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return Qg(e).put(ug(this.It,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=ev(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Qg(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=og(n);tv(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Xg(e);return t.forEach((function(t){var o=wm(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Kd.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Xg(e);return Kd.forEach(t,(function(t){var a=wm(t.path);return Kd.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Xg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Xg(e),i=Dy();return r.Z({range:n,X:!0},(function(e,t,n){var r=_m(e[1]),a=new Rd(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=wm(t.path),r=IDBKeyRange.bound([n],[Ed(n)],!1,!0),i=0;return Xg(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"se",value:function(e,t){return Qg(e).get(t).next((function(e){return e?og(e):null}))}}]),e}();function Qg(e){return Ym(e,"targets")}function Yg(e){return Ym(e,"targetGlobal")}function Xg(e){return Ym(e,"targetDocuments")}function Jg(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=Id(r,o);return 0===c?Id(i,u):c}var Zg=function(){function e(t){l(this,e),this.xn=t,this.buffer=new fp(Jg),this.Nn=0}return h(e,[{key:"kn",value:function(){return++this.Nn}},{key:"Mn",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Jg(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),$g=function(){function e(t,n,r){l(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.On=null}return h(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.On&&(this.On.cancel(),this.On=null)}},{key:"started",get:function(){return null!==this.On}},{key:"Fn",value:function(e){var t=this;rd("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.On=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Jd(e.t0)){e.next=12;break}rd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Wd(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),ek=function(){function e(t,n){l(this,e),this.$n=t,this.params=n}return h(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Kd.resolve(ip.at);var r=new Zg(t);return this.$n.forEachTarget(e,(function(e){return r.Mn(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.Mn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(rd("LruGarbageCollector","Garbage collection skipped; disabled"),Kd.resolve(Fg)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(rd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Fg):n.Un(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"Un",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(rd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),nd()<=oe.DEBUG&&rd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Kd.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),tk=function(){function e(t,n){l(this,e),this.db=t,this.garbageCollector=function(e,t){return new ek(e,t)}(this,n)}return h(e,[{key:"Bn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return nk(e,n)}},{key:"removeReference",value:function(e,t,n){return nk(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return nk(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return Gg(e).tt((function(r){return zg(e,r,t).next((function(e){return e&&(n=!0),Kd.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Td.min()),Xg(e).delete([0,wm(o.path)])}))}));i.push(s)}})).next((function(){return Kd.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return nk(e,t)}},{key:"Kn",value:function(e,t){var n,r=Xg(e),i=ip.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==ip.at&&t(new Rd(_m(n)),i),i=c,n=u):i=ip.at})).next((function(){i!==ip.at&&t(new Rd(_m(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function nk(e,t){return Xg(e).put(function(e,t){return{targetId:0,path:wm(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var rk=function(){function e(){l(this,e),this.changes=new by((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return h(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Jp.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Kd.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),ik=function(){function e(t){l(this,e),this.It=t}return h(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return sk(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return sk(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],ng(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Jp.newInvalidDocument(t);return sk(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ck(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:Jp.newInvalidDocument(t)};return sk(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ck(t))},(function(e,i){r={document:n.jn(t,i),size:Bg(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=xy();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=xy(),i=new sp(Rd.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,Bg(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return Kd.resolve();var r=new fp(fk);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(ck(r.first()),ck(r.last())),a=r.getIterator(),o=a.getNext();return sk(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Rd.fromSegments([].concat($(t.prefixPath),[t.collectionGroup,t.documentId]));o&&fk(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(ck(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),ng(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sk(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=xy(),i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(Rd.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=xy(),o=lk(t,n),u=lk(t,Bd.max());return sk(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(Rd.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new ok(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return uk(e).get("remoteDocumentGlobalKey").next((function(e){return sd(!!e),e}))}},{key:"Qn",value:function(e,t){return uk(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=am(e.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Rd.fromSegments(t.noDocument.path),i=ig(t.noDocument.readTime);n=Jp.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ud();var a=Rd.fromSegments(t.unknownDocument.path),o=ig(t.unknownDocument.version);n=Jp.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Sd(e[0],e[1]);return Td.fromTimestamp(t)}(t.readTime)),n}(this.It,t);if(!n.isNoDocument()||!n.version.isEqual(Td.min()))return n}return Jp.newInvalidDocument(e)}}]),e}();function ak(e){return new ik(e)}var ok=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new by((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return h(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new fp((function(e,t){return Id(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=tg(t.Yn.It,o);i=i.add(a.path.popLast());var c=Bg(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=tg(t.Yn.It,o.convertToNoDocument(Td.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),Kd.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(rk);function uk(e){return Ym(e,"remoteDocumentGlobal")}function sk(e){return Ym(e,"remoteDocumentsV14")}function ck(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function lk(e,t){var n=t.documentKey.path.toArray();return[e,ng(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function fk(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Id(n[a],r[a]))return i;return(i=Id(n.length,r.length))||((i=Id(n[n.length-2],r[r.length-2]))||Id(n[n.length-1],r[r.length-1]))}var hk=h((function e(t,n){l(this,e),this.overlayedDocument=t,this.mutatedFields=n})),dk=function(){function e(t,n,r,i){l(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return h(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&ay(r.mutation,e,pp.empty(),Sd.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Dy()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dy(),i=Sy();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=_y();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Sy();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Dy())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=xy(),a=Ay(),o=Ay();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof cy)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),ay(o.mutation,t,o.mutation.getFieldMask(),Sd.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new hk(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Ay(),i=new sp((function(e,t){return e-t})),a=Dy();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=d(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||pp.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Dy()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Ty();c.forEach((function(e){if(!a.has(e)){var n=ry(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Kd.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Rd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Sv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Kd.resolve(Sy()),u=-1,s=a;return o.next((function(t){return Kd.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Kd.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Dy())})).next((function(e){return{batchId:u,changes:Ey(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Rd(t)).next((function(e){var t=_y();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=_y();return this.indexManager.getCollectionParents(e,i).next((function(o){return Kd.forEach(o,(function(o){var u=function(e,t){return new bv(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Jp.newInvalidDocument(n)))}));var n=_y();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&ay(a.mutation,i,pp.empty(),Sd.now()),Ov(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Kd.resolve(Jp.newInvalidDocument(t))}}]),e}(),pk=function(){function e(t){l(this,e),this.It=t,this.Zn=new Map,this.ts=new Map}return h(e,[{key:"getBundleMetadata",value:function(e,t){return Kd.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Yy(n.createTime)}),Kd.resolve()}},{key:"getNamedQuery",value:function(e,t){return Kd.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:sg(e.bundledQuery),readTime:Yy(e.readTime)}}(t)),Kd.resolve()}}]),e}(),vk=function(){function e(){l(this,e),this.overlays=new sp(Rd.comparator),this.es=new Map}return h(e,[{key:"getOverlay",value:function(e,t){return Kd.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Sy();return Kd.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ue(e,t,i)})),Kd.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),Kd.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Sy(),i=t.length+1,a=new Rd(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Kd.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new sp((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Sy(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Sy(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Kd.resolve(s)}},{key:"ue",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Zm(t,n));var a=this.es.get(t);void 0===a&&(a=Dy(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),yk=function(){function e(){l(this,e),this.ns=new fp(mk.ss),this.rs=new fp(mk.os)}return h(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new mk(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new mk(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new Rd(new Cd([])),r=new mk(n,e),i=new mk(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new Rd(new Cd([])),n=new mk(t,e),r=new mk(t,e+1),i=Dy();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new mk(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),mk=function(){function e(t,n){l(this,e),this.key=t,this._s=n}return h(e,null,[{key:"ss",value:function(e,t){return Rd.comparator(e.key,t.key)||Id(e._s,t._s)}},{key:"os",value:function(e,t){return Id(e._s,t._s)||Rd.comparator(e.key,t.key)}}]),e}(),gk=function(){function e(t,n){l(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new fp(mk.ss)}return h(e,[{key:"checkEmpty",value:function(e){return Kd.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Xm(i,t,n,r);this.mutationQueue.push(a);var o,u=d(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new mk(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Kd.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Kd.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return Kd.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Kd.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Kd.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new mk(t,0),i=new mk(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),Kd.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new fp(Id);return t.forEach((function(e){var t=new mk(e,0),i=new mk(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),Kd.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Rd.isDocumentKey(i)||(i=i.child(""));var a=new mk(new Rd(i),0),o=new fp(Id);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),Kd.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;sd(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return Kd.forEach(t.mutations,(function(i){var a=new mk(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new mk(t,0),r=this.gs.firstAfterOrEqual(n);return Kd.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Kd.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),kk=function(){function e(t){l(this,e),this.Es=t,this.docs=new sp(Rd.comparator),this.size=0}return h(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Kd.resolve(n?n.document.mutableCopy():Jp.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=xy();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Jp.newInvalidDocument(e))})),Kd.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=xy(),i=new Rd(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||qd(Ud(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Kd.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){ud()}},{key:"As",value:function(e,t){return Kd.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new bk(this)}},{key:"getSize",value:function(e){return Kd.resolve(this.size)}}]),e}(),bk=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).Yn=e,r}return h(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),Kd.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(rk),wk=function(){function e(t){l(this,e),this.persistence=t,this.Rs=new by((function(e){return ev(e)}),tv),this.lastRemoteSnapshotVersion=Td.min(),this.highestTargetId=0,this.bs=0,this.Ps=new yk,this.targetCount=0,this.vs=Kg.Pn()}return h(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),Kd.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Kd.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Kd.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),Kd.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Kd.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new Kg(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,Kd.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),Kd.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Kd.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Kd.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Kd.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return Kd.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),Kd.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Kd.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),Kd.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return Kd.resolve(n)}},{key:"containsKey",value:function(e,t){return Kd.resolve(this.Ps.containsKey(t))}}]),e}(),xk=function(){function e(t,n){var r=this;l(this,e),this.Vs={},this.overlays={},this.Ss=new ip(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new wk(this),this.indexManager=new Ag,this.remoteDocumentCache=new kk((function(e){return r.referenceDelegate.xs(e)})),this.It=new eg(n),this.Ns=new pk(this.It)}return h(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new vk,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new gk(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;rd("MemoryPersistence","Starting transaction:",e);var i=new Ik(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Ms(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return Kd.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Ik=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return h(n)}(jd),_k=function(){function e(t){l(this,e),this.persistence=t,this.Fs=new yk,this.$s=null}return h(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw ud()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),Kd.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),Kd.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),Kd.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Ms",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Kd.forEach(this.Ls,(function(r){var i=Rd.fromPath(r);return t.Us(e,i).next((function(e){e||n.removeEntry(i,Td.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Us(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"Us",value:function(e,t){var n=this;return Kd.or([function(){return Kd.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),Ek=function(){function e(t){l(this,e),this.It=t}return h(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new Hd("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Em,{unique:!0}),e.createObjectStore("documentMutations")}(e),Sk(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Kd.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Sk(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Td.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Em,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Kd.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Bm});t.createIndex("collectionPathOverlayIndex",qm,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",zm,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Cm});t.createIndex("documentKeyIndex",Nm),t.createIndex("collectionGroupIndex",Dm)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Mm}).createIndex("sequenceNumberIndex",Fm,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Vm}).createIndex("documentKeyIndex",Um,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=Bg(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return Kd.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return Kd.forEach(r,(function(r){sd(r.userId===n.userId);var i=ag(t.It,r);return Ug(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new Cd(n),o=function(e){return[0,wm(e)]}(a);r.push(t.get(o).next((function(n){return n?Kd.resolve():function(n){return t.put({targetId:0,path:wm(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Kd.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Lm});var n=t.store("collectionParents"),r=new Cg,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:wm(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new Cd(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],_m(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=og(r),a=ug(t.It,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Rd(Cd.fromString(i.document.name).popFirst(5)):i.noDocument?Rd.fromSegments(i.noDocument.path):i.unknownDocument?Rd.fromSegments(i.unknownDocument.path):ud()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Kd.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=ak(this.It),a=new xk(_k.Bs,this.It.re);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Dy();ag(n.It,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Kd.forEach(r,(function(e,r){var o=new $h(r),u=vg.oe(n.It,o),s=a.getIndexManager(o),c=qg.oe(o,n.It,s,a.referenceDelegate);return new dk(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Qm(t,ip.at),e).next()}))}))}}]),e}();function Sk(e){e.createObjectStore("targetDocuments",{keyPath:Om}).createIndex("documentTargetsIndex",Pm,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Rm,{unique:!0}),e.createObjectStore("targetGlobal")}var Tk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ak=function(){function e(t,n,r,i,a,o,u,s,c,f){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(l(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=f,this.Xs=h,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new fd(ld.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tk(this,i),this.ii=n+"main",this.It=new eg(s),this.ri=new Qd(this.ii,this.Xs,new Ek(this.It)),this.Cs=new Hg(this.referenceDelegate,this.It),this.remoteDocumentCache=ak(this.It),this.Ns=new hg,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===f&&id("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return h(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new fd(ld.FAILED_PRECONDITION,Tk);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new ip(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=te(J().mark((function n(r){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=te(J().mark((function t(n){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Nk(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Jd(t))return rd("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return rd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return Ck(e).get("owner").next((function(e){return Kd.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return Nk(e).delete(this.clientId)}},{key:"yi",value:function(){var e=te(J().mark((function e(){var t,n,r,i,a=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Ym(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Kd.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=d(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?Kd.resolve(!0):Ck(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new fd(ld.FAILED_PRECONDITION,Tk);return!1}}return!(!t.networkEnabled||!t.inForeground)||Nk(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&rd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=te(J().mark((function e(){var t=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Qm(e,ip.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Nk(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return qg.oe(e,this.It,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Dg(e,this.It.re.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return vg.oe(this.It,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;rd("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?Hm:14===i?Km:13===i?Gm:12===i?Wm:11===i?jm:void ud();return this.ri.runTransaction(e,o,u,(function(i){return a=new Qm(i,r.Ss?r.Ss.next():ip.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw id("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new fd(ld.FAILED_PRECONDITION,zd);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return Ck(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new fd(ld.FAILED_PRECONDITION,Tk)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ck(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=Ck(e);return n.get("owner").next((function(e){return t.mi(e)?(rd("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Kd.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(id("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!R()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return rd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return id("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(oc){id("Failed to set zombie client id.",oc)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(oc){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return Qd.C()}}]),e}();function Ck(e){return Ym(e,"owner")}function Nk(e){return Ym(e,"clientMetadata")}function Dk(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Rk=function(){function e(t,n,r,i){l(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return h(e,null,[{key:"Ci",value:function(t,n){var r,i=Dy(),a=Dy(),o=d(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Ok=function(){function e(){l(this,e),this.xi=!1}return h(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Mi(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(Iv(t))return Kd.resolve(null);var r=Av(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Cv(t,null,"F"),r=Av(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Dy.apply(void 0,$(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,Cv(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Mi",value:function(e,t,n,r){var i=this;return Iv(t)||r.isEqual(Td.min())?this.Oi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Oi(e,t):(nd()<=oe.DEBUG&&rd("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Rv(t)),i.Bi(e,o,t,Vd(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new fp(Lv(e));return t.forEach((function(t,r){Ov(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return nd()<=oe.DEBUG&&rd("QueryEngine","Using full collection scan to execute query:",Rv(t)),this.Ni.getDocumentsMatchingQuery(e,t,Bd.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Pk=function(){function e(t,n,r,i){l(this,e),this.persistence=t,this.Li=n,this.It=i,this.Ui=new sp(Id),this.qi=new by((function(e){return ev(e)}),tv),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return h(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dk(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ui)}))}}]),e}();function Lk(e,t,n,r){return new Pk(e,t,n,r)}function Mk(e,t){return Fk.apply(this,arguments)}function Fk(){return Fk=te(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cd(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Dy(),s=d(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=d(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var p,v=d(n);try{for(v.s();!(p=v.n()).done;){var y=p.value;o.push(y.batchId);var m,g=d(y.mutations);try{for(g.s();!(m=g.n()).done;){var k=m.value;u=u.add(k.key)}}catch(b){g.e(b)}finally{g.f()}}}catch(b){v.e(b)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Fk.apply(this,arguments)}function Vk(e,t){var n=cd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Kd.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);sd(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Dy(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Uk(e){var t=cd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function Bk(e,t){var n=cd(e),r=t.snapshotVersion,i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(vp.EMPTY_BYTE_STRING,Td.min()).withLastLimboFreeSnapshotVersion(Td.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=xy(),s=Dy();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(qk(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(Td.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Kd.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ui=i,e}))}function qk(e,t,n){var r=Dy(),i=Dy();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=xy();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Td.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):rd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function zk(e,t){var n=cd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function jk(e,t){var n=cd(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,Kd.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new $m(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function Wk(e,t,n){return Gk.apply(this,arguments)}function Gk(){return Gk=te(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=cd(t),a=i.Ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Jd(e.t1)){e.next=12;break}throw e.t1;case 12:rd("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ui=i.Ui.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Gk.apply(this,arguments)}function Kk(e,t,n){var r=cd(e),i=Td.min(),a=Dy();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=cd(e),i=r.qi.get(n);return void 0!==i?Kd.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,Av(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:Td.min(),n?a:Dy())})).next((function(e){return Yk(r,Pv(t),e),{documents:e,Hi:a}}))}))}function Hk(e,t){var n=cd(e),r=cd(n.Cs),i=n.Ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.se(e,t).next((function(e){return e?e.target:null}))}))}function Qk(e,t){var n=cd(e),r=n.Ki.get(t)||Td.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,Vd(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Yk(n,t,e),e}))}function Yk(e,t,n){var r=Td.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function Xk(e,t,n,r){return Jk.apply(this,arguments)}function Jk(){return Jk=te(J().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,p,v;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=cd(t),o=Dy(),u=xy(),s=d(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Ji(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(f,h)}catch(y){s.e(y)}finally{s.f()}return p=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,jk(a,function(e){return Av(xv(Cd.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return qk(e,p,u).next((function(t){return p.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),Jk.apply(this,arguments)}function Zk(e,t){return $k.apply(this,arguments)}function $k(){return $k=te(J().mark((function e(t,n){var r,i,a,o=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Dy(),e.next=3,jk(t,Av(sg(n.bundledQuery)));case 3:return i=e.sent,a=cd(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Yy(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(vp.EMPTY_BYTE_STRING,t);return a.Ui=a.Ui.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),$k.apply(this,arguments)}function eb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function tb(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function nb(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var rb=function(){function e(t,n,r,i){l(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return h(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new fd(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(id("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),ib=function(){function e(t,n,r){l(this,e),this.targetId=t,this.state=n,this.error=r}return h(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new fd(i.error.code,i.error.message))),a?new e(t,i.state,r):(id("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),ab=function(){function e(t,n){l(this,e),this.clientId=t,this.activeTargetIds=n}return h(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Oy(),o=0;i&&o<r.activeTargetIds.length;++o)i=Tp(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(id("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),ob=function(){function e(t,n){l(this,e),this.clientId=t,this.onlineState=n}return h(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(id("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),ub=function(){function e(){l(this,e),this.activeTargetIds=Oy()}return h(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),sb=function(){function e(t,n,r,i,a){l(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new sp(Id),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=eb(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new ub),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return h(e,[{key:"start",value:function(){var e=te(J().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=d(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(eb(this.persistenceKey,i)))&&(o=ab.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=d(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.rr(f)}catch(p){c.e(p)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(nb(this.persistenceKey,e));if(n){var r=ib.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(nb(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return rd("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){rd("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){rd("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(rd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void id("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(te(J().mark((function e(){var r,i,a,o,u,s,c;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=ip.at;if(null!=e)try{var n=JSON.parse(e);sd("number"==typeof n),t=n}catch(e){id("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==ip.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Mr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Or(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new rb(this.currentUser,e,t,n),i=tb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=tb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=nb(this.persistenceKey,e),i=new ib(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return ab.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return rb.Zi(new $h(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return ib.Zi(r,t)}},{key:"yr",value:function(e){return ob.Zi(e)}},{key:"Mr",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:rd("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=Oy();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),cb=function(){function e(){l(this,e),this.Lr=new ub,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return h(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.Ur[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ur[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ur[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new ub,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),lb=function(){function e(){l(this,e)}return h(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),fb=function(){function e(){var t=this;l(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return h(e,[{key:"qr",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){rd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=d(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){rd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=d(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),hb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},db=function(){function e(t){l(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return h(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),pb=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return h(n,[{key:"lo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Jh;o.listenOnce(Kh.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Gh.NO_ERROR:var t=o.getResponseJson();rd("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Gh.TIMEOUT:rd("Connection",'RPC "'+e+'" timed out'),a(new fd(ld.DEADLINE_EXCEEDED,"Request time out"));break;case Gh.HTTP_ERROR:var n=o.getStatus();if(rd("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(ld).indexOf(t)>=0?t:ld.UNKNOWN}(r.status);a(new fd(u,r.message))}else a(new fd(ld.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new fd(ld.UNAVAILABLE,"Connection failed."));break;default:ud()}}finally{rd("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"_o",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=jh(),a=Wh(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Yh({})),this.ho(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");rd("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new db({Hr:function(e){l?rd("Connection","Not sending because WebChannel is closed:",e):(c||(rd("Connection","Opening WebChannel transport."),s.open(),c=!0),rd("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Xh.EventType.OPEN,(function(){l||rd("Connection","WebChannel transport opened.")})),h(s,Xh.EventType.CLOSE,(function(){l||(l=!0,rd("Connection","WebChannel transport closed"),f.io())})),h(s,Xh.EventType.ERROR,(function(e){l||(l=!0,ad("Connection","WebChannel transport errored:",e),f.io(new fd(ld.UNAVAILABLE,"The operation could not be completed")))})),h(s,Xh.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];sd(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){rd("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=dy[e];if(void 0!==t)return ky(t)}(a),u=i.message;void 0===o&&(o=ld.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new fd(o,u)),s.close()}else rd("Connection","WebChannel received:",n),f.ro(n)}})),h(a,Hh.STAT_EVENT,(function(e){e.stat===Qh.PROXY?rd("Connection","Detected buffering proxy"):e.stat===Qh.NOPROXY&&rd("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){l(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return h(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ao(e,t);rd("RestConnection","Sending: ",a,n);var o={};return this.ho(o,r,i),this.lo(e,a,o,n).then((function(e){return rd("RestConnection","Received: ",e),e}),(function(t){throw ad("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,a){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ed,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=hb[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function vb(){return"undefined"!=typeof window?window:null}function yb(){return"undefined"!=typeof document?document:null}function mb(e){return new Gy(e,!0)}var gb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;l(this,e),this.Hs=t,this.timerId=n,this.wo=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return h(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&rd("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}},{key:"bo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),kb=function(){function e(t,n,r,i,a,o,u,s){l(this,e),this.Hs=t,this.Po=r,this.vo=i,this.Vo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new gb(t,n)}return h(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Mo()}},{key:"stop",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.Uo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===ld.RESOURCE_EXHAUSTED?(id(n.toString()),id("Using maximum backoff delay to prevent overloading the backend."),this.xo.Eo()):n&&n.code===ld.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new fd(ld.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Mo",value:function(){var e=this;this.state=5,this.xo.Ao(te(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return rd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(rd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),bb=function(e){y(n,e);var t=w(n);function n(e,r,i,a,o,u){var s;return l(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).It=o,s}return h(n,[{key:"jo",value:function(e,t){return this.Vo._o("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ud()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.gt?(sd(void 0===t||"string"==typeof t),vp.fromBase64String(t||"")):(sd(void 0===t||t instanceof Uint8Array),vp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?ld.UNKNOWN:ky(e.code);return new fd(t,e.message||"")}(o);n=new Vy(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=$y(e,s.document.name),l=Yy(s.document.updateTime),f=new Yp({mapValue:{fields:s.document.fields}}),h=Jp.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new My(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=$y(e,v.document),m=v.readTime?Yy(v.readTime):Td.min(),g=Jp.newNoDocument(y,m),k=v.removedTargetIds||[];n=new My([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=$y(e,b.document),x=b.removedTargetIds||[];n=new My([],x,w,null)}else{if(!("filter"in t))return ud();t.filter;var I=t.filter;I.targetId;var _=I.count||0,E=new my(_),S=I.targetId;n=new Fy(S,E)}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return Td.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Td.min():t.readTime?Yy(t.readTime):Td.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=nm(this.It),t.addTarget=function(e,t){var n,r=t.target;return(n=nv(r)?{documents:cm(e,r)}:{query:lm(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Hy(e,t.resumeToken):t.snapshotVersion.compareTo(Td.min())>0&&(n.readTime=Ky(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ud()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=nm(this.It),t.removeTarget=e,this.Bo(t)}}]),n}(kb),wb=function(e){y(n,e);var t=w(n);function n(e,r,i,a,o,u){var s;return l(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).It=o,s.Jo=!1,s}return h(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,Ct(m(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.Vo._o("Write",e,t)}},{key:"onMessage",value:function(e){if(sd(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(sd(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Yy(e.updateTime):Yy(t);return n.isEqual(Td.min())&&(n=Yy(t)),new $v(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Yy(e.commitTime);return this.listener.Zo(n,t)}return sd(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=nm(this.It),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return um(t.It,e)}))};this.Bo(n)}}]),n}(kb),xb=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.Vo=i,o.It=a,o.nu=!1,o}return h(n,[{key:"su",value:function(){if(this.nu)throw new fd(ld.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.Vo.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ld.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new fd(ld.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],c=o[1];return i.Vo.fo(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ld.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new fd(ld.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return h((function e(){l(this,e)}))}()),Ib=function(){function e(t,n){l(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return h(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(id(t),this.ou=!1):rd("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),_b=h((function e(t,n,r,i,a){var o=this;l(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr((function(e){r.enqueueAndForget(te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Lb(o),!e.t0){e.next=5;break}return rd("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=cd(t))._u.add(4),e.next=4,Tb(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,Eb(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new Ib(r,i)}));function Eb(e){return Sb.apply(this,arguments)}function Sb(){return Sb=te(J().mark((function e(t){var n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Lb(t)){e.next=18;break}n=d(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Sb.apply(this,arguments)}function Tb(e){return Ab.apply(this,arguments)}function Ab(){return Ab=te(J().mark((function e(t){var n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Ab.apply(this,arguments)}function Cb(e,t){var n=cd(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),Pb(n)?Ob(n):lw(n).ko()&&Db(n,t))}function Nb(e,t){var n=cd(e),r=lw(n);n.du.delete(t),r.ko()&&Rb(n,t),0===n.du.size&&(r.ko()?r.Fo():Lb(n)&&n.gu.set("Unknown"))}function Db(e,t){e.yu.Ot(t.targetId),lw(e).zo(t)}function Rb(e,t){e.yu.Ot(t),lw(e).Ho(t)}function Ob(e){e.yu=new By({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},se:function(t){return e.du.get(t)||null}}),lw(e).start(),e.gu.uu()}function Pb(e){return Lb(e)&&!lw(e).No()&&e.du.size>0}function Lb(e){return 0===cd(e)._u.size}function Mb(e){e.yu=void 0}function Fb(e){return Vb.apply(this,arguments)}function Vb(){return Vb=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){Db(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Vb.apply(this,arguments)}function Ub(e,t){return Bb.apply(this,arguments)}function Bb(){return Bb=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Mb(t),Pb(t)?(t.gu.hu(n),Ob(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Bb.apply(this,arguments)}function qb(e,t,n){return zb.apply(this,arguments)}function zb(){return zb=te(J().mark((function e(t,n,r){var i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof Vy&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=te(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=d(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),rd("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,jb(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof My?t.yu.Gt(n):n instanceof Fy?t.yu.Yt(n):t.yu.Wt(n),r.isEqual(Td.min())){e.next=29;break}return e.prev=14,e.next=17,Uk(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.te(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(vp.EMPTY_BYTE_STRING,n.snapshotVersion)),Rb(e,t);var r=new $m(n.target,t,1,n.sequenceNumber);Db(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),rd("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,jb(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),zb.apply(this,arguments)}function jb(e,t,n){return Wb.apply(this,arguments)}function Wb(){return Wb=te(J().mark((function e(t,n,r){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Jd(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,Tb(t);case 5:t.gu.set("Offline"),r||(r=function(){return Uk(t.localStore)}),t.asyncQueue.enqueueRetryable(te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rd("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,Eb(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Wb.apply(this,arguments)}function Gb(e,t){return t().catch((function(n){return jb(e,n,t)}))}function Kb(e){return Hb.apply(this,arguments)}function Hb(){return Hb=te(J().mark((function e(t){var n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=cd(t),r=fw(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!Qb(n)){e.next=19;break}return e.prev=3,e.next=6,zk(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,Yb(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,jb(n,e.t0);case 17:e.next=2;break;case 19:Xb(n)&&Jb(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Hb.apply(this,arguments)}function Qb(e){return Lb(e)&&e.fu.length<10}function Yb(e,t){e.fu.push(t);var n=fw(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function Xb(e){return Lb(e)&&!fw(e).No()&&e.fu.length>0}function Jb(e){fw(e).start()}function Zb(e){return $b.apply(this,arguments)}function $b(){return $b=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fw(t).eu();case 1:case"end":return e.stop()}}),e)}))),$b.apply(this,arguments)}function ew(e){return tw.apply(this,arguments)}function tw(){return tw=te(J().mark((function e(t){var n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=fw(t),r=d(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),tw.apply(this,arguments)}function nw(e,t,n){return rw.apply(this,arguments)}function rw(){return rw=te(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=Jm.from(i,n,r),e.next=3,Gb(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Kb(t);case 5:case"end":return e.stop()}}),e)}))),rw.apply(this,arguments)}function iw(e,t){return aw.apply(this,arguments)}function aw(){return aw=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&fw(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=te(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!gy(i=n.code)||i===ld.ABORTED){e.next=7;break}return r=t.fu.shift(),fw(t).Oo(),e.next=5,Gb(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Kb(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Xb(t)&&Jb(t);case 5:case"end":return e.stop()}}),e)}))),aw.apply(this,arguments)}function ow(e,t){return uw.apply(this,arguments)}function uw(){return uw=te(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=cd(t)).asyncQueue.verifyOperationInProgress(),rd("RemoteStore","RemoteStore received new credentials"),i=Lb(r),r._u.add(3),e.next=6,Tb(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,Eb(r);case 12:case"end":return e.stop()}}),e)}))),uw.apply(this,arguments)}function sw(e,t){return cw.apply(this,arguments)}function cw(){return cw=te(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cd(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,Eb(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,Tb(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),cw.apply(this,arguments)}function lw(e){return e.pu||(e.pu=function(e,t,n){var r=cd(e);return r.su(),new bb(t,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:Fb.bind(null,e),Zr:Ub.bind(null,e),Wo:qb.bind(null,e)}),e.wu.push(function(){var t=te(J().mark((function t(n){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Oo(),Pb(e)?Ob(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:Mb(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function fw(e){return e.Iu||(e.Iu=function(e,t,n){var r=cd(e);return r.su(),new wb(t,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:Zb.bind(null,e),Zr:iw.bind(null,e),tu:ew.bind(null,e),Zo:nw.bind(null,e)}),e.wu.push(function(){var t=te(J().mark((function t(n){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Oo(),t.next=4,Kb(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(rd("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var hw=function(){function e(t,n,r,i,a){l(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new hd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return h(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fd(ld.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function dw(e,t){if(id("AsyncQueue","".concat(t,": ").concat(e)),Jd(e))return new fd(ld.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var pw=function(){function e(t){l(this,e),this.comparator=t?function(e,n){return t(e,n)||Rd.comparator(e.key,n.key)}:function(e,t){return Rd.comparator(e.key,t.key)},this.keyedMap=_y(),this.sortedSet=new sp(this.comparator)}return h(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),vw=function(){function e(){l(this,e),this.Tu=new sp(Rd.comparator)}return h(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ud():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),yw=function(){function e(t,n,r,i,a,o,u,s){l(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return h(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,pw.emptySet(n),a,r,i,!0,!1)}}]),e}(),mw=h((function e(){l(this,e),this.Au=void 0,this.listeners=[]})),gw=h((function e(){l(this,e),this.queries=new by((function(e){return Dv(e)}),Nv),this.onlineState="Unknown",this.Ru=new Set}));function kw(e,t){return bw.apply(this,arguments)}function bw(){return bw=te(J().mark((function e(t,n){var r,i,a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cd(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new mw),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=dw(e.t0,"Initialization of query '".concat(Rv(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&Ew(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),bw.apply(this,arguments)}function ww(e,t){return xw.apply(this,arguments)}function xw(){return xw=te(J().mark((function e(t,n){var r,i,a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cd(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),xw.apply(this,arguments)}function Iw(e,t){var n,r=cd(e),i=!1,a=d(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=d(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Au=o}}}catch(f){a.e(f)}finally{a.f()}i&&Ew(r)}function _w(e,t,n){var r=cd(e),i=r.queries.get(t);if(i){var a,o=d(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Ew(e){e.Ru.forEach((function(e){e.next()}))}var Sw=function(){function e(t,n,r){l(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return h(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=d(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new yw(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=yw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}]),e}(),Tw=function(){function e(t,n){l(this,e),this.payload=t,this.byteLength=n}return h(e,[{key:"ku",value:function(){return"metadata"in this.payload}}]),e}(),Aw=function(){function e(t){l(this,e),this.It=t}return h(e,[{key:"Ji",value:function(e){return $y(this.It,e)}},{key:"Yi",value:function(e){return e.metadata.exists?am(this.It,e.document,!1):Jp.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return Yy(e)}}]),e}(),Cw=function(){function e(t,n,r){l(this,e),this.Mu=t,this.localStore=n,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Nw(t)}return h(e,[{key:"Ou",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Cd.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Fu",value:function(e){var t,n=new Map,r=new Aw(this.It),i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=d(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Dy()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=te(J().mark((function e(){var t,n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xk(this.localStore,new Aw(this.It),this.documents,this.Mu.id);case 2:t=e.sent,n=this.Fu(this.documents),r=d(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Zk(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,$u:this.collectionGroups,Bu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Nw(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Dw=h((function e(t){l(this,e),this.key=t})),Rw=h((function e(t){l(this,e),this.key=t})),Ow=function(){function e(t,n){l(this,e),this.query=t,this.Lu=n,this.Uu=null,this.current=!1,this.qu=Dy(),this.mutatedKeys=Dy(),this.Ku=Lv(t),this.Gu=new pw(this.Ku)}return h(e,[{key:"Qu",get:function(){return this.Lu}},{key:"ju",value:function(e,t){var n=this,r=t?t.Wu:new vw,i=t?t.Gu:this.Gu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ov(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.zu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Ku(f,s)>0||c&&n.Ku(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Gu:o,Wu:r,$i:u,mutatedKeys:a}}},{key:"zu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var a=e.Wu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ud()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var o=t?this.Ju():[],u=0===this.qu.size&&this.current?1:0,s=u!==this.Uu;return this.Uu=u,0!==a.length||s?{snapshot:new yw(this.query,e.Gu,i,a,e.mutatedKeys,0===u,s,!1),Yu:o}:{Yu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new vw,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}},{key:"Xu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.qu;this.qu=Dy(),this.Gu.forEach((function(t){e.Xu(t.key)&&(e.qu=e.qu.add(t.key))}));var n=[];return t.forEach((function(t){e.qu.has(t)||n.push(new Rw(t))})),this.qu.forEach((function(e){t.has(e)||n.push(new Dw(e))})),n}},{key:"Zu",value:function(e){this.Lu=e.Hi,this.qu=Dy();var t=this.ju(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return yw.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}]),e}(),Pw=h((function e(t,n,r){l(this,e),this.query=t,this.targetId=n,this.view=r})),Lw=h((function e(t){l(this,e),this.key=t,this.ec=!1})),Mw=function(){function e(t,n,r,i,a,o){l(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new by((function(e){return Dv(e)}),Nv),this.ic=new Map,this.rc=new Set,this.oc=new sp(Rd.comparator),this.uc=new Map,this.cc=new yk,this.ac={},this.hc=new Map,this.lc=Kg.vn(),this.onlineState="Unknown",this.fc=void 0}return h(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function Fw(e,t){return Vw.apply(this,arguments)}function Vw(){return Vw=te(J().mark((function e(t,n){var r,i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Nx(t),!(o=r.sc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.tc(),e.next=15;break;case 6:return e.next=8,jk(r.localStore,Av(n));case 8:return u=e.sent,r.isPrimaryClient&&Cb(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Uw(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Vw.apply(this,arguments)}function Uw(e,t,n,r){return Bw.apply(this,arguments)}function Bw(){return Bw=te(J().mark((function e(t,n,r,i){var a,o,u,s,c,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=te(J().mark((function e(t,n,r,i){var a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ju(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,Kk(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ju(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(ox(t,n.targetId,u.Yu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Kk(t.localStore,n,!0);case 3:return a=e.sent,o=new Ow(n,a.Hi),u=o.ju(a.documents),s=Ly.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),ox(t,r,c.Yu),l=new Pw(n,r,o),e.abrupt("return",(t.sc.set(n,l),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Bw.apply(this,arguments)}function qw(e,t){return zw.apply(this,arguments)}function zw(){return zw=te(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cd(t),i=r.sc.get(n),!((a=r.ic.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(i.targetId,a.filter((function(e){return!Nv(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Wk(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Nb(r.remoteStore,i.targetId),ix(r,i.targetId)})).catch(Wd);case 9:e.next=14;break;case 11:return ix(r,i.targetId),e.next=14,Wk(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),zw.apply(this,arguments)}function jw(e,t,n){return Ww.apply(this,arguments)}function Ww(){return Ww=te(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Dx(t),e.prev=1,e.next=4,function(e,t){var n,r,i=cd(e),a=Sd.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Dy());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=xy(),s=Dy();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=d(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=oy(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new cy(c.key,l,Xp(l.value.mapValue),ey.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Ey(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new sp(Id)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,cx(i,a.changes);case 9:return e.next=11,Kb(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=dw(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Ww.apply(this,arguments)}function Gw(e,t){return Kw.apply(this,arguments)}function Kw(){return Kw=te(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cd(t),e.prev=1,e.next=4,Bk(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(sd(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?sd(n.ec):e.removedDocuments.size>0&&(sd(n.ec),n.ec=!1))})),e.next=8,cx(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Wd(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Kw.apply(this,arguments)}function Hw(e,t,n){var r=cd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=cd(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=d(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Ew(n)}(r.eventManager,t),i.length&&r.nc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Qw(e,t,n){return Yw.apply(this,arguments)}function Yw(){return Yw=te(J().mark((function e(t,n,r){var i,a,o,u,s,c;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=cd(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.uc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new sp(Rd.comparator)).insert(o,Jp.newNoDocument(o,Td.min())),s=Dy().add(o),c=new Py(Td.min(),new Map,new fp(Id),u,s),e.next=9,Gw(i,c);case 9:i.oc=i.oc.remove(o),i.uc.delete(n),sx(i),e.next=16;break;case 14:return e.next=16,Wk(i.localStore,n,!1).then((function(){return ix(i,n,r)})).catch(Wd);case 16:case"end":return e.stop()}}),e)}))),Yw.apply(this,arguments)}function Xw(e,t){return Jw.apply(this,arguments)}function Jw(){return Jw=te(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cd(t),i=n.batch.batchId,e.prev=1,e.next=4,Vk(r.localStore,n);case 4:return a=e.sent,rx(r,i,null),nx(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,cx(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Wd(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Jw.apply(this,arguments)}function Zw(e,t,n){return $w.apply(this,arguments)}function $w(){return $w=te(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cd(t),e.prev=1,e.next=4,function(e,t){var n=cd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return sd(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,rx(i,n,r),nx(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,cx(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Wd(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),$w.apply(this,arguments)}function ex(e,t){return tx.apply(this,arguments)}function tx(){return tx=te(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lb((r=cd(t)).remoteStore)||rd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=cd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.hc.get(i)||[]).push(n),r.hc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=dw(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),tx.apply(this,arguments)}function nx(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function rx(e,t,n){var r=cd(e),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function ix(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=d(e.ic.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.sc.delete(a),n&&e.nc._c(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.ls(t).forEach((function(t){e.cc.containsKey(t)||ax(e,t)}))}function ax(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(Nb(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),sx(e))}function ox(e,t,n){var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Dw?(e.cc.addReference(a.key,t),ux(e,a)):a instanceof Rw?(rd("SyncEngine","Document no longer in limbo: "+a.key),e.cc.removeReference(a.key,t),e.cc.containsKey(a.key)||ax(e,a.key)):ud()}}catch(o){i.e(o)}finally{i.f()}}function ux(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(rd("SyncEngine","New document in limbo: "+n),e.rc.add(r),sx(e))}function sx(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new Rd(Cd.fromString(t)),r=e.lc.next();e.uc.set(r,new Lw(n)),e.oc=e.oc.insert(n,r),Cb(e.remoteStore,new $m(Av(xv(n.path)),r,2,ip.at))}}function cx(e,t,n){return lx.apply(this,arguments)}function lx(){return lx=te(J().mark((function e(t,n,r){var i,a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=cd(t),a=[],o=[],u=[],e.t0=i.sc.isEmpty(),e.t0){e.next=9;break}return i.sc.forEach((function(e,t){u.push(i.dc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Rk.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.nc.Wo(a),e.next=9,function(){var e=te(J().mark((function e(t,n){var r,i,a,o,u,s,c,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cd(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Kd.forEach(n,(function(t){return Kd.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Kd.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Jd(e.t0)){e.next=10;break}throw e.t0;case 10:rd("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=d(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ui=r.Ui.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),lx.apply(this,arguments)}function fx(e,t){return hx.apply(this,arguments)}function hx(){return hx=te(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=cd(t)).currentUser.isEqual(n)){e.next=11;break}return rd("SyncEngine","User change. New user:",n.toKey()),e.next=5,Mk(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new fd(ld.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,cx(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),hx.apply(this,arguments)}function dx(e,t){var n=cd(e),r=n.uc.get(t);if(r&&r.ec)return Dy().add(r.key);var i=Dy(),a=n.ic.get(t);if(!a)return i;var o,u=d(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.sc.get(s);i=i.unionWith(c.view.Qu)}}catch(l){u.e(l)}finally{u.f()}return i}function px(e,t){return vx.apply(this,arguments)}function vx(){return vx=te(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cd(t),e.next=3,Kk(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Zu(i),e.abrupt("return",(r.isPrimaryClient&&ox(r,n.targetId,a.Yu),a));case 6:case"end":return e.stop()}}),e)}))),vx.apply(this,arguments)}function yx(e,t){return mx.apply(this,arguments)}function mx(){return mx=te(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cd(t),e.abrupt("return",Qk(r.localStore,n).then((function(e){return cx(r,e)})));case 2:case"end":return e.stop()}}),e)}))),mx.apply(this,arguments)}function gx(e,t,n,r){return kx.apply(this,arguments)}function kx(){return kx=te(J().mark((function e(t,n,r,i){var a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=cd(t),e.next=3,function(e,t){var n=cd(e),r=cd(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Kd.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Kb(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(rx(a,n,i||null),nx(a,n),function(e,t){cd(cd(e).mutationQueue).An(t)}(a.localStore,n)):ud();case 11:return e.next=13,cx(a,o);case 13:e.next=16;break;case 15:rd("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),kx.apply(this,arguments)}function bx(e,t){return wx.apply(this,arguments)}function wx(){return wx=te(J().mark((function e(t,n){var r,i,a,o,u,s,c,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nx(r=cd(t)),Dx(r),!0!==n||!0===r.fc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,xx(r,i.toArray());case 5:return a=e.sent,r.fc=!0,e.next=9,sw(r.remoteStore,!0);case 9:o=d(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Cb(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.fc){e.next=25;break}return c=[],l=Promise.resolve(),r.ic.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return ix(r,t),Wk(r.localStore,t,!0)})),Nb(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,xx(r,c);case 21:return function(e){var t=cd(e);t.uc.forEach((function(e,n){Nb(t.remoteStore,n)})),t.cc.fs(),t.uc=new Map,t.oc=new sp(Rd.comparator)}(r),r.fc=!1,e.next=25,sw(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),wx.apply(this,arguments)}function xx(e,t,n){return Ix.apply(this,arguments)}function Ix(){return Ix=te(J().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,p,v,y,m,g;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=cd(t),a=[],o=[],u=d(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ic.get(c))||0===f.length){e.next=34;break}return e.next=11,jk(i.localStore,Av(f[0]));case 11:l=e.sent,h=d(f),e.prev=13,h.s();case 15:if((p=h.n()).done){e.next=24;break}return v=p.value,y=i.sc.get(v),e.next=20,px(i,y);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Hk(i.localStore,c);case 36:return g=e.sent,e.next=39,jk(i.localStore,g);case 39:return l=e.sent,e.next=42,Uw(i,_x(g),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.nc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Ix.apply(this,arguments)}function _x(e){return wv(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ex(e){var t=cd(e);return cd(cd(t.localStore).persistence).vi()}function Sx(e,t,n,r){return Tx.apply(this,arguments)}function Tx(){return Tx=te(J().mark((function e(t,n,r,i){var a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=cd(t)).fc){e.next=3;break}return e.abrupt("return",void rd("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ic.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Qk(a.localStore,Pv(o[0]));case 10:return u=e.sent,s=Py.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,cx(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Wk(a.localStore,n,!0);case 17:return ix(a,n,i),e.abrupt("break",20);case 19:ud();case 20:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}function Ax(e,t,n){return Cx.apply(this,arguments)}function Cx(){return Cx=te(J().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Nx(t)).fc){e.next=45;break}a=d(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ic.has(u)){e.next=10;break}return rd("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Hk(i.localStore,u);case 12:return s=e.sent,e.next=15,jk(i.localStore,s);case 15:return c=e.sent,e.next=18,Uw(i,_x(s),c.targetId,!1);case 18:Cb(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=d(r),e.prev=30,h=J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ic.has(t),!e.t0){e.next=5;break}return e.next=5,Wk(i.localStore,t,!1).then((function(){Nb(i.remoteStore,t),ix(i,t)})).catch(Wd);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Cx.apply(this,arguments)}function Nx(e){var t=cd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Gw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=dx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Qw.bind(null,t),t.nc.Wo=Iw.bind(null,t.eventManager),t.nc._c=_w.bind(null,t.eventManager),t}function Dx(e){var t=cd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Xw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Zw.bind(null,t),t}function Rx(e,t,n){var r=cd(e);(function(){var e=te(J().mark((function e(t,n,r){var i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=cd(e),r=Yy(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Nw(i)),a=new Cw(i,t.localStore,n.It),e.next=15,n.wc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Ou(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.wc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,cx(t,s.Bu,void 0);case 31:return e.next=33,function(e,t){var n=cd(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.$u));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(ad("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Ox=function(){function e(){l(this,e),this.synchronizeTabs=!1}return h(e,[{key:"initialize",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.It=mb(t.databaseInfo.databaseId),this.sharedClientState=this.mc(t),this.persistence=this.gc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.yc(t),this.gcScheduler=this.Ic(t,this.localStore),this.indexBackfillerScheduler=this.Tc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e,t){return null}},{key:"Tc",value:function(e,t){return null}},{key:"yc",value:function(e){return Lk(this.persistence,new Ok,e.initialUser,this.It)}},{key:"gc",value:function(e){return new xk(_k.Bs,this.It)}},{key:"mc",value:function(e){return new cb}},{key:"terminate",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Px=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).Ec=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return h(n,[{key:"initialize",value:function(){var e=te(J().mark((function e(t){var r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct(m(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ec.initialize(this,t);case 4:return e.next=6,Dx(this.Ec.syncEngine);case 6:return e.next=8,Kb(this.Ec.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"yc",value:function(e){return Lk(this.persistence,new Ok,e.initialUser,this.It)}},{key:"Ic",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new $g(n,e.asyncQueue,t)}},{key:"Tc",value:function(e,t){var n=new rp(t,this.persistence);return new np(e.asyncQueue,n)}},{key:"gc",value:function(e){var t=Dk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Vg.withCacheSize(this.cacheSizeBytes):Vg.DEFAULT;return new Ak(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,vb(),yb(),this.It,this.sharedClientState,!!this.forceOwnership)}},{key:"mc",value:function(e){return new cb}}]),n}(Ox),Lx=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r,!1)).Ec=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return h(n,[{key:"initialize",value:function(){var e=te(J().mark((function e(t){var r,i=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct(m(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ec.syncEngine,e.t0=this.sharedClientState instanceof sb,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:gx.bind(null,r),$r:Sx.bind(null,r),Br:Ax.bind(null,r),vi:Ex.bind(null,r),Or:yx.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bx(i.Ec.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e){var t=vb();if(!sb.C(t))throw new fd(ld.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Dk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sb(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Px),Mx=function(){function e(){l(this,e)}return h(e,[{key:"initialize",value:function(){var e=te(J().mark((function e(t,n){var r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Hw(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=fx.bind(null,this.syncEngine),e.next=12,sw(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new gw}},{key:"createDatastore",value:function(e){var t,n=mb(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new pb(t));return function(e,t,n,r){return new xb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Hw(o.syncEngine,e,0)},a=fb.C()?new fb:new lb,new _b(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Mw(e,t,n,r,i,a);return o&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cd(t),rd("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,Tb(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Fx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return te(J().mark((function r(){var i;return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Vx=function(){function e(t){l(this,e),this.observer=t,this.muted=!1}return h(e,[{key:"next",value:function(e){this.observer.next&&this.Ac(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ac(this.observer.error,e):id("Uncaught Error in snapshot listener:",e)}},{key:"Rc",value:function(){this.muted=!0}},{key:"Ac",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Ux=function(){function e(t,n){var r=this;l(this,e),this.bc=t,this.It=n,this.metadata=new hd,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then((function(e){e&&e.ku()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return h(e,[{key:"close",value:function(){return this.bc.cancel()}},{key:"getMetadata",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wc",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=te(J().mark((function e(){var t,n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Vc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Pc.decode(t),r=Number(n),isNaN(r)&&this.Sc("length string (".concat(n,") is not valid number")),e.next=9,this.Dc(r);case 9:return i=e.sent,e.abrupt("return",new Tw(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Vc",value:function(){var e=te(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Cc()<0)){e.next=7;break}return e.next=3,this.xc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Cc())<0&&this.Sc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Dc",value:function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.xc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Sc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Pc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Sc",value:function(e){throw this.bc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"xc",value:function(){var e=te(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Bx=function(){function e(t){l(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return h(e,[{key:"lookup",value:function(){var e=te(J().mark((function e(t){var n,r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new fd(ld.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=te(J().mark((function e(t,n){var r,i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cd(t),i=nm(r.It)+"/documents",a={documents:n.map((function(e){return Zy(r.It,e)}))},e.next=5,r.fo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=om(r.It,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());sd(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new vy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=te(J().mark((function e(){var t,n=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Rd.fromPath(t);n.mutations.push(new yy(r,n.precondition(r)))})),e.next=7,function(){var e=te(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cd(t),i=nm(r.It)+"/documents",a={writes:n.map((function(e){return um(r.It,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ud();t=Td.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new fd(ld.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Td.min())?ey.exists(!1):ey.updateTime(t):ey.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Td.min()))throw new fd(ld.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ey.updateTime(t)}return ey.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),qx=function(){function e(t,n,r,i,a){l(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Nc=r.maxAttempts,this.xo=new gb(this.asyncQueue,"transaction_retry")}return h(e,[{key:"run",value:function(){this.Nc-=1,this.kc()}},{key:"kc",value:function(){var e=this;this.xo.Ao(te(J().mark((function t(){var n,r;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Bx(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Oc(t)}))}))})).catch((function(t){e.Oc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!Ep(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Oc",value:function(e){var t=this;this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget((function(){return t.kc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Fc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!gy(t)}return!1}}]),e}(),zx=function(){function e(t,n,r,i){var a=this;l(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$h.UNAUTHENTICATED,this.clientId=xd.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rd("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return rd("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return h(e,[{key:"getConfiguration",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new fd(ld.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new hd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(te(J().mark((function n(){var r;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=dw(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function jx(e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=te(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),rd("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Mk(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Wx.apply(this,arguments)}function Gx(e,t){return Kx.apply(this,arguments)}function Kx(){return Kx=te(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Hx(t);case 3:return r=e.sent,rd("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return ow(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return ow(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Kx.apply(this,arguments)}function Hx(e){return Qx.apply(this,arguments)}function Qx(){return Qx=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return rd("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,jx(t,new Ox);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Qx.apply(this,arguments)}function Yx(e){return Xx.apply(this,arguments)}function Xx(){return Xx=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return rd("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Gx(t,new Mx);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Xx.apply(this,arguments)}function Jx(e){return Hx(e).then((function(e){return e.persistence}))}function Zx(e){return Hx(e).then((function(e){return e.localStore}))}function $x(e){return Yx(e).then((function(e){return e.remoteStore}))}function eI(e){return Yx(e).then((function(e){return e.syncEngine}))}function tI(e){return nI.apply(this,arguments)}function nI(){return nI=te(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yx(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Fw.bind(null,n.syncEngine),r.onUnlisten=qw.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),nI.apply(this,arguments)}function rI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new hd;return e.asyncQueue.enqueueAndForget(te(J().mark((function i(){return J().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Vx({next:function(a){t.enqueueAndForget((function(){return ww(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new fd(ld.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new fd(ld.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Sw(xv(n.path),a,{includeMetadataChanges:!0,Nu:!0});return kw(e,o)},i.next=3,tI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function iI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new hd;return e.asyncQueue.enqueueAndForget(te(J().mark((function i(){return J().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Vx({next:function(n){t.enqueueAndForget((function(){return ww(e,o)})),n.fromCache&&"server"===r.source?i.reject(new fd(ld.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Sw(n,a,{includeMetadataChanges:!0,Nu:!0});return kw(e,o)},i.next=3,tI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var aI=new Map;function oI(e,t,n){if(!n)throw new fd(ld.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function uI(e,t,n,r){if(!0===t&&!0===r)throw new fd(ld.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function sI(e){if(!Rd.isDocumentKey(e))throw new fd(ld.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function cI(e){if(Rd.isDocumentKey(e))throw new fd(ld.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function lI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ud()}function fI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new fd(ld.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=lI(e);throw new fd(ld.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function hI(e,t){if(t<=0)throw new fd(ld.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var dI=function(){function e(t){var n;if(l(this,e),void 0===t.host){if(void 0!==t.ssl)throw new fd(ld.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new fd(ld.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,uI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return h(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),pI=function(){function e(t,n,r,i){l(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dI({}),this._settingsFrozen=!1}return h(e,[{key:"app",get:function(){if(!this._app)throw new fd(ld.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new fd(ld.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new pd;switch(e.type){case"gapi":var t=e.client;return new gd(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new fd(ld.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=aI.get(e);t&&(rd("ComponentProvider","Removing Datastore"),aI.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function vI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=fI(e,pI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&ad("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=$h.MOCK_USER;else{o=N(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new fd(ld.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new $h(s)}e._authCredentials=new vd(new dd(o,u))}}var yI=function(){function e(t,n,r){l(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return h(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new gI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),mI=function(){function e(t,n,r){l(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return h(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),gI=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,e,r,xv(i)))._path=i,a.type="collection",a}return h(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new yI(this.firestore,null,new Rd(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(mI);function kI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=X(e),oI("collection","path",t),e instanceof pI){var a=Cd.fromString.apply(Cd,[t].concat(r));return cI(a),new gI(e,null,a)}if(!(e instanceof yI||e instanceof gI))throw new fd(ld.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Cd.fromString.apply(Cd,[t].concat(r)));return cI(o),new gI(e.firestore,null,o)}function bI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=X(e),1===arguments.length&&(t=xd.R()),oI("doc","path",t),e instanceof pI){var a=Cd.fromString.apply(Cd,[t].concat(r));return sI(a),new yI(e,null,new Rd(a))}if(!(e instanceof yI||e instanceof gI))throw new fd(ld.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Cd.fromString.apply(Cd,[t].concat(r)));return sI(o),new yI(e.firestore,e instanceof gI?e.converter:null,new Rd(o))}function wI(e,t){return e=X(e),t=X(t),(e instanceof yI||e instanceof gI)&&(t instanceof yI||t instanceof gI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function xI(e,t){return e=X(e),t=X(t),e instanceof mI&&t instanceof mI&&e.firestore===t.firestore&&Nv(e._query,t._query)&&e.converter===t.converter}var II=function(){function e(){var t=this;l(this,e),this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new gb(this,"async_queue_retry"),this.jc=function(){var e=yb();e&&rd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.bo()};var n=yb();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.jc)}return h(e,[{key:"isShuttingDown",get:function(){return this.Lc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Wc(),this.zc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;var t=yb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Wc(),this.Lc)return new Promise((function(){}));var n=new hd;return this.zc((function(){return t.Lc&&t.Gc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Bc.push(e),t.Hc()}))}},{key:"Hc",value:function(){var e=te(J().mark((function e(){var t=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Bc.length){e.next=14;break}return e.prev=1,e.next=4,this.Bc[0]();case 4:this.Bc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Jd(e.t0)){e.next=12;break}throw e.t0;case 12:rd("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Bc.length>0&&this.xo.Ao((function(){return t.Hc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"zc",value:function(e){var t=this,n=this.$c.then((function(){return t.Kc=!0,e().catch((function(e){t.qc=e,t.Kc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw id("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Kc=!1,e}))}));return this.$c=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);var i=hw.createAndSchedule(this,e,t,n,(function(e){return r.Jc(e)}));return this.Uc.push(i),i}},{key:"Wc",value:function(){this.qc&&ud()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Yc",value:function(){var e=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$c,e.next=3,t;case 3:if(t!==this.$c){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Xc",value:function(e){var t,n=d(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Zc",value:function(e){var t=this;return this.Yc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=d(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Yc()}))}},{key:"ta",value:function(e){this.Qc.push(e)}},{key:"Jc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();function _I(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=d(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var EI=function(){function e(){l(this,e),this._progressObserver={},this._taskCompletionResolver=new hd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return h(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),SI=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new II,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return h(n,[{key:"_terminate",value:function(){return this._firestoreClient||AI(this),this._firestoreClient.terminate()}}]),n}(pI);function TI(e){return e._firestoreClient||AI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function AI(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Ip(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new zx(e._authCredentials,e._appCheckCredentials,e._queue,r)}function CI(e,t,n){var r=new hd;return e.asyncQueue.enqueue(te(J().mark((function i(){var a;return J().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,jx(e,n);case 3:return i.next=5,Gx(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===ld.FAILED_PRECONDITION||e.code===ld.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:ad("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function NI(e){return function(e){return e.asyncQueue.enqueue(te(J().mark((function t(){var n,r;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jx(e);case 2:return n=t.sent,t.next=5,$x(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=cd(e);return t._u.delete(0),Eb(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(TI(e=fI(e,SI)))}function DI(e){return function(e){return e.asyncQueue.enqueue(te(J().mark((function t(){var n,r;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jx(e);case 2:return n=t.sent,t.next=5,$x(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=cd(t))._u.add(0),e.next=4,Tb(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(TI(e=fI(e,SI)))}function RI(e,t){var n=TI(e=fI(e,SI)),r=new EI;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Ux(e,t)}(function(e,t){if(e instanceof Uint8Array)return Fx(e,t);if(e instanceof ArrayBuffer)return Fx(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,mb(t));e.asyncQueue.enqueueAndForget(te(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Rx,t.next=3,eI(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function OI(e,t){return function(e,t){return e.asyncQueue.enqueue(te(J().mark((function n(){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=cd(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,Zx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(TI(e=fI(e,SI)),t).then((function(t){return t?new mI(e,null,t.query):null}))}function PI(e){if(e._initialized||e._terminated)throw new fd(ld.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var LI=function(){function e(){l(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new fd(ld.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dd(n)}return h(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var MI=function(){function e(t){l(this,e),this._byteString=t}return h(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(vp.fromBase64String(t))}catch(t){throw new fd(ld.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(vp.fromUint8Array(t))}}]),e}(),FI=h((function e(t){l(this,e),this._methodName=t})),VI=function(){function e(t,n){if(l(this,e),!isFinite(t)||t<-90||t>90)throw new fd(ld.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new fd(ld.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return h(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Id(this._lat,e._lat)||Id(this._long,e._long)}}]),e}(),UI=/^__.*__$/,BI=function(){function e(t,n,r){l(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return h(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new cy(e,this.data,this.fieldMask,t,this.fieldTransforms):new sy(e,this.data,t,this.fieldTransforms)}}]),e}(),qI=function(){function e(t,n,r){l(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return h(e,[{key:"toMutation",value:function(e,t){return new cy(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function zI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ud()}}var jI=function(){function e(t,n,r,i,a,o){l(this,e),this.settings=t,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ea(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return h(e,[{key:"path",get:function(){return this.settings.path}},{key:"na",get:function(){return this.settings.na}},{key:"sa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.sa({path:n,ra:!1});return r.oa(e),r}},{key:"ua",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.sa({path:n,ra:!1});return r.ea(),r}},{key:"ca",value:function(e){return this.sa({path:void 0,ra:!0})}},{key:"aa",value:function(e){return c_(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ea",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.oa(this.path.get(e))}},{key:"oa",value:function(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(zI(this.na)&&UI.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}]),e}(),WI=function(){function e(t,n,r){l(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.It=r||mb(t)}return h(e,[{key:"fa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new jI({na:e,methodName:t,la:n,path:Dd.emptyPath(),ra:!1,ha:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),e}();function GI(e){var t=e._freezeSettings(),n=mb(e._databaseId);return new WI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function KI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.fa(a.merge||a.mergeFields?2:0,t,n,i);a_("Data must be an object, but it was:",o,r);var u,s,c=r_(r,o);if(a.merge)u=new pp(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=d(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var p=l.value,v=o_(t,p,n);if(!o.contains(v))throw new fd(ld.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));l_(f,v)||f.push(v)}}catch(y){h.e(y)}finally{h.f()}u=new pp(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new BI(new Yp(c),u,s)}var HI=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.na)throw 1===e.na?e.aa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.aa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(FI);function QI(e,t,n){return new jI({na:3,la:t.settings.la,methodName:e._methodName,ra:n},t.databaseId,t.It,t.ignoreUndefinedProperties)}var YI=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"_toFieldTransform",value:function(e){return new Zv(e.path,new Wv)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(FI),XI=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).da=r,i}return h(n,[{key:"_toFieldTransform",value:function(e){var t=QI(this,e,!0),n=this.da.map((function(e){return n_(e,t)})),r=new Gv(n);return new Zv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(FI),JI=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).da=r,i}return h(n,[{key:"_toFieldTransform",value:function(e){var t=QI(this,e,!0),n=this.da.map((function(e){return n_(e,t)})),r=new Hv(n);return new Zv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(FI),ZI=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e))._a=r,i}return h(n,[{key:"_toFieldTransform",value:function(e){var t=new Yv(e.It,Uv(e.It,this._a));return new Zv(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(FI);function $I(e,t,n,r){var i=e.fa(1,t,n);a_("Data must be an object, but it was:",i,r);var a=[],o=Yp.empty();op(r,(function(e,r){var u=s_(t,e,n);r=X(r);var s=i.ua(u);if(r instanceof HI)a.push(u);else{var c=n_(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new pp(a);return new qI(o,u,i.fieldTransforms)}function e_(e,t,n,r,i,a){var o=e.fa(1,t,n),u=[o_(t,r,n)],s=[i];if(a.length%2!=0)throw new fd(ld.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(o_(t,a[c])),s.push(a[c+1]);for(var l=[],f=Yp.empty(),h=u.length-1;h>=0;--h)if(!l_(l,u[h])){var d=u[h],p=s[h];p=X(p);var v=o.ua(d);if(p instanceof HI)l.push(d);else{var y=n_(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new pp(l);return new qI(f,m,o.fieldTransforms)}function t_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n_(n,e.fa(r?4:3,t))}function n_(e,t){if(i_(e=X(e)))return a_("Unsupported field value:",t,e),r_(e,t);if(e instanceof FI)return function(e,t){if(!zI(t.na))throw t.aa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.aa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ra&&4!==t.na)throw t.aa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=d(e);try{for(a.s();!(n=a.n()).done;){var o=n_(n.value,t.ca(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=X(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Uv(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Sd.fromDate(e);return{timestampValue:Ky(t.It,n)}}if(e instanceof Sd){var r=new Sd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ky(t.It,r)}}if(e instanceof VI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof MI)return{bytesValue:Hy(t.It,e._byteString)};if(e instanceof yI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.aa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Xy(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.aa("Unsupported field value: ".concat(lI(e)))}(e,t)}function r_(e,t){var n={};return up(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):op(e,(function(e,r){var i=n_(r,t.ia(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function i_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Sd||e instanceof VI||e instanceof MI||e instanceof yI||e instanceof FI)}function a_(e,t,n){if(!i_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=lI(n);throw"an object"===r?t.aa(e+" a custom object"):t.aa(e+" "+r)}}function o_(e,t,n){if((t=X(t))instanceof LI)return t._internalPath;if("string"==typeof t)return s_(e,t);throw c_("Field path arguments must be of type string or ",e,!1,void 0,n)}var u_=new RegExp("[~\\*/\\[\\]]");function s_(e,t,n){if(t.search(u_)>=0)throw c_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return x(LI,$(t.split(".")))._internalPath}catch(r){throw c_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function c_(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new fd(ld.INVALID_ARGUMENT,u+e+s)}function l_(e,t){return e.some((function(e){return e.isEqual(t)}))}var f_=function(){function e(t,n,r,i,a){l(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return h(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new yI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new h_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(d_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),h_=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"data",value:function(){return Ct(m(n.prototype),"data",this).call(this)}}]),n}(f_);function d_(e,t){return"string"==typeof t?s_(e,t):t instanceof LI?t._internalPath:t._delegate._internalPath}var p_=function(){function e(t,n){l(this,e),this.hasPendingWrites=t,this.fromCache=n}return h(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),v_=function(e){y(n,e);var t=w(n);function n(e,r,i,a,o,u){var s;return l(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return h(n,[{key:"exists",value:function(){return Ct(m(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new y_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(d_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(f_),y_=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ct(m(n.prototype),"data",this).call(this,e)}}]),n}(v_),m_=function(){function e(t,n,r,i){l(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new p_(i.hasPendingWrites,i.fromCache),this.query=r}return h(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new y_(n._firestore,n._userDataWriter,r.key,r,new p_(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fd(ld.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new y_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new p_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new y_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new p_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:g_(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function g_(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ud()}}function k_(e,t){return e instanceof v_&&t instanceof v_?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof m_&&t instanceof m_&&e._firestore===t._firestore&&xI(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function b_(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new fd(ld.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var w_=h((function e(){l(this,e)}));function x_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var I_=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).wa=e,a.ma=r,a.ga=i,a.type="where",a}return h(n,[{key:"_apply",value:function(e){var t=GI(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new fd(ld.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){P_(o,a);var s,c=[],l=d(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(O_(r,e,f))}}catch(p){l.e(p)}finally{l.f()}u={arrayValue:{values:c}}}else u=O_(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||P_(o,a),u=t_(n,"where",o,"in"===a||"not-in"===a);var h=ov.create(i,a,u);return function(e,t){if(t.dt()){var n=Ev(e);if(null!==n&&!n.isEqual(t.field))throw new fd(ld.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=_v(e);null!==r&&L_(e,t.field,r)}var i=function(e,t){var n,r=d(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(p){r.e(p)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new fd(ld.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new fd(ld.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new mI(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new bv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(w_);var __=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).wa=e,i.ya=r,i.type="orderBy",i}return h(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new fd(ld.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new fd(ld.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new yv(t,n);return function(e,t){if(null===_v(e)){var n=Ev(e);null!==n&&L_(e,n,t.field)}}(e,r),r}(e._query,this.wa,this.ya);return new mI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new bv(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(w_);var E_=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a.pa=r,a.Ia=i,a}return h(n,[{key:"_apply",value:function(e){return new mI(e.firestore,e.converter,Cv(e._query,this.pa,this.Ia))}}]),n}(w_);var S_=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a.Ta=r,a.Ea=i,a}return h(n,[{key:"_apply",value:function(e){var t=R_(e,this.type,this.Ta,this.Ea);return new mI(e.firestore,e.converter,function(e,t){return new bv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(w_);function T_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new S_("startAt",t,!0)}function A_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new S_("startAfter",t,!1)}var C_=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a.Ta=r,a.Ea=i,a}return h(n,[{key:"_apply",value:function(e){var t=R_(e,this.type,this.Ta,this.Ea);return new mI(e.firestore,e.converter,function(e,t){return new bv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(w_);function N_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new C_("endBefore",t,!1)}function D_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new C_("endAt",t,!0)}function R_(e,t,n,r){if(n[0]=X(n[0]),n[0]instanceof f_)return function(e,t,n,r,i){if(!r)throw new fd(ld.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=d(Tv(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Fp(t,r.key));else{var c=r.data.field(s.field);if(bp(c))throw new fd(ld.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new fd(ld.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new vv(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=GI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new fd(ld.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new fd(ld.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Sv(e)&&-1!==c.indexOf("/"))throw new fd(ld.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Cd.fromString(c));if(!Rd.isDocumentKey(l))throw new fd(ld.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Rd(l);u.push(Fp(t,f))}else{var h=t_(n,r,c);u.push(h)}}return new vv(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function O_(e,t,n){if("string"==typeof(n=X(n))){if(""===n)throw new fd(ld.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sv(t)&&-1!==n.indexOf("/"))throw new fd(ld.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Cd.fromString(n));if(!Rd.isDocumentKey(r))throw new fd(ld.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Fp(e,new Rd(r))}if(n instanceof yI)return Fp(e,n._key);throw new fd(ld.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(lI(n),"."))}function P_(e,t){if(!Array.isArray(e)||0===e.length)throw new fd(ld.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new fd(ld.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function L_(e,t,n){if(!n.isEqual(t))throw new fd(ld.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var M_={maxAttempts:5},F_=function(){function e(){l(this,e)}return h(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Np(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gp(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ud()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return op(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new VI(gp(e.latitude),gp(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=wp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xp(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=mp(e);return new Sd(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Cd.fromString(e);sd(bm(n));var r=new _p(n.get(1),n.get(3)),i=new Rd(n.popFirst(5));return r.isEqual(t)||id("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function V_(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var U_=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return h(n,[{key:"convertBytes",value:function(e){return new MI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new yI(this.firestore,null,t)}}]),n}(F_),B_=function(){function e(t,n){l(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=GI(t)}return h(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=q_(e,this._firestore),i=V_(r.converter,t,n),a=KI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,ey.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=q_(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=X(t))||t instanceof LI?e_(this._dataReader,"WriteBatch.update",i._key,t,n,o):$I(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,ey.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=q_(e,this._firestore);return this._mutations=this._mutations.concat(new vy(t._key,ey.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new fd(ld.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function q_(e,t){if((e=X(e)).firestore!==t)throw new fd(ld.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var z_=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return h(n,[{key:"convertBytes",value:function(e){return new MI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new yI(this.firestore,null,t)}}]),n}(F_);function j_(e){e=fI(e,yI);var t=fI(e.firestore,SI),n=TI(t),r=new z_(t);return function(e,t){var n=new hd;return e.asyncQueue.enqueueAndForget(te(J().mark((function r(){return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=te(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=cd(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new fd(ld.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=dw(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Zx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new v_(t,r,e._key,n,new p_(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function W_(e){e=fI(e,mI);var t=fI(e.firestore,SI),n=TI(t),r=new z_(t);return function(e,t){var n=new hd;return e.asyncQueue.enqueueAndForget(te(J().mark((function r(){return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=te(J().mark((function e(t,n,r){var i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Kk(t,n,!0);case 3:i=e.sent,a=new Ow(n,i.Hi),o=a.ju(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=dw(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Zx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new m_(t,r,e,n)}))}function G_(e,t,n){e=fI(e,yI);var r=fI(e.firestore,SI),i=V_(e.converter,t,n);return Y_(r,[KI(GI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ey.none())])}function K_(e,t,n){e=fI(e,yI);for(var r=fI(e.firestore,SI),i=GI(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Y_(r,[("string"==typeof(t=X(t))||t instanceof LI?e_(i,"updateDoc",e._key,t,n,o):$I(i,"updateDoc",e._key,t)).toMutation(e._key,ey.exists(!0))])}function H_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=X(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||_I(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(_I(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof yI)l=fI(e.firestore,SI),f=xv(e._key.path),c={next:function(t){n[s]&&n[s](X_(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=fI(e,mI);l=fI(p.firestore,SI),f=p._query;var v=new z_(l);c={next:function(e){n[s]&&n[s](new m_(l,v,p,e))},error:n[s+1],complete:n[s+2]},b_(e._query)}return function(e,t,n,r){var i=new Vx(r),a=new Sw(t,i,n);return e.asyncQueue.enqueueAndForget(te(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=kw,t.next=3,tI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Rc(),e.asyncQueue.enqueueAndForget(te(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ww,t.next=3,tI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(TI(l),f,h,c)}function Q_(e,t){return function(e,t){var n=new Vx(t);return e.asyncQueue.enqueueAndForget(te(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){cd(e).Ru.add(t),t.next()},t.next=3,tI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Rc(),e.asyncQueue.enqueueAndForget(te(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){cd(e).Ru.delete(t)},t.next=3,tI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(TI(e=fI(e,SI)),_I(t)?t:{next:t})}function Y_(e,t){return function(e,t){var n=new hd;return e.asyncQueue.enqueueAndForget(te(J().mark((function r(){return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=jw,r.next=3,eI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(TI(e),t)}function X_(e,t,n){var r=n.docs.get(t._key),i=new z_(e);return new v_(e,i,t._key,r,new p_(n.hasPendingWrites,n.fromCache),t.converter)}var J_=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r))._firestore=e,i}return h(n,[{key:"get",value:function(e){var t=this,r=q_(e,this._firestore),i=new z_(this._firestore);return Ct(m(n.prototype),"get",this).call(this,e).then((function(e){return new v_(t._firestore,i,r._key,e._document,new p_(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){l(this,e),this._firestore=t,this._transaction=n,this._dataReader=GI(t)}return h(e,[{key:"get",value:function(e){var t=this,n=q_(e,this._firestore),r=new U_(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ud();var i=e[0];if(i.isFoundDocument())return new f_(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new f_(t._firestore,r,n._key,null,n.converter);throw ud()}))}},{key:"set",value:function(e,t,n){var r=q_(e,this._firestore),i=V_(r.converter,t,n),a=KI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=q_(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=X(t))||t instanceof LI?e_(this._dataReader,"Transaction.update",i._key,t,n,o):$I(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=q_(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Z_(e,t,n){e=fI(e,SI);var r=Object.assign(Object.assign({},M_),n);return function(e){if(e.maxAttempts<1)throw new fd(ld.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new hd;return e.asyncQueue.enqueueAndForget(te(J().mark((function i(){var a;return J().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return Yx(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new qx(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(TI(e),(function(n){return t(new J_(e,n))}),r)}function $_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new XI("arrayUnion",t)}function eE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new JI("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ed=e}(Je),We(new ne("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new SI(new yd(e.getProvider("auth-internal")),new bd(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new fd(ld.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _p(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),rt(Zh,"3.5.0",e),rt(Zh,"3.5.0","esm2017")}();function tE(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new fd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function nE(){if("undefined"===typeof Uint8Array)throw new fd("unimplemented","Uint8Arrays are not available in this environment.")}function rE(){if("undefined"==typeof atob)throw new fd("unimplemented","Blobs are unavailable in Firestore in this environment.")}var iE=function(){function e(t){l(this,e),this._delegate=t}return h(e,[{key:"toBase64",value:function(){return rE(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return nE(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return rE(),new e(MI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return nE(),new e(MI.fromUint8Array(t))}}]),e}();function aE(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=d(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var oE=function(){function e(){l(this,e)}return h(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){PI(e=fI(e,SI));var n=TI(e),r=e._freezeSettings(),i=new Mx;return CI(n,i,new Px(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){PI(e=fI(e,SI));var t=TI(e),n=e._freezeSettings(),r=new Mx;return CI(t,r,new Lx(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new fd(ld.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new hd;return e._queue.enqueueAndForgetEvenWhileRestricted(te(J().mark((function n(){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qd.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Qd.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Dk(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),uE=function(){function e(t,n,r){var i=this;l(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof _p||(this._appCompat=t)}return h(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||ad("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};vI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return NI(this._delegate)}},{key:"disableNetwork",value:function(){return DI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&uI("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new hd;return e.asyncQueue.enqueueAndForget(te(J().mark((function n(){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ex,n.next=3,eI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(TI(e=fI(e,SI)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Q_(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new fd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new wE(this,kI(this._delegate,e))}catch(t){throw dE(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new hE(this,bI(this._delegate,e))}catch(t){throw dE(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new gE(this,function(e,t){if(e=fI(e,pI),oI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new fd(ld.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new mI(e,null,function(e){return new bv(Cd.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw dE(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Z_(this._delegate,(function(n){return e(new cE(t,n))}))}},{key:"batch",value:function(){var e=this;return TI(this._delegate),new lE(new B_(this._delegate,(function(t){return Y_(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return RI(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return OI(this._delegate,e).then((function(e){return e?new gE(t,e):null}))}}]),e}(),sE=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return h(n,[{key:"convertBytes",value:function(e){return new iE(new MI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return hE.forKey(t,this.firestore,null)}}]),n}(F_);var cE=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new sE(t)}return h(e,[{key:"get",value:function(e){var t=this,n=xE(e);return this._delegate.get(n).then((function(e){return new yE(t._firestore,new v_(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=xE(e);return n?(tE("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=xE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=xE(e);return this._delegate.delete(t),this}}]),e}(),lE=function(){function e(t){l(this,e),this._delegate=t}return h(e,[{key:"set",value:function(e,t,n){var r=xE(e);return n?(tE("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=xE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=xE(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),fE=function(){function e(t,n,r){l(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return h(e,[{key:"fromFirestore",value:function(e,t){var n=new y_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mE(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new sE(t),n),i.set(n,a)),a}}]),e}();fE.INSTANCES=new WeakMap;var hE=function(){function e(t,n){l(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new sE(t)}return h(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new wE(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new wE(this.firestore,kI(this._delegate,e))}catch(t){throw dE(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=X(e))instanceof yI&&wI(this._delegate,e)}},{key:"set",value:function(e,t){t=tE("DocumentReference.set",t);try{return t?G_(this._delegate,e,t):G_(this._delegate,e)}catch(n){throw dE(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?K_(this._delegate,e):K_.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw dE(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Y_(fI(e.firestore,SI),[new vy(e._key,ey.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=pE(n),a=vE(n,(function(t){return new yE(e.firestore,new v_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return H_(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?j_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=fI(e,yI);var t=fI(e.firestore,SI);return rI(TI(t),e._key,{source:"server"}).then((function(n){return X_(t,e,n)}))}(this._delegate):function(e){e=fI(e,yI);var t=fI(e.firestore,SI);return rI(TI(t),e._key).then((function(n){return X_(t,e,n)}))}(this._delegate),t.then((function(e){return new yE(n.firestore,new v_(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(fE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new fd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new yI(n._delegate,r,new Rd(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new yI(n._delegate,r,t))}}]),e}();function dE(e,t,n){return e.message=e.message.replace(t,n),e}function pE(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!aE(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function vE(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=aE(e[0])?e[0]:aE(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var yE=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return h(e,[{key:"ref",get:function(){return new hE(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return k_(this._delegate,e._delegate)}}]),e}(),mE=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||ud()}(void 0!==t),t}}]),n}(yE),gE=function(){function e(t,n){l(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new sE(t)}return h(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,x_(this._delegate,function(e,t,n){var r=t,i=d_("where",e);return new I_(i,r,n)}(t,n,r)))}catch(i){throw dE(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,x_(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=d_("orderBy",e);return new __(n,t)}(t,n)))}catch(r){throw dE(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,x_(this._delegate,function(e){return hI("limit",e),new E_("limit",e,"F")}(t)))}catch(n){throw dE(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,x_(this._delegate,function(e){return hI("limitToLast",e),new E_("limitToLast",e,"L")}(t)))}catch(n){throw dE(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,x_(this._delegate,T_.apply(void 0,arguments)))}catch(t){throw dE(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,x_(this._delegate,A_.apply(void 0,arguments)))}catch(t){throw dE(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,x_(this._delegate,N_.apply(void 0,arguments)))}catch(t){throw dE(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,x_(this._delegate,D_.apply(void 0,arguments)))}catch(t){throw dE(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return xI(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?W_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=fI(e,mI);var t=fI(e.firestore,SI),n=TI(t),r=new z_(t);return iI(n,e._query,{source:"server"}).then((function(n){return new m_(t,r,e,n)}))}(this._delegate):function(e){e=fI(e,mI);var t=fI(e.firestore,SI),n=TI(t),r=new z_(t);return b_(e._query),iI(n,e._query).then((function(n){return new m_(t,r,e,n)}))}(this._delegate),t.then((function(e){return new bE(n.firestore,new m_(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=pE(n),a=vE(n,(function(t){return new bE(e.firestore,new m_(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return H_(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(fE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),kE=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return h(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new mE(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),bE=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return h(e,[{key:"query",get:function(){return new gE(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new mE(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new kE(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new mE(n._firestore,r))}))}},{key:"isEqual",value:function(e){return k_(this._delegate,e._delegate)}}]),e}(),wE=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return h(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new hE(this.firestore,e):null}},{key:"doc",value:function(e){try{return new hE(this.firestore,void 0===e?bI(this._delegate):bI(this._delegate,e))}catch(t){throw dE(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=fI(e.firestore,SI),r=bI(e),i=V_(e.converter,t);return Y_(n,[KI(GI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ey.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new hE(t.firestore,e)}))}},{key:"isEqual",value:function(e){return wI(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(fE.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(gE);function xE(e){return fI(e,yI)}var IE=function(){function e(){l(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=x(LI,n)}return h(e,[{key:"isEqual",value:function(e){return(e=X(e))instanceof LI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Dd.keyField().canonicalString())}}]),e}(),_E=function(){function e(t){l(this,e),this._delegate=t}return h(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new YI("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new HI("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=$_.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=eE.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new ZI("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),EE={Firestore:uE,GeoPoint:VI,Timestamp:Sd,Blob:iE,Transaction:cE,WriteBatch:lE,DocumentReference:hE,DocumentSnapshot:yE,Query:gE,QueryDocumentSnapshot:mE,QuerySnapshot:bE,CollectionReference:wE,FieldPath:IE,FieldValue:_E,setLogLevel:function(e){!function(e){td.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ne("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},EE)))}(e,(function(e,t){return new uE(e,t,new oE)})),e.registerVersion("@firebase/firestore-compat","0.1.25")}(Tt);var SE="SignIn_bgimg__lWU-5",TE="SignIn_h1__O8J0r",AE="SignIn_btn__aWWD2",CE="NavBar_topnav__4y3yt",NE="NavBar_logo__ATYsz",DE="NavBar_btn__-gRaQ";function RE(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function OE(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var PE=function(){return PE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},PE.apply(this,arguments)},LE=function(e){return{loading:void 0===e||null===e,value:e}},ME=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return PE(PE({},e),{error:t.error,loading:!1,value:void 0});case"reset":return LE(t.defaultValue);case"value":return PE(PE({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),LE(n)),i=r[0],a=r[1],o=function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},u=function(e){a({type:"error",error:e})},s=function(e){a({type:"value",value:e})};return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},FE=function(e,n){var r=ME((function(){return e.currentUser})),i=r.error,a=r.loading,o=r.setError,u=r.setValue,s=r.value;(0,t.useEffect)((function(){var t=function(e,t,n,r){return X(e).onAuthStateChanged(t,n,r)}(e,(function(e){return RE(void 0,void 0,void 0,(function(){var t;return OE(this,(function(r){switch(r.label){case 0:if(!(null===n||void 0===n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return u(e),[2]}}))}))}),o);return function(){t()}}),[e]);var c=[s,a,i];return(0,t.useMemo)((function(){return c}),c)};var VE=function(){return VE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},VE.apply(this,arguments)},UE=function(e){return{loading:void 0===e||null===e,value:e}},BE=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return VE(VE({},e),{error:t.error,loading:!1,value:void 0});case"reset":return UE(t.defaultValue);case"value":return VE(VE({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),UE(n)),i=r[0],a=r[1],o=function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},u=function(e){a({type:"error",error:e})},s=function(e){a({type:"value",value:e})};return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},qE=function(e,n,r){var i=(0,t.useRef)(e);return(0,t.useEffect)((function(){n(e,i.current)||(i.current=e,r&&r())})),i},zE=function(e,t){var n=!e&&!t,r=!!e&&!!t&&xI(e,t);return n||r},jE=function(e,t){return qE(e,zE,t)},WE=function(e,n){var r=null===n||void 0===n?void 0:n.snapshotOptions,i=function(e,n){var r=BE(),i=r.error,a=r.loading,o=r.reset,u=r.setError,s=r.setValue,c=r.value,l=jE(e,o);(0,t.useEffect)((function(){if(l.current){var e=(null===n||void 0===n?void 0:n.snapshotListenOptions)?H_(l.current,n.snapshotListenOptions,s,u):H_(l.current,s,u);return function(){e()}}s(void 0)}),[l.current]);var f=[c,a,i];return(0,t.useMemo)((function(){return f}),f)}(e,n),a=i[0],o=i[1],u=i[2],s=[GE(a,r),o,u,a];return(0,t.useMemo)((function(){return s}),s)},GE=function(e,n){return(0,t.useMemo)((function(){return null===e||void 0===e?void 0:e.docs.map((function(e){return e.data(n)}))}),[e,n])},KE=n(184),HE=Tt.auth(),QE=(Tt.firestore(),function(){return HE.currentUser&&(0,KE.jsx)("button",{onClick:function(){return HE.signOut()},children:"Sign Out"})}),YE=function(){return(0,KE.jsxs)("div",{className:CE,children:[(0,KE.jsx)("a",{className:DE,children:(0,KE.jsx)(QE,{})}),(0,KE.jsx)("a",{className:NE,children:"Kurka.IO"})]})},XE=Tt.auth(),JE=(Tt.firestore(),function(){return(0,KE.jsxs)(KE.Fragment,{children:[(0,KE.jsx)(YE,{}),(0,KE.jsx)("h1",{className:TE,children:"Welcome to Kurka.IO"}),(0,KE.jsx)("div",{className:SE}),(0,KE.jsx)("button",{className:AE,onClick:function(){var e=new Tt.auth.GoogleAuthProvider;XE.signInWithPopup(e)},children:"Sign in with google"})]})}),ZE=(Tt.auth(),Tt.firestore()),$E=function(){var e=ZE.collection("click"),n=e.orderBy("times","desc").limit(1),r=s(WE(n,{idField:"id"}),1)[0],i=s((0,t.useState)(0),2),a=i[0],o=i[1],u=function(){var t=te(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.add({times:a});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,KE.jsxs)(KE.Fragment,{children:[(0,KE.jsx)(YE,{}),(0,KE.jsx)("p",{children:"It was clicked ".concat(a," times")}),(0,KE.jsx)("img",{onClick:function(){o(a+1),u()},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVsAAAFbCAYAAAB7zy3tAAAABmJLR0QA/wD/AP+gvaeTAAAiiklEQVR42u3dbaxsWV7X8d9a+6HqPNyn7r73dved7umIwATnUZqBEYVJwADyZGA0EE0mSIhMgqLRjEYUjaE1hoQQIBDiZATHIAOOLyBRSUxAEyEMRGbsMYwz/eB039O379y+t89zVe2HtXyx965T3XZ0oP61btWc7yep1Ol+se46u/b+1apdJ+snAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgxt3vCXyRyyRFw/GcpGA8JgAAwBcHVrarc0nS10uaSPIG4wVJ25L+QNIL6l47VrgAzq3hDezd6sJw0j8v+xjG+aF+/OJ+/6IAvnD5/Z7AF7HQP0+NxptJGktq7vcvBuCPjrBdneHWwbh/WOE1AzaQxb1EAMD/B2ELAAkQtgCQAGELAAkQtgCQAGELAAkQtgCQAGELAAkQtgCQAGELAAkQtgCQAGELAAkQtgCQAGELAAkQtgCQAGELAAmwEXVnZDWQk/wlaXIqlcYFb8NweS5pKo3a9X6zHJqAq/s9EWAdELadmdVAUXL73Y/WITOUOzazsznXqz4wAGyc97AdGmo/rK65tjUY0EWpeqf08D+RdCgVmcFEW6m4JOnfSu//ZemdhbRTn/WcrZsoaUvS85L+rrrzjO404BwbPoYfqQuIoCVbcF3//G4pRilO+udlH8M4P9SPX9g09q7q0fbPn+6Pb3m/X2jgfjvvK9tBoy4czFZfsVs1540U67P7rX9sbTc/F7sgCzpbla+jqC5gl/6kAHyxIGw7ufpwlEEwamGQXHKFwXhtP6STMnWPdTbc3lj3eQLJrPO32QDwRYOwBYAECFsASICwBYAECFsASICwBYAECFsASICwBYAECFsASICwBYAECFsASICwBYAECFsASICwBYAECFsASICwBYAENm3zcCejzb37wTIvBcu6A6+u7sFLku/eyyzHH355r414p3SSFGPMYoyW0x3qd2BvVafVuvblJbNpYWt6kQ1lWdYTlPozK3Tnl2Wl+eL4G3D2DtMdqnyw/nidVsQyB1ZppK66+8OSvk/SvgzeKLy6M+u2tHNRck3f87XUoM511Yxf+ZVqf//3pbt3pdFo6QMQY9SoLPXszZvau3NHZVEoxvVc3MUY49b2tnvmM58J7/+u7zopisLXdW0x2UrSA5L+gaR/LqkQde5WhmvstyR9vaRD2axy836s6zq75M6lTVvZDqm1o+5CM7EtaayupHHZd58hrZss05Ekv7OjOB4vPccYgoL3Knd3dWE6VZ7n6/s5Oka3vb2tra0tL+mC4ciz/nlo692UxcImGU7WXS0ftvPL4X7/Uutg08J2kXXWuFUMKknOYAU6v30QgpqmkXNubVe2ilFN2yq07ZpOEF8A7osb2+SwXcmqxmJl+38PajDVNwhWZzHuCsxnuq4TxBfC4stownrBBnyhDQCbj7AFgAQIWwBIgLAFgAQIWwBIgLAFgAQIWwBIgLAFgAQIWwBIgLAFgAQIWwBIgLAFgAQIWwBIgLAFgAQIWwBIYJP3sz2XYoyKIXTPhpuHe2/7vru4Earz3npr23nvZYzRamCnzats8TLaM9Y5N5wAq9mD2DnFEMzm289zozY4J2w3hHNOUdJ4a0sXL19WnudvuKH4H1Xsxz48OFAMwWSj8xij2q6pofvv/s3B0GLvpdXAG3PRLjB7c4gxDmOt5jh0r/+5fr0I2w0RQlCZZfrcc8/pU08/re3t7S4cl+ScU900+tNPPqlyNFIwGFOSxuOxLl+5ohuPP64HH3xQdWNQQxWjd95rOpnceO6zn30iz/NHm8ZiYAV1vWb/XdLU5ACszrCiuybpy/r5Lv2xpCiKoq7rl778K75iN8sy2+VnjNkffupT73Deb0WbEyyq6yC8LenZhWOy1gjbDdHUtcos0y/9wi/oX/7MzygvCjX18sWyeZ6raRo9e+uWHn/4YU1jXP4jfz/Go9eu6T9//OPKssxkZVtXVfHYjRv6kQ9+8Ad+5sd//AcMb03M1JWJfrmkz2i9L95cXaPwX5b00+rCdulG0eFY/thP/IT+7Hvfq4P9fe+Wv7Xk8izT0dHR1jufeOIThge1Vhe2vyTpr6h7o5wtNWIChO2m6C+GPMskSWVZmtwHLYpCTdOojlGVpDpGk9sT3jlN6lp7L7ygwqh2va9DdydHR42kOtrdX6zUhe26Buwbaftnk5Dpf/F4986d0c0XXvBHR0fRL3+CRZ9l7uT4OFrNs9doA2vsCdtN0YdV098HrarKZGU73Ipwzsn3z8teYzFGOXVfupWjkVnYOufcaDyW9z6X7bnrXve8CbL+eSSDle0gz3ONRiPNZjO37JemMUaX5bnqqnKWc9RZyBaGY64cf/oFAAkQtgCQAGELAAkQtgCQAGELAAkQtgCQAGELAAkQtgCQAGELAAkQtgCQAGELAAkQtgCQAGELAAkQtgCQAGELAAkQtgCQwKo2D3fqqiqiDDZk9l6jIvezEOKwYbLJJs9e/fbx/mwP4qW3uPZemk6lYmFMw7LDPO9eslFZyhs0NeR9U8Pi7245X4vNyOdjeS8nKeuPQVmWprt9R6nc2dnRwf7+2rY2eO+Loizr0LbDtWtyCMqyVF1VXcty/5pZvG6L4xRlOS8BXXbY/jnzWaa6rkdG4w55VWkFr/+qwta0BiMEaVYF6awKxORAnC3rq/lPS/eA9CeWq2u5fjyTk7Z/bvtgnBk1NQz9e64/HhbzjTF2xzZGVVVlVrte17WqulZVda+XVVvFgupgf1/qzt21DNsQQphNp1JXDSOzefaveVXXqvuHxXkbQlDdv0ZVVZmUlC78zq26sWc6hx1kQ6fbWyT9iKQ7Fv9Gkbu8buL+X/zzb3ry8RvbqqqQWSyWnHOq2kaTd/11xaxUiAYngnNys5nCY4+pkuRilKpq6WHbGHUq6Vu+4zv00LVr2r1wwWSV4LNMk8lE5Xisk7ZVa7NCkNSdCE888YTZyrZtW126dEnf/K3fqrIsdfHSJZP5xhDy0Xisj3zoQ//wpZs37+jsU9nayfLct01z9N5v/Mb3vOfrvk6T09PcoJhReZbp8PBQb3372/XQQw/pwu6u2cq2qir9zQ9+UEVRKBi86cYYs9FopOefffbJX/nIR/5ZUZaX66qyaFluJF2V9JSkT8u4+NO6c8mrq4X+Jkn/SUbNn2XhVdVB//Rvv03f++1v1p17M2WZxdS9YjvVo9/5H+Tyra7ny6BZVs5JbSt/eqrovUmBonNObQi6PB7rQlGotWjBVb8KdU63T0/VhiDn3NKr0GGMzHtd3N5WMJxr7pz2T060f3yszHuTK6GuKj386KN68ku/VP/72We718/wVoqloQ35r37/9+tnP/Qhfe7mTZWj0dLjOufUtq0evHLFrDNuGDeEoFfu3u3OC4Mx26bR9Uce0S/8/M/r7/zgD6ocjVTNTBa2Q159s6Tf0FmemVjVbYRhgrUMvoQbXvij4ya/dWfq7+3PYmZxw9J5hWaqNx0cKisaxdAuH7bdhLt7t3nevZsZrezyLNPBdKp7Jydmq8VhvnlRaCj4MxvbOVX9LQSLEWMf2gdHR3rp5k2VZWmyUmrqOoa2dW3T1JLiugbtosnpabZ3+3Z2+9atWJTl8t+LOKeqrrXdFWqqbVuz8yCEoFsvvSTvvUmIt20bm6ZxB/v7QVJj+B1DrS5szQJ20arCdgjYQt1HMhPOS0XulGfOZZnFH1I4BTnFougewduG2ApkWaYsy5YfKJHheFqtbIdjkBeFcqMVWIzR5WUpbVBbq3NORXcMXFEsP+1h1em9n3+pZdKy3I+T57mWbetdmKsrylK+G9AsX3QWsiv5Ky3+9AsAEiBsASABwhYAEiBsASABwhYAEiBsASABwhYAEiBsASABwhYAEiBsASABwhYAEiBsASABwhYAEiBsASABwhYAEiBsASCBFE0NVjtdxxiUN030TRtjjMGmqaGNfTljLVl0kK1SjFKWKWZZ12225hudv3bqdu0HlmNJfTdUjPPmYqtNyVch62txfL+B/OacAUjR1GCxjbykqK1xpsuXSjVtcJnFru/OKbatwqWLklUH2ar0c3NVJVdVin2t97qbz9GobmhoLB4ae02aGvrnodLduLF3JdqmUQhBbQjyFsWf3iuEsLZvMl8MrMN2WBr+pqQbOqseX0oMcfQf/9V7X/jeH/5vH/vpf/2Z71KMjcXcvZxOFXX7bz2hC86pXecTbTRS9uKL2v/Zn9XxBz6g7OBAMqhDWYWhDiWEoKPjY9NxsyxTG4K2trbM6oHKstR0MtGHP/pRNU1jVkwo9dXwRnUwUldfU9e1rl27pgs7O/qSL/kSs7qZGKNGo9G83h62VrWyrSS9ZDVY08bRt3zfb0ld+6VkVC88VGe6w8/P/3tdV4ux68iSOz2931P5I7G+cIfVl0VH1mB4Y7h6/bppB11Udz5ZheHiMdje3pb3Xhb9Y8MxiEYtyHhjqwpba8nOgLVd2w4XwQZeDFYX8BuFrGXldlVVK/n9LcPWOae2aVSWpdltlMEwHoG7GpsStskycF1Ps/lFtc63Ou4Dy9Ze69Xd4puDaYi9bhzCcTPwp18AkABhCwAJELYAkABhCwAJELYAkABhCwAJELYAkABhCwAJELYAkABhCwAJELYAkABhCwAJELYAkABhCwAJELYAkMCm7Ge7caJku9H3G2wevil9Ues+z8X9YC33hl3VuK9ncXzfaH6reN3Mxlzzc+qNELYrMjS2Wnmjk3QTNo1e3DzbarwYo0II8t6bBsKmdG8N8xxKGi3PA++9eeXQMK5lV1qWZfOx1/8q6BC2xobeqTAaqXniCbm6NlnhxrJU9sILai9eVFRfYWIYDqsI7hjjvLHWyhCy4/F4Jd1eq7CKeTrnNJ1OTcN2eBOzXt23bavJZGL25ti2rU5PT1X3NUabssYlbK05J8Wo6h3v0Od+93dVTKeK4/Hy4w5V5icncq+8osZ7ybAzyzpsnXNqmkb37t0zCxvnnKq61sPXrunx69dVG1fPr2qFZBkGMUaVzunW3bv67DPPaNR3kVmOb2kI20996lNm50Hbtrr80kt68ebNbs4b8omEsF0RV9fKJWWf//y8GXe5AbsQV55LRhXerx3ePmqcc6/5uGcynveKkmpJTYwb8xHSSoxRjXOScyryXFmWrfU98eGWRFEUZmHrvVdRlmdV9htwO00ibFfHue7jfllKo9H9ns3/k3Xh4eIY1gWKwzydZHpvcZMMv/E6h+zi/IbWXqv5zm+hrfnv/3r86RcAJEDYAkAChC0AJEDYAkAChC0AJEDYAkAChC0AJEDYAkAChC0AJEDYAkAChC0AJEDYAkAChC0AJEDYAkAChC0AJEDYAkACm7Z5+FBoVUky68KopbKVXHNWIbYU308wqqvs2ITajvO4Cfems9w8fdjkfVU9bE3TdE0NBht+hxBi0zQuxNjqLBMsVJLGMsyWRZsWtsN8S0mF1aCFpEySNyjYGNI6eq9tSdnWlqJRU8NwMaxih/6maUxbFbBaIQRVQ+GhYQNCWZbmBZWSdPX6dbNzq21b98CDD2r3woVMUmZ4xg4HciWf+DclbId3r49J2pN0ZHRAnKT6X0g/mktlNFrZNpKunJ7qq55/XtOXXpK36CBTd4GNRiOVZWnaghpC0KOPPjrvsyJw11uQtLOzoze96U1nPVxLijEqz3PdvHlz3oRrwXuv2WymX/y5n1NhVE4ZY2zzPM/u3rnztKQPxxgflM0Kt5H0gKRnhn/K5CD0NiVs2/753/cPE6EL7PBj0t9Xt1pemlP3Cj0+megff+ITunvnjorCZhHetq0uXbqk3d1dtW1rEorOOdV1revXryvP87XvtTrvnHNqJW1vbeni1pZZGoQQtOW9nn/uOR0cHKgoCpNzIcsynZ6c6Dd+7dfmHXcW01X3YfRpST/ZNM1I0szoUCw6l2G7OF+zJb6T/HVpes+wxdqpe9VH3mt7e1uTrS3lBmE7VEKPx2ONRiPTsLVswMVqze+txqiZcYV5Jsl5ryzLzFa2WZbJ96vvvCis7gkPJ6t3zim0bRlCsAzGWsZBK21e2FreDFeU/MvzH20MZ0Gt7suxYNQqGmOc36+1bCqVtLIvRWBveFO0bhYOIZjXws/P0/5cbera6rwdBhlO3Kp/rDX+9AsAEiBsASABwhYAEiBsASABwhYAEiBsASABwhYAEiBsASABwhYAEiBsASABwhYAEiBsASABwhYAEiBsASABwhYAEiBsASCBTds8fFUqddU7ZpuTxxhdXddl0zTRWTRB9E0NbdsqhGDWQTaUSK5iY3LrMV8zV9kVHUpnDQhDdcu6NlcMc7PeQD7GOD+mlmNbv06bjLDtlJoX7NpsWJ/luR68elVt27rCoPDRqe+J2trSyKg4T+oCLM9zlWU5L5K0Gtd7P29rtQpb772KPO9OXKO2gqizbq/h53XlnFOU5J2TN25qKNTV2AwPC95wrE133sN2SJZ3ye6WipN0+Mrt21/71777u39VMc4kLd1l7rNMx4eH+tpv+Aa99ckndXp8bNIT5ZxTVVXzIG/bdukxh3GbptG9e/fM+qycc5rNZnrzm9+sxx9/XFVVma3um6bRY489prIoFNZ8ZZs7p7v7+3r55ZfNihmH5ua9vT0dHh6alX9mWabJ6en9Pmxr4byH7eCZ5YfoxBidpHh4cPDC4cGBZNRv5rNMoW117+5dHR4e6uToyCTEhqrpk5OT+Ud0C0OAnZyczCvSLcaczWaaTCaqqkqz2cw0bDfl465T17Q8mUzUtq1Z2IYQVFXV/FhYjVvX9f0+ZGuBsO1YLmO8zqrXzSfos0x5nivPc7OVbZ7n84+OViu64b6iZVPr0ATsvZ/fX7U6BlZzTGWYs9UtGknz8YZja/VGtq6fElIjbDuWS5qVVNXOJzhcWMarsOGCtfhyaFNWiIvz3bQ5r4r1l244s1lv5wCwoQhbAEiAsAWABAhbAEiAsAWABAhbAEiAsAWABAhbAEiAsAWABAhbAEiAsAWABAhbAEiAsAWABAhbAEiAsAWABNjPdnXiwrP15rMuSrFvhVjKG+1da1b2tzCOVVPDKua6ymOQgvVcF/c2Xnqs1zydb4Tt6riFZ7Ot6p33yrpmBecNivR8335g2aggnTU1DD9bjTk8L7YKWIzrvZ+/UL77n2bHwlKMcT5Py7aKYdP4vChUlGVX0mgQtj7L1BTFeh7MxAjb1anUvaPflkHhY69t6vry4f7+zuTkJHrvl1/Zeq+q7yCLMZoWPg6165LNKmnoyarrWrPZTLPZzOwNomka1U3Tdb0Z1cSvQoxRKgrVTaOqqs7+35KG33n/3j0d7O93hY8G0/Xeu9l0GtRdB1YHtZH0sKSD4d8xGnel1vOMwhsZSZpJ+ilJf0NdmC/dkT6sQL/pfe/T1u6uglHYDm29b33rW1XXtdkKtG1bXbhwQRcvXjR9Y6jrWm9729u0tbVlVnq5CjFGlWWpW7du6fnnn9doNDIJ27qu9eDVq/pHP/zD+txzz73mk8ky01WXMceSLqj70LC+B3fFWNmujlN3fE3edZ1zuXNuFo2/1PTeq20alaORxqORWYCFEFSWpfnH/RCCsr700rKUUJJ56eUqDCWa2ULxp8WbQ4xxXvw5HItgeC+4yHNVVVXEGK3KUJ264DYvV10VwnZ1oiSzDucYY9avNExXBsMFFfuP6FYfoYcSxeFhNebrx7eyOJ7VfFdlcZ6mX2bGOA9uq4r0wax7E691jle2/OkXACRA2AJAAoQtACRA2AJAAoQtACRA2AJAAoQtACRA2AJAAoQtACRA2AJAAoQtACRA2AJAAoQtACRA2AJAAoQtACRA2AJAAmwevjmGnZyHnenNNiaXpBBjEUJwMYQYl61Lck6h7x8bNqW23OR6GNdq8+yhAeL1Y1uxHivLMrVt2z2axqRRoW2a2DSNi915Zdnplcv4XN1UhO3mGAJwqNQtZNBBJuekGLW1va2dCxfUNo1Fz4xCCBqPRiqKwqy+RupqfEajkcbjsWkHWZZl2tra0tbWltq2NW1qyHO7yyzGqKIoNJlM9OBDD6ksS6sOMnf1+nXlWVaYTfasg8xyzI1F2G6OIVn+q6RLku7pLHj/+GL0kiafefrpD+R5vhO7K3fplW3bNNq9cEGXLl1SNZuZdpAdHR3plVdeMStmHAofx+OxxuOx6bghBN27d88svGOMGo3Hev6ZZ/Q/P/EJbW1v23SQhdCUo1E+nU5/RdKL6gpGLVa4XtJ0+GdMDsKGWt+iJaSSq6uGvqWuHnr5sO3tXLyov/A936PpyYl8tvz7wmB+e8LIELZvectbTMPWe6+qqvTJT36yqwY3mHPsP4V85umn9ek/+AM57xVt5juVNJb01ZI+ru4cONfhaI2V7ebJ1a1obULRuTzP88aqwrwfU6FtlWWZRmWpUNemYWvNOaeiKLS9vW0etkVR6MqVK/PW2mWFELS9u6udnR1JUlEUZvXzkhSloigKTafTsWK0KmeMkiqzSW4ownbzNP3DRoxtU6/m+4vQN7SGGOUMV6IrmetCu7BFw/Cwih2+yDKbZ/+lWNt0p0BT12ZvDr26H3sqVram+NMvAEiAsAWABAhbAEiAsAWABAhbAEiAsAWABAhbAEiAsAWABAhbAEiAsAWABAhbAEiAsAWABAhbAEiAsAWABAhbAEiAsAWABNg83Nje3t7wo5Ndj9O8VXV/f1/Hx8dmO/9/7GMfK5566qnjVRwL56TMR2U+yju7Xq+2jWra5Tf4fu2YrZxCN0+DuToneXW/dze2zYkQQz+e79ZJ5Whk2tSwqKrOfbmCKcLW2I0bN4Yfo86K7tbZaq5USSE4HU4KTae5vDd4c3BSG6J2t3Jd3M0Vgk2RgHNebVur0bamrV0bjHNeTay1e/GCMp+ZdJCFELRz4cK8sbeqqpWFLWwRtsb29vaGRcxXSPp1SS/JoMp5VSvbqqrctWvXmne9610PHBwcmB6LC+Na7/8zz+ne/lRFvvwdq6aNevBKqV/+9Rf0bz7yOT14ZaSmWT4Y89zr1YOZfvJHv0aPP7Sr6azVsovmKKnIve6+OtVP/eLvaHenUNtazDXXK6+8or/0vvfpp377t/Xy7dsqitU0hX/bt33bSsY9rwjb1dmV9CckPaqutXQtee/VNM18pSTDxuU8i3r8gVNtaaYiX37Yuol65KGgIuwrzA706h2npl1+tZjnTk0Tte3u6HJ5qkkIS4dt15zoNcummh6/qnrS3f5Yfq65YtPoyqVL+pr3vEd3795VWZZLj4vVI2xXZ7iyQv9YSzFGOeeiui9Lh1W5SeDGKE1rr1njFQy+i62boFmdqQ3dWN092+UDzPW/dhsLNbFUE1s5gzsULnq1se3/DRvDferZbKYQgvb39zUajYxGxyoRtqszXF9ea/xXH865199LNFvZduN3A1p8l+Xca8exuAcqSXEe2FFueBi067qFNwKrmtrhd3bOyXs/f2D98SoBQAKELQAkQNgCQAKELQAkQNgCQAKELQAkQNgCQAKELQAkQNgCQAKELQAkQNgCQAKELQAkQNgCQAKELQAkQNgCQALnej/bhXJGMzFGq26/L+TfWosxUv47cfHQmu68u5r5pjgVVvQaur29PfOBFzr6zp1zHbareOFXcYJKZxeU9155nptuGL1QiWPLSVnm5DOnLFs+GWOU8syfbSBufKS9d8q8k/fOZLPzLOvGWzWrluHXiec5GFfhXIftwsp2W2ZVMNE3TXOU5/l4FSuO2Wymw8PDrovKYPy2bZVlmcajTHkmlWW+fIg5aTprNSozHZ00Op00yjOLwsegw+N6/t/bW7maxqaD7PC41mzW6vi00XTWyuJ0qIqgyTRIyjUeFWoN2oDzPNfx8bHyPFcIQTFGhWDXuuScG/eddLt7e3tWA0dJpxIr2/PMq+sHu62uoNGkf6ssS81mM925c0dZlpmUPVZVpccee0xPPfWUPvrRjyrPczVNs/S4Q9nhp3/ze/XYoxc0my1fix1j1O5Oof/xh3f1Vd/+71QWXlW9/HVbFF51HfT3PvAuxc9/h26/eKiyWL5luKpbXb++oz/5tR/Rs587lOV9oCtXruj3fu93tL+/b/YJIoSg8XisT37ykwohWK1sx23b6urVq/9lNBpZBfhwPR1LuqCz6+1cOu9hOwive16ac07OuawvU1z6aujHm19YVt1T3jlJrSbTVqentWbV8qu62Hd4TabNwtyXnqqGT+RNExROak0mjcnKtqpbTU/P3ricd909iyU45xRClHPSZDLRdDo1C9vh08jOzs5Q2GkxbHSd5d9tXyvTOQ7YRYRtxy88W98AMx1vuHUQQjBZfYQhvF13b7W7X7nclEPs79X26RhiXDa75uNKkoa5Gt0LztpunGGOMcSlV7bD6xSjzIsZDQN20TDg8h8VFqbaP/NXT+IgAEAShC0AJEDYAkAChC0AJEDYAkAChC0AJEDYAkAChC0AJEDYAkAChC0AJEDYAkAChC0AJEDYAkAChC0AJEDYAkAChC0AJMDm4Z1G3UbHy/fMnHHOudw5F/vGXRPDBtRZlpl0kGW5V9PWkpwUfddeu/TO2VL3K5/NtTXY/z/zmWoFOeel6BSjl8WhjXKK0SnLun2zvcGxdc7NGxWsLTZ2GI4ZXTfocC1YyWV7XW0swraTq9upfnheWoxRbZcwziIUh2aGfky1bTv/eRmubyzJ/USF92p9K7dsLU6MKnyjzE26ubetSatE2w/hYiVlpyr8qQq/fJhF36rMnELbzOdrlTZt/7tbNWtImp8HlmM651zbtooxWmbCUAlFzoiDMFxTv6quYdeif8lJqpxzD+/u7n5T3+m0dCI0TaMsy/T2t79dL774oh544AGTsPXe6eS01nH8U7p9Wqo26PRSjDqKuWbZkZ78qgNdvjRS0ywfCnnu9cq9qa499mV6+dUv1b1qoqxd/k5Y2wSFg5GefPef0/U3HWs0slnZNk2jS5cuqSxLbW9vm61yQwja3t7W9va22ra1WuW2McbMOfcbkl6WVMpmhZupb9Y1Gm9jrb7U/py5devWUM76bkm/K2kqyaRhV+pWjZYV6TF2IfaJp59XVTVmH09jjCoKr0eu7ahto0nhY4xSnjntH8706mGlfKE3bBnOSW0b9ci1bRWFNxlzkVX32CCEoN3dXV2+fNnkDbc3nKdfLenjktwjjzxyrsPR2rle2e7t7Q0/jqzGbNvWxxgnzrnScq4xRuV5rrt37+rg4EB5npuFrnNOWTzQKA9L30J4zZxD1AsvvGoStGfHoatf3ymNQzGTPv/5A9MxY4zKskyPPPKIZeX4/DZC0zSWK9tB2RdKjvf29ixbcWeSdOPGDcu5bpRzHbYLL/zMasy9vb3+ewZVq5hznucajUZmH0ljjPLe61BZ92WT5YXrpJHZ29hrBes1V5SKwvbLrOHYvr6G3sqKxq368aY3btxgZWuIP/0CgAQIWwBIgLAFgAQIWwBIgLAFgAQIWwBIgLAFgAQIWwBIgLAFgAQIWwBIgLAFgAQIWwBIgLAFgAQIWwBIgLAFgAQIWwBI4FxvHr5iwy730/s9EeALMNTiWLYzYAFhuzrDp4axDDvIgBXj0+6KELb2hiqR/yXpOyVNxAmM9Rckbak7b6Vz3oQLANhQVJkbW2jslaRMRiuEoal1f39fx8fH5oWPd+7cMW2AxdmxvXr1qumxbdv2NVXmhq+ZkzTvRj/PTbgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKy5/wM79T8TL13gOgAAAABJRU5ErkJggg=="}),(0,KE.jsx)("div",{children:r&&r.map((function(e){return(0,KE.jsx)(eS,{messages:e},e.id)}))})]})},eS=function(e){var t=e.messages,n=t.times;t.uid;return(0,KE.jsx)("div",{children:(0,KE.jsx)("p",{children:"Highest score: ".concat(n)})})};Tt.initializeApp({apiKey:"AIzaSyBEgxpi3uQvmXELHHhu2Y1J1A76z2unPw4",authDomain:"kurkaio.firebaseapp.com",projectId:"kurkaio",storageBucket:"kurkaio.appspot.com",messagingSenderId:"958438104188",appId:"1:958438104188:web:78cc1caa9f79d17cd37df9",measurementId:"G-R2Q2X0ZBHX"});var tS=Tt.auth();Tt.firestore();var nS=function(){var e=s(FE(tS),1)[0];return(0,KE.jsxs)("div",{className:"App",children:[(0,KE.jsx)("header",{}),(0,KE.jsx)("section",{children:e?(0,KE.jsx)($E,{}):(0,KE.jsx)(JE,{})})]})},rS=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,KE.jsx)(t.StrictMode,{children:(0,KE.jsx)(nS,{})})),rS()}()}();
//# sourceMappingURL=main.0e88920e.js.map